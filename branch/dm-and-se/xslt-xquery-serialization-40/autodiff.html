<!DOCTYPE HTML>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8"><!--Generated by the DeltaXML.com xhtml-outfilter.xsl--><!--Using XSL Processor: Saxonica--><title>-[[Page not found · GitHub Pages]]-</title><title>+[[XSLT and XQuery Serialization 4.0 ]]+</title><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><style type="text/css"> /* from xsl:query.xsl (C) */ code { font-family: monospace; } div.constraint, div.issue, div.note, div.notice { margin-left: 2em; } div.issue p.title { margin-left: -2em; } ol.enumar { list-style-type: decimal; } ol.enumla { list-style-type: lower-alpha; } ol.enumlr { list-style-type: lower-roman; } ol.enumua { list-style-type: upper-alpha; } ol.enumur { list-style-type: upper-roman; } li p { margin-top: 0.3em; margin-bottom: 0.3em; } sup small { font-style: italic; color: #8F8F8F; } /* from xsl:query.xsl (D) */ div.exampleInner pre { margin-left: 1em; margin-top: 0em; margin-bottom: 0em} pre.small { font-size: small } div.exampleOuter {border: 4px double gray; margin: 0em; padding: 0em} div.exampleInner { background-color: #d5dee3; padding: 4px; margin: 0em } div.exampleInner table { border: 0; border-spacing: 0; } div.exampleInner td { vertical-align: baseline; padding: 0; } div.exampleWrapper { margin: 4px } div.exampleHeader { font-weight: bold; margin: 4px} div.proto { border: 0; border-spacing: 0; } div.issue { border-bottom-color: black; border-bottom-style: solid; border-bottom-width: 1pt; margin-bottom: 20pt; } th.issue-toc-head { border-bottom-color: black; border-bottom-style: solid; border-bottom-width: 1pt; } dd.indent { margin-left: 2em; } p.element-syntax { border: solid thin; background-color: #ffccff } div.proto { border: solid thin; background-color: #ffccff } div.example { border: solid thin; background-color: blue; padding: 1em } span.verb { font: small-caps 100% sans-serif } span.error { font-size: small } /* from xsl-query.xsl (B) */ table.small { font-size: x-small; border-collapse: collapse; } table.small td { border: 1px solid #000000; padding: 5px; } table.small th { border: 1px solid #000000; padding: 5px; text-align: center; } table.medium { font-size: smaller; border-collapse: collapse; } table.medium td { border: 1px solid #000000; padding: 5px; } table.medium th { border: 1px solid #000000; padding: 5px; text-align: center; } table.no-code-break code { white-space: nowrap; } table.longlastcol td { vertical-align: baseline; text-align: left; } a.judgment:visited, a.judgment:link { font-family: sans-serif; color: black; text-decoration: none } a.processing:visited, a.processing:link { color: black; text-decoration: none } a.env:visited, a.env:link { color: black; text-decoration: none } .markup-error { background-color: red; color: yellow; } </style><link rel="stylesheet" type="text/css" href="https://www.w3.org/StyleSheets/TR/2016/W3C-REC.css"><style type="text/css">
          body { margin-top: 50px }
          a.button { background: #DDD; border: 2px outset black; padding: 2px; margin: 2px; font-family: sans-serif; font-size: small;}
          a.button:hover { cursor:pointer; }
          a.button:active { border-style: inset; }
        </style><link rel="stylesheet" href="/css/autodiff.css"></head><body><div style="position:fixed; clear:both; top:0px" id="_autodiff_buttons"><p><a class="button" onclick="view('old')">
              View Old
            </a><a class="button" onclick="view('new')">
              View New
            </a><a class="button" onclick="view('both')">
              View Both
            </a><a class="button" onclick="view('only')">
              View Only
            </a><a class="button" onclick="scroll_to('prev')">
              Previous
            </a><a class="button" onclick="scroll_to('next')">
              Next
            </a><span id="__autodiff__"></span></p></div><div class="head"><p><a href="https://www.w3.org/"><span class="deltaxml-new-img"><img style="border: 2px solid green" src="https://www.w3.org/StyleSheets/TR/2016/logos/W3C" alt="W3C" height="48" width="72"></span></a></p><h1><a id="title"></a><span class="deltaxml-new" style="background:#90EE90">XSLT and XQuery Serialization 4.0 </span></h1><h2><a id="w3c-doctype"></a><span class="deltaxml-new" style="background:#90EE90">W3C Editor's Draft 31&nbsp;October&nbsp;2022</span></h2><dl><dt><span class="deltaxml-new" style="background:#90EE90">This version:</span></dt><dd><a href="https://www.w3.org/TR/2000/REC-xslt-xquery-serialization-40-20000101/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/2000/REC-xslt-xquery-serialization-40-20000101/</span></a></dd><dt><span class="deltaxml-new" style="background:#90EE90">Latest version of XSLT and XQuery Serialization 4.0:</span></dt><dd><a href="https://www.w3.org/TR/xslt-xquery-serialization-40/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/xslt-xquery-serialization-40/</span></a></dd><dt><span class="deltaxml-new" style="background:#90EE90">Previous versions of XSLT and XQuery Serialization 4.0:</span></dt><dd><a href="https://www.w3.org/TR/2017/PR-xslt-xquery-serialization-31-20170117/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/2017/PR-xslt-xquery-serialization-31-20170117/</span></a><br><a href="https://www.w3.org/TR/2016/CR-xslt-xquery-serialization-31-20161213/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/2016/CR-xslt-xquery-serialization-31-20161213/</span></a><br><a href="https://www.w3.org/TR/2015/CR-xslt-xquery-serialization-31-20151217/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/2015/CR-xslt-xquery-serialization-31-20151217/</span></a></dd><dt><span class="deltaxml-new" style="background:#90EE90">Most recent version of XSLT and XQuery Serialization 4:</span></dt><dd><a href="https://www.w3.org/TR/xslt-xquery-serialization-4/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/xslt-xquery-serialization-4/</span></a></dd><dt><span class="deltaxml-new" style="background:#90EE90">Most recent version of XSLT and XQuery Serialization:</span></dt><dd><a href="https://www.w3.org/TR/xslt-xquery-serialization/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/xslt-xquery-serialization/</span></a></dd><dt><span class="deltaxml-new" style="background:#90EE90">Most recent Recommendation of XSLT and XQuery Serialization:</span></dt><dd><a href="https://www.w3.org/TR/2014/REC-xslt-xquery-serialization-30-20140408/"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/TR/2014/REC-xslt-xquery-serialization-30-20140408/</span></a></dd><dt><span class="deltaxml-new" style="background:#90EE90">Editors:</span></dt><dd><span class="deltaxml-new" style="background:#90EE90">Andrew Coleman, IBM Hursley Laboratories </span><a href="mailto:andrew_coleman@uk.ibm.com"><span class="deltaxml-new" style="background:#90EE90">&lt;andrew_coleman@uk.ibm.com&gt;</span></a></dd><dd><span class="deltaxml-new" style="background:#90EE90">C. M. Sperberg-McQueen, Black Mesa Technologies </span><a href="http://www.blackmesatech.com/"><span class="deltaxml-new" style="background:#90EE90">&lt;http://blackmesatech.com/&gt;</span></a></dd></dl><p><span class="deltaxml-new" style="background:#90EE90">Please check the </span><a href="https://www.w3.org/XML/2017/qt-errata/xslt-xquery-serialization-31-errata.html"><strong><span class="deltaxml-new" style="background:#90EE90">errata</span></strong></a><span class="deltaxml-new" style="background:#90EE90"> for any errors or issues reported since publication.</span></p><p><span class="deltaxml-new" style="background:#90EE90">See also </span><a href="https://www.w3.org/2003/03/Translations/byTechnology?technology=xslt-xquery-serialization-31"><strong><span class="deltaxml-new" style="background:#90EE90">translations</span></strong></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This document is also available in these non-normative formats: </span><a href="https://www.w3.org/TR/2000/REC-xslt-xquery-serialization-40-20000101/xslt-xquery-serialization-40.xml"><span class="deltaxml-new" style="background:#90EE90">XML</span></a><span class="deltaxml-new" style="background:#90EE90"> and&nbsp;</span><a href="https://www.w3.org/TR/2000/REC-xslt-xquery-serialization-40-20000101/xslt-xquery-serialization-40-diff.html"><span class="deltaxml-new" style="background:#90EE90">Change markings relative to previous Working Draft</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p class="copyright"><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Copyright"><span class="deltaxml-new" style="background:#90EE90">Copyright</span></a><span class="deltaxml-new" style="background:#90EE90">&nbsp;©&nbsp;2000&nbsp;</span><a href="https://www.w3.org/"><abbr title="World Wide Web Consortium"><span class="deltaxml-new" style="background:#90EE90">W3C</span></abbr></a><sup><span class="deltaxml-new" style="background:#90EE90">®</span></sup><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="https://www.csail.mit.edu/"><abbr title="Massachusetts Institute of Technology"><span class="deltaxml-new" style="background:#90EE90">MIT</span></abbr></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://www.ercim.eu/"><abbr title="European Research Consortium for Informatics and Mathematics"><span class="deltaxml-new" style="background:#90EE90">ERCIM</span></abbr></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://www.keio.ac.jp/"><span class="deltaxml-new" style="background:#90EE90">Keio</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="http://ev.buaa.edu.cn/"><span class="deltaxml-new" style="background:#90EE90">Beihang</span></a><span class="deltaxml-new" style="background:#90EE90">). W3C </span><a href="https://www.w3.org/Consortium/Legal/ipr-notice#Legal_Disclaimer"><span class="deltaxml-new" style="background:#90EE90">liability</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="https://www.w3.org/Consortium/Legal/ipr-notice#W3C_Trademarks"><span class="deltaxml-new" style="background:#90EE90">trademark</span></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="https://www.w3.org/Consortium/Legal/copyright-documents"><span class="deltaxml-new" style="background:#90EE90">document use</span></a><span class="deltaxml-new" style="background:#90EE90"> rules apply.</span></p><hr></div><div><h2><a id="abstract"></a><span class="deltaxml-new" style="background:#90EE90">Abstract</span></h2><p><span class="deltaxml-new" style="background:#90EE90">This document defines serialization of an instance of the data model as defined in </span><a href="#xpath-datamodel-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery and XPath Data Model (XDM) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90"> into a sequence of octets. Serialization is designed to be a component that can be used by other specifications such as </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#xquery-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery 3.1: An XML Query Language]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div><h2><a id="status"></a><span class="deltaxml-new" style="background:#90EE90">Status of this Document</span></h2><p><em><span class="deltaxml-new" style="background:#90EE90">This section describes the status of this document at the time of its publication. Other documents may supersede this document. A list of current W3C publications and the latest revision of this technical report can be found in the </span><a href="https://www.w3.org/TR/"><span class="deltaxml-new" style="background:#90EE90">W3C technical reports index</span></a><span class="deltaxml-new" style="background:#90EE90"> at https://www.w3.org/TR/.</span></em></p><p><span class="deltaxml-new" style="background:#90EE90">This document is governed by the </span><a id="w3c_process_revision" href="https://www.w3.org/2017/Process-20170301/"><span class="deltaxml-new" style="background:#90EE90">1 March 2017 W3C Process Document</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">This is a </span><a href="https://www.w3.org/2015/Process-20150901/#rec-publication"><span class="deltaxml-new" style="background:#90EE90">Recommendation</span></a><span class="deltaxml-new" style="background:#90EE90"> of the W3C. It was jointly developed by the W3C </span><a href="https://www.w3.org/Style/XSL/"><span class="deltaxml-new" style="background:#90EE90">XSLT Working Group</span></a><span class="deltaxml-new" style="background:#90EE90"> and the W3C </span><a href="https://www.w3.org/XML/Query/"><span class="deltaxml-new" style="background:#90EE90">XML Query Working Group</span></a><span class="deltaxml-new" style="background:#90EE90">, each of which is part of the </span><a href="https://www.w3.org/XML/Activity"><span class="deltaxml-new" style="background:#90EE90">XML Activity</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This Editor's Draft specifies XSLT and XQuery Serialization version 3.1, a fully compatible extension of </span><a href="https://www.w3.org/TR/xslt-xquery-serialization-30/"><span class="deltaxml-new" style="background:#90EE90">Serialization version 3.0</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This specification is designed to be referenced normatively from other specifications defining a host language for it; it is not intended to be implemented outside a host language. The implementability of this specification has been tested in the context of its normative inclusion in host languages defined by the </span><a href="https://www.w3.org/TR/xquery-31/"><span class="deltaxml-new" style="background:#90EE90">XQuery 3.1</span></a><span class="deltaxml-new" style="background:#90EE90"> and XSLT 3.0 (expected in 2017) specifications; see the </span><a href="https://dev.w3.org/2011/QT3-test-suite/ReportingResults31/report.html"><span class="deltaxml-new" style="background:#90EE90">XQuery 3.1 implementation report</span></a><span class="deltaxml-new" style="background:#90EE90"> (and, in the future, the WGs expect that there will also be an XSLT 3.0 implementation report) for details.</span></p><p><span class="deltaxml-new" style="background:#90EE90">No substantive changes have been made to this specification since its publication as a Proposed Recommendation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Please report errors in this document using W3C's </span><a href="https://www.w3.org/Bugs/Public/"><span class="deltaxml-new" style="background:#90EE90">public Bugzilla system</span></a><span class="deltaxml-new" style="background:#90EE90"> (instructions can be found at </span><a href="https://www.w3.org/XML/2005/04/qt-bugzilla"><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/XML/2005/04/qt-bugzilla</span></a><span class="deltaxml-new" style="background:#90EE90">). If access to that system is not feasible, you may send your comments to the W3C XSLT/XPath/XQuery public comments mailing list, </span><a href="mailto:public-qt-comments@w3.org"><span class="deltaxml-new" style="background:#90EE90">public-qt-comments@w3.org</span></a><span class="deltaxml-new" style="background:#90EE90">. It will be very helpful if you include the string “[SER31]” in the subject line of your report, whether made in Bugzilla or in email. Please use multiple Bugzilla entries (or, if necessary, multiple email messages) if you have more than one comment to make. Archives of the comments and responses are available at </span><a href="https://lists.w3.org/Archives/Public/public-qt-comments/"><span class="deltaxml-new" style="background:#90EE90">https://lists.w3.org/Archives/Public/public-qt-comments/</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">This document has been reviewed by W3C Members, by software developers, and by other W3C groups and interested parties, and is endorsed by the Director as a W3C Recommendation. It is a stable document and may be used as reference material or cited from another document. W3C's role in making the Recommendation is to draw attention to the specification and to promote its widespread deployment. This enhances the functionality and interoperability of the Web.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This document was produced by groups operating under the </span><a href="https://www.w3.org/Consortium/Patent-Policy-20040205/"><span class="deltaxml-new" style="background:#90EE90">5 February 2004 W3C Patent Policy</span></a><span class="deltaxml-new" style="background:#90EE90">. W3C maintains a </span><a href="https://www.w3.org/2004/01/pp-impl/18797/status#disclosures" rel="disclosure"><span class="deltaxml-new" style="background:#90EE90">public list of any patent disclosures (W3C XML Query Working Group)</span></a><span class="deltaxml-new" style="background:#90EE90"> and a </span><a href="https://www.w3.org/2004/01/pp-impl/19552/status#disclosures" rel="disclosure"><span class="deltaxml-new" style="background:#90EE90">public list of any patent disclosures (W3C XSLT Working Group)</span></a><span class="deltaxml-new" style="background:#90EE90"> made in connection with the deliverables of each group; these pages also include instructions for disclosing a patent. An individual who has actual knowledge of a patent which the individual believes contains </span><a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#def-essential"><span class="deltaxml-new" style="background:#90EE90">Essential Claim(s)</span></a><span class="deltaxml-new" style="background:#90EE90"> must disclose the information in accordance with </span><a href="https://www.w3.org/Consortium/Patent-Policy-20040205/#sec-Disclosure"><span class="deltaxml-new" style="background:#90EE90">section 6 of the W3C Patent Policy</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p></div><nav id="toc"><h2><a id="contents"></a><span class="deltaxml-new" style="background:#90EE90">Table of Contents</span></h2><ol class="toc"><li><a href="#intro"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Introduction</span></span></a><ol class="toc"><li><a href="#terminology"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">1.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Terminology</span></span></a></li><li><a href="#namespaces"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">1.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Namespaces</span></span></a></li></ol></li><li><a href="#serdm"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Sequence Normalization</span></span></a><ol class="toc"></ol></li><li><a href="#serparam"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Serialization Parameters</span></span></a><ol class="toc"><li><a href="#serparams-in-xdm-instance"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">3.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Setting Serialization Parameters by Means of a Data Model Instance</span></span></a></li></ol></li><li><a href="#serphases"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Phases of Serialization</span></span></a><ol class="toc"></ol></li><li><a href="#xml-output"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method</span></span></a><ol class="toc"><li><a href="#XML_PARAMS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">The Influence of Serialization Parameters upon the XML Output Method</span></span></a><ol class="toc"><li><a href="#XML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the version Parameter</span></span></a></li><li><a href="#XML_HTML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the html-version Parameter</span></span></a></li><li><a href="#XML_ENCODING"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the encoding Parameter</span></span></a></li><li><a href="#xml-indent"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the indent and suppress-indentation Parameters</span></span></a></li><li><a href="#XML_CDATA-SECTION-ELEMENTS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.5 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the cdata-section-elements Parameter</span></span></a></li><li><a href="#XML_OMIT-XML-DECLARATION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the omit-xml-declaration and standalone Parameters</span></span></a></li><li><a href="#XML_DOCTYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.7 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the doctype-system and doctype-public Parameters</span></span></a></li><li><a href="#xml-undeclare-NS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.8 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the undeclare-prefixes Parameter</span></span></a></li><li><a href="#XML_NORMALIZATION-FORM"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.9 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the normalization-form Parameter</span></span></a></li><li><a href="#XML_MEDIA-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.10 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the media-type Parameter</span></span></a></li><li><a href="#XML_USE-CHARACTER-MAPS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.11 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the use-character-maps Parameter</span></span></a></li><li><a href="#XML_BYTE-ORDER-MARK"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.12 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the byte-order-mark Parameter</span></span></a></li><li><a href="#XML_ESCAPE-URI-ATTRIBUTES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.13 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the escape-uri-attributes Parameter</span></span></a></li><li><a href="#XML_INCLUDE-CONTENT-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.14 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the include-content-type Parameter</span></span></a></li><li><a href="#XML_ITEM-SEPARATOR"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.15 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the item-separator Parameter</span></span></a></li><li><a href="#XML_ALLOW-DUPLICATE-NAMES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.16 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the allow-duplicate-names Parameter</span></span></a></li><li><a href="#XML_JSON-NODE-OUTPUT-METHOD"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">5.1.17 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XML Output Method: the json-node-output-method Parameter</span></span></a></li></ol></li></ol></li><li><a href="#xhtml-output"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method</span></span></a><ol class="toc"><li><a href="#XHTML_PARAMS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">The Influence of Serialization Parameters upon the XHTML Output Method</span></span></a><ol class="toc"><li><a href="#XHTML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the version Parameter</span></span></a></li><li><a href="#XHTML_HTML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the html-version Parameter</span></span></a></li><li><a href="#XHTML_ENCODING"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the encoding Parameter</span></span></a></li><li><a href="#XHTML_INDENT"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the indent and suppress-indentation Parameters</span></span></a></li><li><a href="#XHTML_CDATA-SECTION-ELEMENTS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.5 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the cdata-section-elements Parameter</span></span></a></li><li><a href="#XHTML_OMIT-XML-DECLARATION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the omit-xml-declaration and standalone Parameters</span></span></a></li><li><a href="#XHTML_DOCTYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.7 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the doctype-system and doctype-public Parameters</span></span></a></li><li><a href="#XHTML_UNDECLARE-PREFIXES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.8 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the undeclare-prefixes Parameter</span></span></a></li><li><a href="#XHTML_NORMALIZATION-FORM"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.9 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the normalization-form Parameter</span></span></a></li><li><a href="#XHTML_MEDIA-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.10 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the media-type Parameter</span></span></a></li><li><a href="#XHTML_USE-CHARACTER-MAPS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.11 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the use-character-maps Parameter</span></span></a></li><li><a href="#XHTML_BYTE-ORDER-MARK"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.12 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the byte-order-mark Parameter</span></span></a></li><li><a href="#XHTML_ESCAPE-URI-ATTRIBUTES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.13 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the escape-uri-attributes Parameter</span></span></a></li><li><a href="#XHTML_INCLUDE-CONTENT-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.14 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the include-content-type Parameter</span></span></a></li><li><a href="#XHTML_ITEM-SEPARATOR"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.15 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the item-separator Parameter</span></span></a></li><li><a href="#XHTML_ALLOW-DUPLICATE-NAMES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.16 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the allow-duplicate-names Parameter</span></span></a></li><li><a href="#XHTML_JSON-NODE-OUTPUT-METHOD"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">6.1.17 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">XHTML Output Method: the json-node-output-method Parameter</span></span></a></li></ol></li></ol></li><li><a href="#html-output"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method</span></span></a><ol class="toc"><li><a href="#HTML_MARKUP"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Markup for Elements</span></span></a></li><li><a href="#HTML_ATTRIBS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Writing Attributes</span></span></a></li><li><a href="#HTML_CHARDATA"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Writing Character Data</span></span></a></li><li><a href="#HTML_PARAMS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">The Influence of Serialization Parameters upon the HTML Output Method</span></span></a><ol class="toc"><li><a href="#HTML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the version and html-version Parameters</span></span></a></li><li><a href="#HTML_ENCODING"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the encoding Parameter</span></span></a></li><li><a href="#HTML_INDENT"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the indent and suppress-indentation Parameters</span></span></a></li><li><a href="#HTML_CDATA-SECTION-ELEMENTS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the cdata-section-elements Parameter</span></span></a></li><li><a href="#HTML_OMIT-XML-DECLARATION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.5 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the omit-xml-declaration and standalone Parameters</span></span></a></li><li><a href="#HTML_DOCTYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the doctype-system and doctype-public Parameters</span></span></a></li><li><a href="#HTML_UNDECLARE-PREFIXES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.7 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the undeclare-prefixes Parameter</span></span></a></li><li><a href="#HTML_NORMALIZATION-FORM"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.8 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the normalization-form Parameter</span></span></a></li><li><a href="#HTML_MEDIA-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.9 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the media-type Parameter</span></span></a></li><li><a href="#HTML_USE-CHARACTER-MAPS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.10 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the use-character-maps Parameter</span></span></a></li><li><a href="#HTML_BYTE-ORDER-MARK"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.11 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the byte-order-mark Parameter</span></span></a></li><li><a href="#HTML_ESCAPE-URI-ATTRIBUTES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.12 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the escape-uri-attributes Parameter</span></span></a></li><li><a href="#HTML_INCLUDE-CONTENT-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.13 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the include-content-type Parameter</span></span></a></li><li><a href="#HTML_ITEM-SEPARATOR"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.14 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the item-separator Parameter</span></span></a></li><li><a href="#HTML_ALLOW-DUPLICATE-NAMES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.15 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the allow-duplicate-names Parameter</span></span></a></li><li><a href="#HTML_JSON-NODE-OUTPUT-METHOD"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">7.4.16 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">HTML Output Method: the json-node-output-method Parameter</span></span></a></li></ol></li></ol></li><li><a href="#text-output"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method</span></span></a><ol class="toc"><li><a href="#TEXT_PARAMS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">The Influence of Serialization Parameters upon the Text Output Method</span></span></a><ol class="toc"><li><a href="#TEXT_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the version Parameter</span></span></a></li><li><a href="#TEXT_HTML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the html-version Parameter</span></span></a></li><li><a href="#TEXT_ENCODING"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the encoding Parameter</span></span></a></li><li><a href="#TEXT_INDENT"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the indent and suppress-indentation Parameters</span></span></a></li><li><a href="#TEXT_CDATA-SECTION-ELEMENTS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.5 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the cdata-section-elements Parameter</span></span></a></li><li><a href="#TEXT_OMIT-XML-DECLARATION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the omit-xml-declaration and standalone Parameters</span></span></a></li><li><a href="#TEXT_DOCTYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.7 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the doctype-system and doctype-public Parameters</span></span></a></li><li><a href="#TEXT_UNDECLARE-PREFIXES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.8 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the undeclare-prefixes Parameter</span></span></a></li><li><a href="#TEXT_NORMALIZATION-FORM"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.9 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the normalization-form Parameter</span></span></a></li><li><a href="#TEXT_MEDIA-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.10 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the media-type Parameter</span></span></a></li><li><a href="#TEXT_USE-CHARACTER-MAPS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.11 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the use-character-maps Parameter</span></span></a></li><li><a href="#TEXT_BYTE-ORDER-MARK"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.12 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the byte-order-mark Parameter</span></span></a></li><li><a href="#TEXT_ESCAPE-URI-ATTRIBUTES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.13 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the escape-uri-attributes Parameter</span></span></a></li><li><a href="#TEXT_INCLUDE-CONTENT-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.14 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the include-content-type Parameter</span></span></a></li><li><a href="#TEXT_ITEM-SEPARATOR"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.15 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the item-separator Parameter</span></span></a></li><li><a href="#TEXT_ALLOW-DUPLICATE-NAMES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.16 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the allow-duplicate-names Parameter</span></span></a></li><li><a href="#TEXT_JSON-NODE-OUTPUT-METHOD"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">8.1.17 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Text Output Method: the json-node-output-method Parameter</span></span></a></li></ol></li></ol></li><li><a href="#json-output"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method</span></span></a><ol class="toc"><li><a href="#JSON_PARAMS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">The Influence of Serialization Parameters upon the JSON Output Method</span></span></a><ol class="toc"><li><a href="#JSON_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the version Parameter</span></span></a></li><li><a href="#JSON_HTML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the html-version Parameter</span></span></a></li><li><a href="#JSON_ENCODING"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the encoding Parameter</span></span></a></li><li><a href="#JSON_INDENT"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the indent and suppress-indentation Parameters</span></span></a></li><li><a href="#JSON_CDATA-SECTION-ELEMENTS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.5 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the cdata-section-elements Parameter</span></span></a></li><li><a href="#JSON_OMIT-XML-DECLARATION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the omit-xml-declaration and standalone Parameters</span></span></a></li><li><a href="#JSON_DOCTYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.7 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the doctype-system and doctype-public Parameters</span></span></a></li><li><a href="#JSON_UNDECLARE-PREFIXES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.8 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the undeclare-prefixes Parameter</span></span></a></li><li><a href="#JSON_NORMALIZATION-FORM"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.9 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the normalization-form Parameter</span></span></a></li><li><a href="#JSON_MEDIA-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.10 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the media-type Parameter</span></span></a></li><li><a href="#JSON_USE-CHARACTER-MAPS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.11 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the use-character-maps Parameter</span></span></a></li><li><a href="#JSON_BYTE-ORDER-MARK"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.12 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the byte-order-mark Parameter</span></span></a></li><li><a href="#JSON_ESCAPE-URI-ATTRIBUTES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.13 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the escape-uri-attributes Parameter</span></span></a></li><li><a href="#JSON_INCLUDE-CONTENT-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.14 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the include-content-type Parameter</span></span></a></li><li><a href="#JSON_ITEM-SEPARATOR"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.15 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the item-separator Parameter</span></span></a></li><li><a href="#JSON_ALLOW-DUPLICATE-NAMES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.16 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the allow-duplicate-names Parameter</span></span></a></li><li><a href="#JSON_JSON-NODE-OUTPUT-METHOD"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">9.1.17 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the json-node-output-method Parameter</span></span></a></li></ol></li></ol></li><li><a href="#adaptive-output"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method</span></span></a><ol class="toc"><li><a href="#ADAPTIVE_PARAMS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">The Influence of Serialization Parameters upon the Adaptive Output Method</span></span></a><ol class="toc"><li><a href="#ADAPTIVE_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the version Parameter</span></span></a></li><li><a href="#ADAPTIVE_HTML_VERSION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the html-version Parameter</span></span></a></li><li><a href="#ADAPTIVE_ENCODING"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the encoding Parameter</span></span></a></li><li><a href="#ADAPTIVE_INDENT"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the indent and suppress-indentation Parameters</span></span></a></li><li><a href="#ADAPTIVE_CDATA-SECTION-ELEMENTS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.5 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the cdata-section-elements Parameter</span></span></a></li><li><a href="#ADAPTIVE_OMIT-XML-DECLARATION"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.6 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the omit-xml-declaration and standalone Parameters</span></span></a></li><li><a href="#ADAPTIVE_DOCTYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.7 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the doctype-system and doctype-public Parameters</span></span></a></li><li><a href="#ADAPTIVE_UNDECLARE-PREFIXES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.8 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the undeclare-prefixes Parameter</span></span></a></li><li><a href="#ADAPTIVE_NORMALIZATION-FORM"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.9 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the normalization-form Parameter</span></span></a></li><li><a href="#ADAPTIVE_MEDIA-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.10 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the media-type Parameter</span></span></a></li><li><a href="#ADAPTIVE_USE-CHARACTER-MAPS"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.11 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the use-character-maps Parameter</span></span></a></li><li><a href="#ADAPTIVE_BYTE-ORDER-MARK"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.12 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the byte-order-mark Parameter</span></span></a></li><li><a href="#ADAPTIVE_ESCAPE-URI-ATTRIBUTES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.13 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the escape-uri-attributes Parameter</span></span></a></li><li><a href="#ADAPTIVE_INCLUDE-CONTENT-TYPE"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.14 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the include-content-type Parameter</span></span></a></li><li><a href="#ADAPTIVE_ITEM-SEPARATOR"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.15 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the item-separator Parameter</span></span></a></li><li><a href="#ADAPTIVE_ALLOW-DUPLICATE-NAMES"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.16 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the allow-duplicate-names Parameter</span></span></a></li><li><a href="#ADAPTIVE_JSON-NODE-OUTPUT-METHOD"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">10.1.17 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Adaptive Output Method: the json-node-output-method Parameter</span></span></a></li></ol></li></ol></li><li><a href="#character-maps"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">11 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Character Maps</span></span></a><ol class="toc"></ol></li><li><a href="#conformance"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">12 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Conformance</span></span></a><ol class="toc"></ol></li><li><a href="#references"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">A </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">References</span></span></a><ol class="toc"><li><a href="#normative-references"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">A.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Normative References</span></span></a></li><li><a href="#informative-references"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">A.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Informative References</span></span></a></li></ol></li><li><a href="#serparams-schema"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">B </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Schema for Serialization Parameters</span></span></a><ol class="toc"></ol></li><li><a href="#id-errors"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">C </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Summary of Error Conditions</span></span></a><ol class="toc"></ol></li><li><a href="#list-of-uri-attributes"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">D </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">List of URI Attributes</span></span></a><ol class="toc"></ol></li><li><a href="#implementation-defined-or-dependent-features"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">E </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Checklist of Implementation-Defined and Implementation-Dependent Features</span></span></a><span class="deltaxml-new" style="background:#90EE90"> (Non-Normative) </span><ol class="toc"><li><a href="#implementation-defined-features"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">E.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Checklist of Implementation-Defined Features</span></span></a></li><li><a href="#implementation-dependent-features"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">E.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Checklist of Implementation-Dependent Features</span></span></a></li></ol></li><li><a href="#revision-log"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">F </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Change Log</span></span></a><span class="deltaxml-new" style="background:#90EE90"> (Non-Normative) </span><ol class="toc"><li><a href="#id-changes-pr"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">F.1 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Changes introduced in the Proposed Recommendation</span></span></a></li><li><a href="#id-changes-cr2"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">F.2 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Changes introduced in the second Candidate Recommendation</span></span></a></li><li><a href="#id-changes-cr1"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">F.3 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Changes introduced in the first Candidate Recommendation</span></span></a></li><li><a href="#changes-for-previous-drafts"><span class="secno"><span class="deltaxml-new" style="background:#90EE90">F.4 </span></span><span class="content"><span class="deltaxml-new" style="background:#90EE90">Changes applied to previous Public Working Drafts</span></span></a></li></ol></li></ol></nav><hr><div class="body"><h1><span class="deltaxml-old" style="background:#FF5555">404</span></h1><p><strong><span class="deltaxml-old" style="background:#FF5555">File not found</span></strong></p><p><span class="deltaxml-old" style="background:#FF5555"> The site configured at this address does not contain the requested file. </span></p><p><span class="deltaxml-old" style="background:#FF5555"> If this is your site, make sure that the filename case matches the URL.</span><span class="deltaxml-old" style="background:#FF5555"> For root URLs (like </span><code><span class="deltaxml-old" style="background:#FF5555">http://example.com/</span></code><span class="deltaxml-old" style="background:#FF5555">) you must provide an </span><code><span class="deltaxml-old" style="background:#FF5555">index.html</span></code><span class="deltaxml-old" style="background:#FF5555"> file. </span></p><p><a href="https://help.github.com/pages/"><span class="deltaxml-old" style="background:#FF5555">Read the full documentation</span></a><span class="deltaxml-old" style="background:#FF5555"> for more information about using </span><strong><span class="deltaxml-old" style="background:#FF5555">GitHub Pages</span></strong><span class="deltaxml-old" style="background:#FF5555">. </span></p><div id="suggestions"><a href="https://githubstatus.com"><span class="deltaxml-old" style="background:#FF5555">GitHub Status</span></a><span class="deltaxml-old" style="background:#FF5555"> — </span><a href="https://twitter.com/githubstatus"><span class="deltaxml-old" style="background:#FF5555">@githubstatus</span></a></div><a href="/" class="logo logo-img-1x"><span class="deltaxml-old-img"><img style="border: 2px solid red" width="32" height="32" title="" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpFMTZCRDY3REIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpFMTZCRDY3RUIzRjAxMUUyQUQzREIxQzRENUFFNUM5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxNkJENjdCQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxNkJENjdDQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+SM9MCAAAA+5JREFUeNrEV11Ik1EY3s4+ddOp29Q5b0opCgKFsoKoi5Kg6CIhuwi6zLJLoYLopq4qsKKgi4i6CYIoU/q5iDAKs6syoS76IRWtyJ+p7cdt7sf1PGOD+e0c3dygAx/67ZzzPM95/877GYdHRg3ZjMXFxepQKNS6sLCwJxqNNuFpiMfjVs4ZjUa/pmmjeD6VlJS8NpvNT4QQ7mxwjSsJiEQim/1+/9lgMHgIr5ohuxG1WCw9Vqv1clFR0dCqBODElV6v90ogEDjGdYbVjXhpaendioqK07CIR7ZAqE49PT09BPL2PMgTByQGsYiZlQD4uMXtdr+JxWINhgINYhGT2MsKgMrm2dnZXgRXhaHAg5jEJodUAHxux4LudHJE9RdEdA+i3Juz7bGHe4mhE9FNrgwBCLirMFV9Okh5eflFh8PR5nK5nDabrR2BNJlKO0T35+Li4n4+/J+/JQCxhmu5h3uJoXNHPbmWZAHMshWB8l5/ipqammaAf0zPDDx1ONV3vurdidqwAQL+pEc8sLcAe1CCvQ3YHxIW8Pl85xSWNC1hADDIv0rIE/o4J0k3kww4xSlwIhcq3EFFOm7KN/hUGOQkt0CFa5WpNJlMvxBEz/IVQAxg/ZRZl9wiHA63yDYieM7DnLP5CiAGsC7I5sgtYKJGWe2A8seFqgFJrJjEPY1Cn3pJ8/9W1e5VWsFDTEmFrBcoDhZJEQkXuhICMyKpjhahqN21hRYATKfUOlDmkygrR4o4C0VOLGJKrOITKB4jijzdXygBKixyC5TDQdnk/Pz8qRw6oOWGlsTKGOQW6OH6FBWsyePxdOXLTgxiyebILZCjz+GLgMIKnXNzc49YMlcRdHXcSwxFVgTInQhC9G33UhNoJLuqq6t345p9y3eUy8OTk5PjAHuI9uo4b07FBaOhsu0A4Unc+T1TU1Nj3KsSSE5yJ65jqF2DDd8QqWYmAZrIM2VlZTdnZmb6AbpdV9V6ec9znf5Q7HjYumdRE0JOp3MjitO4SFa+cZz8Umqe3TCbSLvdfkR/kWDdNQl5InuTcysOcpFT35ZrbBxx4p3JAHlZVVW1D/634VRt+FvLBgK/v5LV9WS+10xMTEwtRw7XvqOL+e2Q8V3AYIOIAXQ26/heWVnZCVfcyKHg2CBgTpmPmjYM8l24GyaUHyaIh7XwfR9ErE8qHoDfn2LTNAVC0HX6MFcBIP8Bi+6F6cdW/DICkANRfx99fEYFQ7Nph5i/uQiA214gno7K+guhaiKg9gC62+M8eR7XsBsYJ4ilam60Fb7r7uAj8wFyuwM1oIOWgfmDy6RXEEQzJMPe23DXrVS7rtyD3Df8z/FPgAEAzWU5Ku59ZAUAAAAASUVORK5CYII="></span></a><a href="/" class="logo logo-img-2x"><span class="deltaxml-old-img"><img style="border: 2px solid red" width="32" height="32" title="" alt="" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAyRpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMy1jMDExIDY2LjE0NTY2MSwgMjAxMi8wMi8wNi0xNDo1NjoyNyAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNjcmlwdGlvbiByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNiAoTWFjaW50b3NoKSIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDpEQUM1QkUxRUI0MUMxMUUyQUQzREIxQzRENUFFNUM5NiIgeG1wTU06RG9jdW1lbnRJRD0ieG1wLmRpZDpEQUM1QkUxRkI0MUMxMUUyQUQzREIxQzRENUFFNUM5NiI+IDx4bXBNTTpEZXJpdmVkRnJvbSBzdFJlZjppbnN0YW5jZUlEPSJ4bXAuaWlkOkUxNkJENjdGQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2IiBzdFJlZjpkb2N1bWVudElEPSJ4bXAuZGlkOkUxNkJENjgwQjNGMDExRTJBRDNEQjFDNEQ1QUU1Qzk2Ii8+IDwvcmRmOkRlc2NyaXB0aW9uPiA8L3JkZjpSREY+IDwveDp4bXBtZXRhPiA8P3hwYWNrZXQgZW5kPSJyIj8+hfPRaQAAB6lJREFUeNrsW2mME2UYbodtt+2222u35QheoCCYGBQligIJgkZJNPzgigoaTEj8AdFEMfADfyABkgWiiWcieK4S+QOiHAYUj2hMNKgYlEujpNttu9vttbvdw+chU1K6M535pt3ubHCSyezR+b73eb73+t7vrfXsufOW4bz6+vom9/b23ovnNNw34b5xYGAgODg46Mbt4mesVmsWd1qSpHhdXd2fuP/Afcput5/A88xwymcdBgLqenp6FuRyuWV4zu/v759QyWBjxoz5t76+/gun09mK5xFyakoCAPSaTCazNpvNPoYVbh6O1YKGRF0u13sNDQ27QMzfpiAAKj0lnU6/gBVfAZW2WWpwwVzy0IgP3G73FpjI6REhAGA9qVRqA1b9mVoBVyIC2tDi8Xg24+dUzQiAbS/s7Ox8G2o/3mKCC+Zw0efzPQEfcVjYrARX3dbV1bUtHo8fMgt42f+Mp0yUTVQbdWsAHVsikdiHkHaPxcQXQufXgUBgMRxme9U0AAxfH4vFvjM7eF6UkbJS5qoQwEQGA57Ac5JllFyUVZZ5ckUEgMVxsK2jlSYzI+QXJsiyjzNEAJyJAzb/KQa41jJKL8pODMQiTEAymXw5n8/P0IjD3bh7Rgog59aanxiIRTVvV/oj0tnHca/WMrVwODwB3raTGxzkBg/gnZVapFV62Wy2n5AO70HM/5wbJ0QnXyQSaVPDIuNZzY0V3ntHMwxiwHA0Gj2Np7ecIBDgaDAYXKCQJM1DhrgJ3nhulcPbl8j4NmHe46X/g60fwbz3aewjkqFQaAqebWU1AOqyQwt8Id6qEHMc97zu7u7FGGsn7HAiVuosVw7P35C1nccdgSCxop1dHeZswmfHMnxBo6ZTk+jN8dl/vF7vWofDsa+MLN9oEUBMxOb3+1eoEsBVw6Zmua49r8YmhAKDiEPcMwBsxMiqQ+ixzPFxZyqRpXARG/YOr1ObFJ0gUskXBbamcR1OKmMUvDxHRAu8/LmY3jFLMUpFqz9HxG65smYJdyKyECOxDiEAe/p1gjF2oonivZAsxVgl2daa4EQWCW6J55qFAFFZiJWYLxNQy2qOSUzGRsyXCUDIeliwAHEO4WSlWQBRFoZakXcKmCXmyXAKs0Ve9vl8q42WoIYpJU4hV3hKcNs8m9gl7p/xQ73eF5kB4j5mNrWmTJRNwAzqiV1CxjVTZCIkEq+Z1bZFZSN2CenmVAFVy4Plz8xKAGWjjAKFk6lCBMDR/MJjLLMSQNm43xAiQKTaA+9/wewhDjL+JVI1kkTSSOTcKbMTwPqESAot6dn6Fr1gHwVJju6IRuyiByPuUUBAg5DGkAgBmxlvdgIEK9gDkohdY/BJo4CAG0R8miRSsGABkgVQs4KXu098IgUXSSRsFAoKZiVAVDY2WUiiPTjYRi41KwGisrGsLtlsth8Fiwnz2fBkQvWfRtlE3iF2yW63/yCacXZ1dW02GwGyTFaRd4idJnCKHRaCxYRHoG5LTKT6SyiToP1fJHbmAYPYRR0UnZQtMnA6s0zg+GZBlt0Gdo7EPHgpE3Q6nZ8YyLhc8Xj8MJh/aKTAY+5FPAKHLE7RdwuYJZmNwzyCMkBCYyKROJBMJl9B/PXXCjjmCmDOVzH3fiPpObEWGqoKe4EBl8v1hlqsdLvd23mkxHM9pc9kMpmno9HoeTii7ewbHEZPPx1ztLS1tV3AnGuMjiNjvbQFuHw6zDo5By7dTPAQNBgMLrRarTkSls1mnwT7uwp9virx9QzbW/HuV/j5d/b+6jniKlllP8lkeONJDk+dq9GsQTnC4fB1heO0K47Hwe7WdDr9nAKgXwOBwHI+C45Htj1d6sd429TUNEcmUdc+PRaLHcvn87dXW4ugzdsaGxufL94NFv9zi1J7GVbhlvb2dnaJ3SVrxfc+n2+NTsZ7/H7/Mr3g5XdSIHyJSH1PZ+7fToyl2+ErqilgZ4NaLYB9goVGaHjR93Hv1ZrU4XDsFT20kH3PObzbWk0CgG1jacVIUnAQb9F+VexyLMzkpcLv0IJV7AHQIOCAUYHx7v5qgScmYHtTqSAyZLEJTK22Bie4iq3xsqpm4SAf9Hq9a2DnJ4uLK3SEULcdRvp3i3zHySqpficxEdsQc1NrlYXXvR+O7qASSezXB+h1SuUomgg9LL8BUoV4749EIolKh+EiqWmqVEZlDgHks2pxHw7xTqUQw9J5NcAXOK10AGIoZ6Zli6JY6Z1Q461KoZ4NiKLHarW+KDsxlDUPHZ5zPQZqUVDPJsTqb5n9malbpAh8C2XXDLl62+WZIDFRUlNVOiwencnNU3aQEkL+cDMSoLvZo2fQB7AJssNAuFuvorlDVVkkg2I87+jo2K2QAVphDrfyViK5VqtO34OkaxXCp+7drdDBCAdubm6eidX+2WwqT5komwh4YQLk+H4aE93h8Xg2gvHekQZOGSgLZTLyDTLJ4Lx9/KZWKBSainT4Iy3FqQBfnUZR42PKQFksBr9QKVXCPusD3OiA/RkQ5kP8qV/Jl1WywAp/6+dcmPM2zL1UrUahe4JqfnWWKXIul3uUbfP8njAFLW1OFr3gdFtZ72cNH+PtQT7/brW+NXqJAHh0y9V8/U/A1U7AfwIMAD7mS3pCbuWJAAAAAElFTkSuQmCC"></span></a><div class="div1"><h2><a id="intro"></a><span class="deltaxml-new" style="background:#90EE90">1 Introduction</span></h2><p><span class="deltaxml-new" style="background:#90EE90">This document defines serialization of the W3C XQuery and XPath Data Model </span><span><span class="deltaxml-new" style="background:#90EE90">3.1</span></span><span class="deltaxml-new" style="background:#90EE90"> (XDM), which is the data model of at least </span><a href="#xpath-31"><span class="deltaxml-new" style="background:#90EE90">[XML Path Language (XPath) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a><span class="deltaxml-new" style="background:#90EE90">, and </span><a href="#xquery-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery 3.1: An XML Query Language]</span></a><span class="deltaxml-new" style="background:#90EE90">, and any other specifications that reference it.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In this document, examples and material labeled as "Note" are provided for explanatory purposes and are not normative. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Serialization is the process of converting an instance of the </span><a href="#xpath-datamodel-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery and XPath Data Model (XDM) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90"> into a sequence of octets. Serialization is well-defined for most data model instances.</span></p><div class="div2"><h3><a id="terminology"></a><span class="deltaxml-new" style="background:#90EE90">1.1 Terminology</span></h3><p><span class="deltaxml-new" style="background:#90EE90">In this specification, where they appear in upper case, the words "MUST", "MUST NOT", "SHOULD", "SHOULD NOT", "MAY", "REQUIRED", and "RECOMMENDED" are to be interpreted as described in </span><a href="#RFC2119"><span class="deltaxml-new" style="background:#90EE90">[RFC2119]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="serializer" title="serializer"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: As is indicated in </span><a href="#conformance"><b><span class="deltaxml-new" style="background:#90EE90">12 Conformance</span></b></a><span class="deltaxml-new" style="background:#90EE90">, conformance criteria for serialization are determined by other specifications that refer to this specification. A </span><b><span class="deltaxml-new" style="background:#90EE90">serializer</span></b><span class="deltaxml-new" style="background:#90EE90"> is software that implements some or all of the requirements of this specification in accordance with such conformance criteria.] A serializer is not </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to directly provide a programming interface that permits a user to set serialization parameters or to provide an input sequence for serialization. In this document, material labeled as "Note" and examples are provided for explanatory purposes and are not normative. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Certain aspects of serialization are described in this specification as </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="impdef" title="implementation-defined"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: </span><b><span class="deltaxml-new" style="background:#90EE90">Implementation-defined</span></b><span class="deltaxml-new" style="background:#90EE90"> indicates an aspect that </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> differ between </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializers</span></a><span class="deltaxml-new" style="background:#90EE90">, but whose actual behavior </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be specified either by another specification that sets conformance criteria for serialization (see </span><a href="#conformance"><b><span class="deltaxml-new" style="background:#90EE90">12 Conformance</span></b></a><span class="deltaxml-new" style="background:#90EE90">) or in documentation that accompanies the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">.]</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="impdep" title="implementation-dependent"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: </span><b><span class="deltaxml-new" style="background:#90EE90">Implementation-dependent</span></b><span class="deltaxml-new" style="background:#90EE90"> indicates an aspect that </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> differ between </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializers</span></a><span class="deltaxml-new" style="background:#90EE90">, and whose actual behavior is not </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to be specified either by another specification that sets conformance criteria for serialization (see </span><a href="#conformance"><b><span class="deltaxml-new" style="background:#90EE90">12 Conformance</span></b></a><span class="deltaxml-new" style="background:#90EE90">) or in documentation that accompanies the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">.]</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="serial-err" title="serialization error"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: In some instances, the sequence that is input to serialization cannot be successfully converted into a sequence of octets given the set of serialization parameter (</span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">) values specified. A </span><b><span class="deltaxml-new" style="background:#90EE90">serialization error</span></b><span class="deltaxml-new" style="background:#90EE90"> is said to occur in such an instance.] In some cases, a </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to signal such an error. What it means to signal a serialization error is determined by the relevant conformance criteria (</span><a href="#conformance"><b><span class="deltaxml-new" style="background:#90EE90">12 Conformance</span></b></a><span class="deltaxml-new" style="background:#90EE90">) to which the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> conforms. In other cases, there is an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> choice between signaling a serialization error and performing a recovery action. Such a recovery action will allow a </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> to produce a sequence of octets that might not fully reflect the usual requirements of the parameter settings that are in effect. </span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="caseless-compare" title="without regard to case"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: Where this specification indicates that two strings are to be compared </span><b><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></b><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> translate any characters in the range #x41 (LATIN CAPITAL LETTER A) to #x5A (LATIN CAPITAL LETTER Z), inclusive, to the corresponding lower-case letters in the range #x61 (LATIN SMALL LETTER A) to #x7A (LATIN SMALL LETTER Z) only for the purposes of making the comparison. The comparison succeeds if the two strings are the same length and the code point of each character in the first string is equal to the code point of the character in the corresponding position in the second string.] </span></p><p><span class="deltaxml-new" style="background:#90EE90">Many terms used in this document are defined in the XPath specification </span><a href="#xpath-31"><span class="deltaxml-new" style="background:#90EE90">[XML Path Language (XPath) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90"> or the Data Model specification </span><a href="#xpath-datamodel-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery and XPath Data Model (XDM) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90">. Particular attention is drawn to the following:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-atomization" title="atomize"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">atomization</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-31/#id-atomization"><span class="deltaxml-new" style="background:#90EE90">Section 2.4.2 Atomization </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. ]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-node" title="node"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">node</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined as part of </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#Node"><span class="deltaxml-new" style="background:#90EE90">Section 6 Nodes </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. There are seven kinds of </span><a title="node" class="termref" href="#dt-node"><span class="deltaxml-new" style="background:#90EE90">nodes</span></a><span class="deltaxml-new" style="background:#90EE90"> in the data model: document, element, attribute, text, namespace, processing instruction, and comment.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-sequence" title="sequence"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">sequence</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-31/#id-basics"><span class="deltaxml-new" style="background:#90EE90">Section 2 Basics </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="sequence" class="termref" href="#dt-sequence"><span class="deltaxml-new" style="background:#90EE90">sequence</span></a><span class="deltaxml-new" style="background:#90EE90"> is an ordered collection of zero or more items.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-function-item" title="function item"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">function</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#function-items"><span class="deltaxml-new" style="background:#90EE90">Section 2.8.1 Functions </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-map-item" title="map item"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">map item</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#map-items"><span class="deltaxml-new" style="background:#90EE90">Section 2.8.2 Map Items </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-array-item" title="array item"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">array item</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#array-items"><span class="deltaxml-new" style="background:#90EE90">Section 2.8.3 Array Items </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-string" title="string"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">string</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#xml-and-xsd-versions"><span class="deltaxml-new" style="background:#90EE90">Section 2.7.3 XML and XSD Versions </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-character" title="character"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">character</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#xml-and-xsd-versions"><span class="deltaxml-new" style="background:#90EE90">Section 2.7.3 XML and XSD Versions </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-codepoint" title="codepoint"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">codepoint</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#xml-and-xsd-versions"><span class="deltaxml-new" style="background:#90EE90">Section 2.7.3 XML and XSD Versions </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-string-value" title="string value"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">string value</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#dm-string-value"><span class="deltaxml-new" style="background:#90EE90">Section 5.12 string-value Accessor </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. Every </span><a title="node" class="termref" href="#dt-node"><span class="deltaxml-new" style="background:#90EE90">node</span></a><span class="deltaxml-new" style="background:#90EE90"> has a </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90">. For example, the </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90"> of an element is the concatenation of the </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string values</span></a><span class="deltaxml-new" style="background:#90EE90"> of all its descendant text </span><a title="node" class="termref" href="#dt-node"><span class="deltaxml-new" style="background:#90EE90">nodes</span></a><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="dt-expanded-qname" title="expanded QName"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">expanded QName</span></b><span class="deltaxml-new" style="background:#90EE90"> is defined in </span><a href="https://www.w3.org/TR/xpath-31/#id-basics"><span class="deltaxml-new" style="background:#90EE90">Section 2 Basics </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">. An </span><a title="expanded QName" class="termref" href="#dt-expanded-qname"><span class="deltaxml-new" style="background:#90EE90">expanded QName</span></a><span class="deltaxml-new" style="background:#90EE90"> consists of an optional namespace URI and a local name. An </span><a title="expanded QName" class="termref" href="#dt-expanded-qname"><span class="deltaxml-new" style="background:#90EE90">expanded QName</span></a><span class="deltaxml-new" style="background:#90EE90"> also retains its original namespace prefix (if any), to facilitate casting the expanded QName into a string.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="null-namespace-URI" title="null namespace URI"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: </span><span><span class="deltaxml-new" style="background:#90EE90">An </span><a title="expanded QName" class="termref" href="#dt-expanded-qname"><span class="deltaxml-new" style="background:#90EE90">expanded-QName</span></a><span class="deltaxml-new" style="background:#90EE90"> whose namespace part is an empty sequence, or an element or attribute whose name expands to such an </span><a title="expanded QName" class="termref" href="#dt-expanded-qname"><span class="deltaxml-new" style="background:#90EE90">expanded-QName</span></a><span class="deltaxml-new" style="background:#90EE90">,</span></span><span class="deltaxml-new" style="background:#90EE90"> is referred to as having a </span><b><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></b><span class="deltaxml-new" style="background:#90EE90">].</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="non-null-namespace-URI" title="non-null namespace URI"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: An element or attribute that does not have a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">, is referred to as having a </span><b><span class="deltaxml-new" style="background:#90EE90">non-null namespace URI</span></b><span class="deltaxml-new" style="background:#90EE90">].</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="whitespace-char" title="whitespace character"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: A space character, TAB character, CR character or NL character is referred to as a </span><b><span class="deltaxml-new" style="background:#90EE90">whitespace character</span></b><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">Where this specification indicates that an XSLT instruction is evaluated, the behavior is as specified by </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a><span class="deltaxml-new" style="background:#90EE90">. Where it indicates that an XQuery expression is evaluated, the behavior is as specified by </span><a href="#xquery-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery 3.1: An XML Query Language]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div2"><h3><a id="namespaces"></a><span class="deltaxml-new" style="background:#90EE90">1.2 Namespaces</span></h3><p><span class="deltaxml-new" style="background:#90EE90">This specification refers to several namespaces that affect the process of serialization. These are:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="output-namespace" title="Output declaration namespace"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: the </span><b><span class="deltaxml-new" style="background:#90EE90">Output declaration namespace</span></b><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/2010/xslt-xquery-serialization</span></code><span class="deltaxml-new" style="background:#90EE90">];</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="xml-namespace" title="XML namespace"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: the </span><b><span class="deltaxml-new" style="background:#90EE90">XML namespace</span></b><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/XML/1998/namespace</span></code><span class="deltaxml-new" style="background:#90EE90">];</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="xhtml-namespace" title="XHTML namespace"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: the </span><b><span class="deltaxml-new" style="background:#90EE90">XHTML namespace</span></b><span class="deltaxml-new" style="background:#90EE90"> namespace, </span><code><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/1999/xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">];</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="svg-namespace" title="SVG namespace"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: the </span><b><span class="deltaxml-new" style="background:#90EE90">SVG namespace</span></b><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/2000/svg</span></code><span class="deltaxml-new" style="background:#90EE90">]; and</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="mathml-namespace" title="MathML namespace"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: the </span><b><span class="deltaxml-new" style="background:#90EE90">MathML namespace</span></b><span class="deltaxml-new" style="background:#90EE90"> namespace, </span><code><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/1998/Math/MathML</span></code><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">Wherever an element node or attribute node is said to be in a particular namespace, it is understood that the namespace URI of the node is equal to the namespace URI corresponding to that namespace. Wherever a namespace node is said to be a namespace node for a particular namespace, it is understood that the </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90"> of the node is equal to the namespace URI corresponding to that namespace.</span></p></div></div><div class="div1"><h2><a id="serdm"></a><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></h2><p><span class="deltaxml-new" style="background:#90EE90">An instance of the data model that is input to the serialization process is a sequence. Prior to serializing a sequence using any of the output methods whose behavior is specified by this document (</span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">), </span><span><span class="deltaxml-new" style="background:#90EE90">with the exception of the JSON </span><span><span class="deltaxml-new" style="background:#90EE90">and Adaptive</span></span><span class="deltaxml-new" style="background:#90EE90"> output method</span><span><span class="deltaxml-new" style="background:#90EE90">s</span></span><span class="deltaxml-new" style="background:#90EE90">,</span></span><span class="deltaxml-new" style="background:#90EE90"> the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> first compute a normalized sequence for serialization; it is the normalized sequence that is actually serialized. [</span><a id="sequence-normalization" title="sequence normalization"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The purpose of </span><b><span class="deltaxml-new" style="background:#90EE90">sequence normalization</span></b><span class="deltaxml-new" style="background:#90EE90"> is to create a sequence that can be serialized as a well-formed XML document or external general parsed entity, that also reflects the content of the input sequence to the extent possible.] [</span><a id="result-tree" title="result tree"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The result of the </span><a title="sequence normalization" class="termref" href="#sequence-normalization"><span class="deltaxml-new" style="background:#90EE90">sequence normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> process is a </span><b><span class="deltaxml-new" style="background:#90EE90">result tree</span></b><span class="deltaxml-new" style="background:#90EE90">.]</span></p><p><span class="deltaxml-new" style="background:#90EE90">The normalized sequence for serialization is constructed by applying all of the following rules in order, with the initial sequence being input to the first step, and the sequence that results from any step being used as input to the subsequent step. For any </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> output method, it is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> whether this sequence normalization process takes place. </span><span><span class="deltaxml-new" style="background:#90EE90">For the JSON </span><span><span class="deltaxml-new" style="background:#90EE90">and Adaptive</span></span><span class="deltaxml-new" style="background:#90EE90"> output method</span><span><span class="deltaxml-new" style="background:#90EE90">s</span></span><span class="deltaxml-new" style="background:#90EE90">, sequence normalization </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> take place.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">Where the process of converting the input sequence to a normalized sequence indicates that a value </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be cast to </span><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90">, that operation is defined in </span><a href="https://www.w3.org/TR/xpath-functions-31/#casting-to-string"><span class="deltaxml-new" style="background:#90EE90">Section 19.1.1 Casting to xs:string and xs:untypedAtomic </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> of </span><a href="#xpath-functions-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery and XPath Functions and Operators 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90">. Where a step in the sequence normalization process indicates that a node should be copied, the copy is performed in the same way as an XSLT </span><code><span class="deltaxml-new" style="background:#90EE90">xsl:copy-of</span></code><span class="deltaxml-new" style="background:#90EE90"> instruction that has a </span><code><span class="deltaxml-new" style="background:#90EE90">validation</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute whose value is </span><code><span class="deltaxml-new" style="background:#90EE90">preserve</span></code><span class="deltaxml-new" style="background:#90EE90"> and has a </span><code><span class="deltaxml-new" style="background:#90EE90">select</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute whose effective value is the node, as described in </span><a href="https://www.w3.org/TR/xslt-30/#copy-of"><span class="deltaxml-new" style="background:#90EE90">Section 11.9.2 Deep Copy </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XT30</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> of </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a><span class="deltaxml-new" style="background:#90EE90">, or equivalently in the same way as an XQuery content expression as described in Step 1e of </span><a href="https://www.w3.org/TR/xquery-31/#id-content"><span class="deltaxml-new" style="background:#90EE90">Section 3.9.1.3 Content </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XQ31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> of </span><a href="#xquery-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery 3.1: An XML Query Language]</span></a><span class="deltaxml-new" style="background:#90EE90">, where the construction mode is </span><code><span class="deltaxml-new" style="background:#90EE90">preserve</span></code><span class="deltaxml-new" style="background:#90EE90">. The steps in computing the normalized sequence are: </span></p><ol class="enumar"><li><p><span class="deltaxml-new" style="background:#90EE90">If the sequence that is input to serialization is empty, create a sequence </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">1</span></sub></em><span class="deltaxml-new" style="background:#90EE90"> that consists of a zero-length string. Otherwise, copy each item in the sequence that is input to serialization to create the new sequence </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">1</span></sub></em><span class="deltaxml-new" style="background:#90EE90">. </span><span><span class="deltaxml-new" style="background:#90EE90">Each item in the sequence that is an array is flattened by calling the function </span><code><span class="deltaxml-new" style="background:#90EE90">array:flatten()</span></code><span class="deltaxml-new" style="background:#90EE90"> before being copied.</span></span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">For each item in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">1</span></sub></em><span class="deltaxml-new" style="background:#90EE90">, if the item is atomic, obtain the lexical representation of the item by casting it to an </span><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90"> and copy the string representation to the new sequence; otherwise, copy the item to the new sequence. The new sequence is </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">2</span></sub></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent, then for each subsequence of adjacent strings in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">2</span></sub></em><span class="deltaxml-new" style="background:#90EE90">, copy a single string to the new sequence equal to the values of the strings in the subsequence concatenated in order, each separated by a single space. Copy all other items to the new sequence. Otherwise, copy each item in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">2</span></sub></em><span class="deltaxml-new" style="background:#90EE90"> to the new sequence, inserting between each pair of items a string whose value is equal to the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. The new sequence is </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">3</span></sub></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">For each item in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">3</span></sub></em><span class="deltaxml-new" style="background:#90EE90">, if the item is a string, create a text node in the new sequence whose </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90"> is equal to the string; otherwise, copy the item to the new sequence. The new sequence is </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">4</span></sub></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">For each item in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">4</span></sub></em><span class="deltaxml-new" style="background:#90EE90">, if the item is a document node, copy its children to the new sequence; otherwise, copy the item to the new sequence. The new sequence is </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">5</span></sub></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">For each subsequence of adjacent text nodes in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">5</span></sub></em><span class="deltaxml-new" style="background:#90EE90">, copy a single text node to the new sequence equal to the values of the text nodes in the subsequence concatenated in order. Any text nodes with values of zero length are dropped. Copy all other items to the new sequence. The new sequence is </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">6</span></sub></em><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">It is a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSENR0001" title="err:SENR0001"><span class="deltaxml-new" style="background:#90EE90">err:SENR0001</span></a><span class="deltaxml-new" style="background:#90EE90">] if an item in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">6</span></sub></em><span class="deltaxml-new" style="background:#90EE90"> is an attribute node, a namespace node or a </span><a title="function item" class="termref" href="#dt-function-item"><span class="deltaxml-new" style="background:#90EE90">function</span></a><span class="deltaxml-new" style="background:#90EE90">. Otherwise, construct a new sequence, </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">7</span></sub></em><span class="deltaxml-new" style="background:#90EE90">, that consists of a single document node and copy all the items in the sequence, which are all nodes, as children of that document node.</span></p></li></ol><p><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">7</span></sub></em><span class="deltaxml-new" style="background:#90EE90"> is the normalized sequence.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90"> rooted at the document node that is created by the final step of this sequence normalization process is the instance of the data model to which the rules of the appropriate output method are applied. If the sequence normalization process results in a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent, the sequence normalization process for a sequence </span><code><span class="deltaxml-new" style="background:#90EE90">$seq</span></code><span class="deltaxml-new" style="background:#90EE90"> is equivalent to constructing a document node using the XSLT instruction:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:document&gt; &lt;xsl:copy-of select="$seq" validation="preserve"/&gt; &lt;/xsl:document&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">or the XQuery expression:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">declare construction preserve; document { $seq }</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is present, the sequence normalization process for a sequence </span><code><span class="deltaxml-new" style="background:#90EE90">$seq</span></code><span class="deltaxml-new" style="background:#90EE90"> is equivalent to constructing a document node using the XSLT instruction:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:document&gt; &lt;xsl:for-each select="$seq"&gt; &lt;xsl:sequence select="if (position() gt 1) then $sep else ()"/&gt; &lt;xsl:choose&gt; &lt;xsl:when test=". instance of node()"&gt; &lt;xsl:sequence select="."/&gt; &lt;/xsl:when&gt; &lt;xsl:otherwise&gt; &lt;xsl:value-of select="."/&gt; &lt;/xsl:otherwise&gt; &lt;/xsl:choose&gt; &lt;/xsl:for-each&gt; &lt;/xsl:document&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">or the XQuery expression:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">declare construction preserve; document { for $item at $pos in $seq let $node := if ($item instance of node()) then $item else text { $item } return if ($pos eq 1) then $node else ($sep, $node) }</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">where the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">sep</span></code><span class="deltaxml-new" style="background:#90EE90"> variable is a string whose value is equal to the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This process results in a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSENR0001" title="err:SENR0001"><span class="deltaxml-new" style="background:#90EE90">err:SENR0001</span></a><span class="deltaxml-new" style="background:#90EE90">] if </span><code><span class="deltaxml-new" style="background:#90EE90">$seq</span></code><span class="deltaxml-new" style="background:#90EE90"> contains functions, attribute nodes or namespace nodes.</span></p></div></div><div class="div1"><h2><a id="serparam"></a><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></h2><p><span class="deltaxml-new" style="background:#90EE90">There are a number of parameters that influence how serialization is performed. </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">Host languages</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> allow users to specify any or all of these parameters, but they are not </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to be able to do so. However, the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> specification </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> specify how the values of all applicable parameters are to be determined. </span></p><p><span class="deltaxml-new" style="background:#90EE90">It is a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSEPM0016" title="err:SEPM0016"><span class="deltaxml-new" style="background:#90EE90">err:SEPM0016</span></a><span class="deltaxml-new" style="background:#90EE90">] if a parameter value is invalid for the given parameter. It is the responsibility of the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> to specify how invalid values should be handled at the level of that language.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The following serialization parameters are defined:</span></p><table style="border:1px solid" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Serialization parameters</span></caption><thead><tr><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">Serialization parameter name</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">Permitted values for parameter</span></th></tr></thead><tbody><tr><td><code><span><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></span></code></td><td><span><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. This parameter indicates whether a map item serialized as a JSON object using the JSON output method is allowed to contain duplicate member names. If the value </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90"> is specified, serialization error [</span><a href="#ERRSERE0022" title="err:SERE0022"><span class="deltaxml-new" style="background:#90EE90">err:SERE0022</span></a><span class="deltaxml-new" style="background:#90EE90">] will be raised.</span></span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. This parameter indicates whether the serialized sequence of octets is to be preceded by a Byte Order Mark (See Section 5.1 of </span><a href="#UNICODE-ENCODING"><span class="deltaxml-new" style="background:#90EE90">[Unicode Encoding]</span></a><span class="deltaxml-new" style="background:#90EE90">). The actual octet order used is </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. If the encoding defines no Byte Order Mark, or if the Byte Order Mark is prohibited for the specific Unicode encoding or implementation environment, then this parameter is ignored.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A list of expanded QNames, possibly empty.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A string of </span><a href="https://www.w3.org/TR/REC-xml/#NT-PubidChar"><span class="deltaxml-new" style="background:#90EE90">PubidChar</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XML</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> characters. This parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be absent.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A string of Unicode characters that does not include both an apostrophe (#x27) and a quotation mark (#x22) character. This parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be absent.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A string of Unicode characters in the range #x21 to #x7E (that is, printable ASCII characters); the value </span><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD</span></strong><span class="deltaxml-new" style="background:#90EE90"> be a charset registered with the Internet Assigned Numbers Authority </span><a href="#IANA"><span class="deltaxml-new" style="background:#90EE90">[IANA]</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a href="#RFC2978"><span class="deltaxml-new" style="background:#90EE90">[RFC2978]</span></a><span class="deltaxml-new" style="background:#90EE90"> or begin with the characters </span><code><span class="deltaxml-new" style="background:#90EE90">x-</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">X-</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A decimal value. This parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be absent.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A string of Unicode characters. This parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be absent.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">An expanded QName with a </span><a title="non-null namespace URI" class="termref" href="#non-null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">non-null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">, or with a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90"> and a local name equal to one of </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">text</span></code><span class="deltaxml-new" style="background:#90EE90">. If the namespace URI is non-null, the parameter specifies an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> output method.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A string of Unicode characters specifying the media type (MIME content type) </span><a href="#RFC2046"><span class="deltaxml-new" style="background:#90EE90">[RFC2046]</span></a><span class="deltaxml-new" style="background:#90EE90">; the charset parameter of the media type </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be specified explicitly in the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. If the destination of the serialized output is annotated with a media type, this parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be used to provide such an annotation. For example, it </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be used to set the media type in an HTTP header.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">method</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">An expanded QName with </span><span><span class="deltaxml-new" style="background:#90EE90">a </span><a title="non-null namespace URI" class="termref" href="#non-null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">non-null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">, or with a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90"> and a local name equal to one of </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">text</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">json</span></code><span><span class="deltaxml-new" style="background:#90EE90">, or </span><code><span class="deltaxml-new" style="background:#90EE90">adaptive</span></code></span></span><span class="deltaxml-new" style="background:#90EE90">.</span></span><span class="deltaxml-new" style="background:#90EE90"> If the namespace URI is non-null, the parameter specifies an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> output method.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><code><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">NFD</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">NFKC</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">NFKD</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">fully-normalized</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">none</span></code><span class="deltaxml-new" style="background:#90EE90">, or an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> value of type </span><code><span class="deltaxml-new" style="background:#90EE90">NMTOKEN</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">omit</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A list of expanded QNames, possibly empty.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">One of the enumerated values </span><span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A list of pairs, possibly empty, with each pair consisting of a single Unicode character and a string of Unicode characters.</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">version</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">A string of Unicode characters.</span></td></tr></tbody></table><p><span class="deltaxml-new" style="background:#90EE90">The value of the </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is an </span><a title="expanded QName" class="termref" href="#dt-expanded-qname"><span class="deltaxml-new" style="background:#90EE90">expanded QName</span></a><span class="deltaxml-new" style="background:#90EE90">. If the value has a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">, then the local name identifies a method specified in this document and </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be one of </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">text</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">json</span></code><span><span class="deltaxml-new" style="background:#90EE90">, or </span><code><span class="deltaxml-new" style="background:#90EE90">adaptive</span></code></span></span><span class="deltaxml-new" style="background:#90EE90">; in this case, the output method specified </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be used for serializing. If the namespace URI is non-null, then it identifies an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> output method; the behavior in this case is not specified by this document.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In those cases where they have no important effect on the content of the serialized result, details of the output methods defined by this specification are left unspecified and are regarded as </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. Whether a </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> uses apostrophes or quotation marks to delimit attribute values in the XML output method is an example of such a detail.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The detailed semantics of each parameter will be described separately for each output method for which it is applicable. If the semantics of a parameter are not described for an output method, then it is not applicable to that output method.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Implementations </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> define additional serialization parameters, and </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> allow users to do so. For this purpose, the name of a serialization parameter is considered to be a QName; the parameters listed above are </span><span><span class="deltaxml-new" style="background:#90EE90">QNames whose </span><a title="expanded QName" class="termref" href="#dt-expanded-qname"><span class="deltaxml-new" style="background:#90EE90">expanded-QName</span></a><span class="deltaxml-new" style="background:#90EE90"> has a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">,</span></span><span class="deltaxml-new" style="background:#90EE90"> while any additional serialization parameters that are either </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> or defined by the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> have names that are namespace-qualified. Any such additional serialization parameters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be in the namespace </span><code><span class="deltaxml-new" style="background:#90EE90">https://www.w3.org/2010/xslt-xquery-serialization</span></code><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> specify the means by which an implementation can define such an additional serialization parameter, and implementations </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> provide mechanisms by which users can define such an additional serialization parameter. If the serialization method is one of the </span><span><span class="deltaxml-new" style="background:#90EE90">six</span></span><span class="deltaxml-new" style="background:#90EE90"> methods </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">text</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">json</span></code></span><span class="deltaxml-new" style="background:#90EE90">, </span><span><span class="deltaxml-new" style="background:#90EE90">or </span><code><span class="deltaxml-new" style="background:#90EE90">adaptive</span></code></span><span class="deltaxml-new" style="background:#90EE90"> then the additional serialization parameters </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> affect the output of the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> to the extent (but only to the extent) that this specification leaves the output </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. For example, such parameters might control whether namespace declarations on an element are written before or after the attributes of the element, or they might define the number of space or tab characters to be inserted when the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is set to </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">; but they could not instruct the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> to suppress the error that occurs when the HTML output method encounters characters that are not permitted (see error [</span><a href="#ERRSERE0014" title="err:SERE0014"><span class="deltaxml-new" style="background:#90EE90">err:SERE0014</span></a><span class="deltaxml-new" style="background:#90EE90">]).</span></p><div class="div2"><h3><a id="serparams-in-xdm-instance"></a><span class="deltaxml-new" style="background:#90EE90">3.1 Setting Serialization Parameters by Means of a Data Model Instance</span></h3><p><span class="deltaxml-new" style="background:#90EE90">A </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> provide, by reference to this section, a mechanism by which the settings of serialization parameters are supplied in the form of an instance of the data model as specified in </span><a href="#xpath-datamodel-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery and XPath Data Model (XDM) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90">. The instance of the data model used to determine the settings of serialization parameters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be processed as if by the procedure described below.</span></p><p><span class="deltaxml-new" style="background:#90EE90">With the exception of the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, the setting of each serialization parameter defined in this specification is equal to the result of evaluating the XQuery expression</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">document { . } /output:serialization-parameters /(validate lax { output:*[local-name() eq $param-name] }) /data(@value) </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90"> or equivalently the XSLT instructions </span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:sequence&gt; &lt;xsl:variable name="validated-instance"&gt; &lt;xsl:document validation="lax"&gt; &lt;xsl:sequence select=" ./output:serialization-parameters /output:* [local-name() eq $param-name]"/&gt; &lt;/xsl:document&gt; &lt;/xsl:variable&gt; &lt;xsl:sequence select="$validated-instance /data(@value)"/&gt; &lt;/xsl:sequence&gt; </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">with the supplied instance of the data model as the context item, the </span><code><span class="deltaxml-new" style="background:#90EE90">param-name</span></code><span class="deltaxml-new" style="background:#90EE90"> variable </span><span><span class="deltaxml-new" style="background:#90EE90">bound to</span></span><span class="deltaxml-new" style="background:#90EE90"> a value of type </span><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90"> equal to the local part of the name of the particular serialization parameter, and the other components of the dynamic context and static context as specified in the subsequent tables. If in any case evaluating this expression would yield an error, </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSEPM0017" title="err:SEPM0017"><span class="deltaxml-new" style="background:#90EE90">err:SEPM0017</span></a><span class="deltaxml-new" style="background:#90EE90">] results.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the result of evaluating this expression for a particular serialization parameter is the empty sequence</span><span><span class="deltaxml-new" style="background:#90EE90">, then</span></span></p><ol class="enumar"><li><p><span class="deltaxml-new" style="background:#90EE90">If the parameter is either </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> and the result of evaluating the XQuery expression</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">document { . } /output:serialization-parameters /(validate lax { output:*[local-name() eq $param-name] }) </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90"> or equivalently the XSLT instructions </span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:sequence&gt; &lt;xsl:variable name="validated-instance"&gt; &lt;xsl:document select="." validation="lax"&gt; &lt;xsl:sequence select=" /output:serialization-parameters /output:* [local-name() eq $param-name]"/&gt; &lt;/xsl:document&gt; &lt;/xsl:variable&gt; &lt;xsl:sequence select="$validated-instance"/&gt; &lt;/xsl:sequence&gt; </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">with the same settings of the static context and dynamic context is not an empty sequence, the setting of the parameter is the empty list;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">otherwise, the setting of the parameter is absent.</span></p></li></ol><p><span class="deltaxml-new" style="background:#90EE90">The components of the static context used in evaluating the XQuery expressions or XSLT instructions are as defined in the following table.</span></p><table style="border:1px solid" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Settings of static context components used in extracting serialization parameter settings from an XDM instance</span></caption><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Static Context Component</span></th><th><span class="deltaxml-new" style="background:#90EE90">XQuery or XSLT</span></th><th><span class="deltaxml-new" style="background:#90EE90">Setting</span></th></tr></thead><tbody><tr><td><span class="deltaxml-new" style="background:#90EE90">XPath 1.0 compatibility mode</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">false</span></td></tr><tr><td rowspan="2"><span class="deltaxml-new" style="background:#90EE90">Statically known namespaces</span></td><td><span class="deltaxml-new" style="background:#90EE90">XQuery</span></td><td><span class="deltaxml-new" style="background:#90EE90">The pair (output,http://www.w3.org/2010/xslt-xquery-serialization) </span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">The pairs (output,http://www.w3.org/2010/xslt-xquery-serialization), (xsl,http://www.w3.org/1999/XSL/Transform) </span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Default element/type namespace</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">"none"</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Default function namespace</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2005/xpath-functions</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">In-scope schema types, In-scope element declarations, Substitution groups, In-scope attribute declarations</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">As defined by the schema for serialization parameters (</span><a href="#serparams-schema"><b><span class="deltaxml-new" style="background:#90EE90">B Schema for Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">) and any additional </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> in-scope schema components </span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">In-scope variables</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">{param-name}</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Context item static type</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><code><span class="deltaxml-new" style="background:#90EE90">node()</span></code></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Statically-known function signatures</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">{</span><code><span class="deltaxml-new" style="background:#90EE90">fn:data($arg as item()*) as xs:anyAtomicType*</span></code><span class="deltaxml-new" style="background:#90EE90">}</span><span><span class="deltaxml-new" style="background:#90EE90">, {</span><code><span class="deltaxml-new" style="background:#90EE90">fn:local-name($arg as node()?) as xs:string</span></code><span class="deltaxml-new" style="background:#90EE90">}</span></span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Statically known collations</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90"> { (http://www.w3.org/2005/xpath-functions/collation/codepoint, The Unicode codepoint collation ) } </span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Default collation</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">The Unicode codepoint collation</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Construction mode</span></td><td><span class="deltaxml-new" style="background:#90EE90">XQuery</span></td><td><span class="deltaxml-new" style="background:#90EE90">strip</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Ordering mode</span></td><td><span class="deltaxml-new" style="background:#90EE90">XQuery</span></td><td><span class="deltaxml-new" style="background:#90EE90">ordered</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Default order for empty sequences</span></td><td><span class="deltaxml-new" style="background:#90EE90">XQuery</span></td><td><span class="deltaxml-new" style="background:#90EE90">least</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Boundary space policy</span></td><td><span class="deltaxml-new" style="background:#90EE90">XQuery</span></td><td><span class="deltaxml-new" style="background:#90EE90">strip</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Copy-namespaces mode</span></td><td><span class="deltaxml-new" style="background:#90EE90">XQuery</span></td><td><span class="deltaxml-new" style="background:#90EE90">(preserve,inherit)</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Base URI</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">Absent</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Statically known documents</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Statically known collections</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Statically known default collection type</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><code><span class="deltaxml-new" style="background:#90EE90">node()*</span></code></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Statically known decimal formats</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Set of named keys</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">{}</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Values of system properties</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Set of available instructions</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">The set of all instructions defined by </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a></td></tr></tbody></table><p><span class="deltaxml-new" style="background:#90EE90">The remaining components of the dynamic context used in evaluating the XQuery expressions or XSLT instructions in the preceding table are as defined in the following table.</span></p><table style="border:1px solid" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Settings of dynamic context components used in extracting serialization parameter settings from an XDM instance</span></caption><thead><tr><th><span class="deltaxml-new" style="background:#90EE90">Dynamic Context Component</span></th><th><span class="deltaxml-new" style="background:#90EE90">XQuery or XSLT</span></th><th><span class="deltaxml-new" style="background:#90EE90">Setting</span></th></tr></thead><tbody><tr><td><span class="deltaxml-new" style="background:#90EE90">Context position</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">1</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Context size</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">1</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Variable values</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">param-name</span></code><span class="deltaxml-new" style="background:#90EE90"> variable has a value of type </span><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90"> equal the local part of the name of the serialization parameter under consideration</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Function implementations</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">The implementation of </span><code><span class="deltaxml-new" style="background:#90EE90">fn:data</span></code></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Current dateTime</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">Absent</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Implicit timezone</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">Absent</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Available documents</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Available collections</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Default collection</span></td><td><span class="deltaxml-new" style="background:#90EE90">Both</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Current template rule</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">Absent</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Current mode</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">The default mode</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Current group</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">Absent</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Current grouping key</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">Absent</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Current captured substrings</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">The empty sequence</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">Output state</span></td><td><span class="deltaxml-new" style="background:#90EE90">XSLT</span></td><td><span class="deltaxml-new" style="background:#90EE90">Temporary output state</span></td></tr></tbody></table><p><span class="deltaxml-new" style="background:#90EE90">In the case of the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, the XQuery expression</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">document { . } /output:serialization-parameters / ( validate lax { output:use-character-maps } ) /output:character-map[@character eq $char] /string(@map-string) </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90"> or equivalently the XSLT instructions </span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:sequence&gt; &lt;xsl:variable name="validated-instance"&gt; &lt;xsl:document validation="lax"&gt; &lt;xsl:sequence select=" ./output:serialization-parameters /output:use-character-maps"/&gt; &lt;/xsl:document&gt; &lt;/xsl:variable&gt; &lt;xsl:sequence select="$validated-instance /output:character-map [@character eq $char] /string(@map-string)"/&gt; &lt;/xsl:sequence&gt; </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">is evaluated for each Unicode character that is permitted in an XML document. The dynamic context and static context used to evaluate the expression are as defined above, except that in-scope variables is the set {</span><code><span class="deltaxml-new" style="background:#90EE90">char</span></code><span class="deltaxml-new" style="background:#90EE90">} and the value of the variable "</span><code><span class="deltaxml-new" style="background:#90EE90">char</span></code><span class="deltaxml-new" style="background:#90EE90">" is a value of type </span><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90"> of length one whose value is the Unicode character under consideration. If the result of evaluating the expression is not an empty sequence, the pair consisting of the Unicode character and the result of evaluating the expression is part of the list of pairs in the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. It is a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSEPM0018" title="err:SEPM0018"><span class="deltaxml-new" style="background:#90EE90">err:SEPM0018</span></a><span class="deltaxml-new" style="background:#90EE90">] if the result of evaluating this expression for any character is a sequence of length greater than one.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Using the same settings of the components of the dynamic context and static context, </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSEPM0019" title="err:SEPM0019"><span class="deltaxml-new" style="background:#90EE90">err:SEPM0019</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the result of evaluating the following XQuery expression is not true </span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">(document { . })/output:serialization-parameters /(count(distinct-values(*/node-name(.))) eq (count(*))) </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90"> or equivalently if the result of evaluating the following XSLT instructions is not true. </span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:sequence&gt; &lt;xsl:variable name="doc"&gt; &lt;xsl:document&gt; &lt;xsl:sequence select="."/&gt; &lt;/xsl:document&gt; &lt;/xsl:variable&gt; &lt;xsl:sequence select="$doc/output:serialization-parameters /(count(distinct-values( */node-name(.))) eq (count(*)))"/&gt; &lt;/xsl:sequence&gt; </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">The result of evaluating either will be false if the data model instance supplies a value for any particular serialization parameter more than once, or will be the empty sequence if the data model instance does not have as its root node an element node or a document node with an element node child, where the local part of the name of the element node is </span><code><span class="deltaxml-new" style="background:#90EE90">serialization-parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> and the namespace URI is </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2010/xslt-xquery-serialization</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> or implementation of a </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> does not need to be accompanied by an XQuery processor nor by a general-purpose schema validator in order to meet the requirements of this section. It merely needs to be capable of extracting values from an XDM instance that conforms to the schema for serialization parameters, while checking that the constraints implied by the schema and additional constraints implied by the XQuery validate expression or explicitly stated in this section are satisfied.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> provide additional mechanisms for overriding the values of any serialization parameters specified through the mechanism defined in this section, as well as additional mechanisms for specifying the values of any serialization parameters whose values are absent after applying the mechanism defined in this section.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the instance of the data model contains elements or attributes that are in a namespace other than </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2010/xslt-xquery-serialization</span></code><span class="deltaxml-new" style="background:#90EE90">, the implementation </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> interpret them to specify the values of </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> serialization parameters in an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> manner.</span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">The following XML document, if converted to a data model instance and processed using the mechanism described in this section, would specify the settings of the </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameters with the values </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, respectively. </span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;output:serialization-parameters xmlns:output = "http://www.w3.org/2010/xslt-xquery-serialization"&gt; &lt;output:method value="xml"/&gt; &lt;output:version value="1.0"/&gt; &lt;output:indent value="yes"/&gt; &lt;/output:serialization-parameters&gt; </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">The following document would specify the setting of the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter with value the pair of expanded QNames (</span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/book/chapter</span></code><span class="deltaxml-new" style="background:#90EE90">,</span><code><span class="deltaxml-new" style="background:#90EE90">heading</span></code><span class="deltaxml-new" style="background:#90EE90">) and (</span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/book</span></code><span class="deltaxml-new" style="background:#90EE90">,</span><code><span class="deltaxml-new" style="background:#90EE90">footnote</span></code><span class="deltaxml-new" style="background:#90EE90">)</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;output:serialization-parameters xmlns:output = "http://www.w3.org/2010/xslt-xquery-serialization" xmlns:book="http://example.org/book" xmlns="http://example.org/book/chapter"&gt; &lt;output:cdata-section-elements value="heading book:footnote"/&gt; &lt;/output:serialization-parameters&gt; </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">The following document would specify the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter with the value </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Notice that in this example, the default namespace declaration in scope has no effect on the interpretation of the setting of the </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;output:serialization-parameters xmlns:output = "http://www.w3.org/2010/xslt-xquery-serialization" xmlns="http://example.org/ext"&gt; &lt;output:method value="html"/&gt; &lt;/output:serialization-parameters&gt; </span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">The following document would specify the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter with value equal to the expanded QName (</span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/ext</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">jsp</span></code><span class="deltaxml-new" style="background:#90EE90">), and the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter with value equal to the list of pairs, </span><code><span class="deltaxml-new" style="background:#90EE90">(«, &lt;%), (», %&gt;)</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;output:serialization-parameters xmlns:output = "http://www.w3.org/2010/xslt-xquery-serialization" xmlns:ext="http://example.org/ext"&gt; &lt;output:method value="ext:jsp"/&gt; &lt;output:use-character-maps&gt; &lt;output:character-map character="&amp;#xAB;" map-string="&amp;lt;%"/&gt; &lt;output:character-map character="&amp;#xBB;" map-string="%&amp;gt;"/&gt; &lt;/output:use-character-maps&gt; &lt;/output:serialization-parameters&gt; </span></pre></div></div></div></div><div class="div1"><h2><a id="serphases"></a><span class="deltaxml-new" style="background:#90EE90">4 Phases of Serialization</span></h2><p><span><span class="deltaxml-new" style="background:#90EE90"> For the XML, HTML, XHTML and Text output methods, s</span></span><span class="deltaxml-new" style="background:#90EE90">erialization comprises five phases of processing (preceded by the sequence normalization process described in </span><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90">). </span><span></span><span><span class="deltaxml-new" style="background:#90EE90">For the JSON </span><span><span class="deltaxml-new" style="background:#90EE90">and Adaptive</span></span><span class="deltaxml-new" style="background:#90EE90"> output method</span><span><span class="deltaxml-new" style="background:#90EE90">s</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><span><span class="deltaxml-new" style="background:#90EE90"> serialization is described in </span><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> respectively. </span></span></span></p><p><span class="deltaxml-new" style="background:#90EE90">For an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> output method, any of these phases </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be skipped or </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be performed in a different order than is specified here. For the output methods defined in this specification, these phases are carried out sequentially as follows:</span></p><ol class="enumar"><li><p><span class="deltaxml-new" style="background:#90EE90">A </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element is added to the sequence along with discarding an existing </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element, as controlled by the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML and HTML output methods. </span><span></span><span><span class="deltaxml-new" style="background:#90EE90">This step is skipped for the other output methods defined by this specification.</span></span></p></li><li><p><em><span class="deltaxml-new" style="background:#90EE90">Markup generation</span></em><span class="deltaxml-new" style="background:#90EE90"> produces the character representation of those parts of the serialized result that describe the structure of the sequence. In the cases of the XML, HTML and XHTML output methods, this phase produces the character representations of the following:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the document type declaration; </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">start tags and end tags (except for attribute values, whose representation is produced by the character expansion phase); </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">processing instructions; and</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">comments.</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">In the cases of the XML and XHTML output methods, this phase also produces the following:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the XML or text declaration; and</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">empty element tags (except for the attribute values);</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90"> In the case of the text output method, this phase replaces the single document node produced by </span><a title="sequence normalization" class="termref" href="#sequence-normalization"><span class="deltaxml-new" style="background:#90EE90">sequence normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> with a new document node that has exactly one child, which is a text node. The string value of the new text node is the string value of the document node that was produced by sequence normalization. </span></p></li><li><p><em><span class="deltaxml-new" style="background:#90EE90">Character expansion</span></em><span class="deltaxml-new" style="background:#90EE90"> is concerned with the representation of characters appearing in text and attribute nodes in the sequence. </span><span></span><span class="deltaxml-new" style="background:#90EE90"> For each text and attribute node, the following rules are applied in sequence. </span></p><ol class="enumla"><li><p><span class="deltaxml-new" style="background:#90EE90"> If the node is an attribute that is a </span><a title="URI attribute values" class="termref" href="#uri-attribute-values"><span class="deltaxml-new" style="background:#90EE90">URI attribute value</span></a><span class="deltaxml-new" style="background:#90EE90"> and the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is set to require escaping of URI attributes, apply </span><a title="URI Escaping" class="termref" href="#uri-escaping"><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></a><span class="deltaxml-new" style="background:#90EE90"> as defined below, and skip rules b-e. Otherwise, continue with rule b.</span></p><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="uri-escaping" title="URI Escaping"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: </span><b><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></b><span class="deltaxml-new" style="background:#90EE90"> consists of the following three steps applied in sequence to the content of </span><a title="URI attribute values" class="termref" href="#uri-attribute-values"><span class="deltaxml-new" style="background:#90EE90">URI attribute values</span></a><span class="deltaxml-new" style="background:#90EE90">:] </span></p><ol class="enumlr"><li><p><span class="deltaxml-new" style="background:#90EE90">normalize to NFC using the method defined in </span><a href="https://www.w3.org/TR/xpath-functions-31/#func-normalize-unicode"><span class="deltaxml-new" style="background:#90EE90">Section 5.4.6 fn:normalize-unicode </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO31</span></small></sup></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">percent-encode any special characters in the URI using the method defined in </span><a href="https://www.w3.org/TR/xpath-functions-31/#func-escape-html-uri"><span class="deltaxml-new" style="background:#90EE90">Section 6.4 fn:escape-html-uri </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO31</span></small></sup></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">escape according to the rules of the XML or HTML output method, whichever is applicable, any characters that require escaping, and any characters that cannot be represented in the selected encoding. For example, replace </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;lt;</span></code><span class="deltaxml-new" style="background:#90EE90"> (See also section </span><a href="#HTML_CHARDATA"><b><span class="deltaxml-new" style="background:#90EE90">7.3 Writing Character Data</span></b></a><span class="deltaxml-new" style="background:#90EE90">). </span></p></li></ol><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="uri-attribute-values" title="URI attribute values"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The values of attributes listed in </span><a href="#list-of-uri-attributes"><b><span class="deltaxml-new" style="background:#90EE90">D List of URI Attributes</span></b></a><span class="deltaxml-new" style="background:#90EE90"> are </span><b><span class="deltaxml-new" style="background:#90EE90">URI attribute values</span></b><span class="deltaxml-new" style="background:#90EE90">. Attributes are not considered to be URI attributes simply because they are namespace declaration attributes or have the type annotation </span><code><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></code><span class="deltaxml-new" style="background:#90EE90">.]</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> If the node is a text node whose parent element is selected by the rules of the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the applicable output method, create CDATA sections as described below, and skip rules c-e. Otherwise, continue with rule c. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Apply the following two processes in sequence to create CDATA sections</span></p><ol class="enumlr"><li><p><a title="Unicode Normalization" class="termref" href="#unicode-normalization"><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> if requested by the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></li><li><p><span><span class="deltaxml-new" style="background:#90EE90">The application of</span></span><span class="deltaxml-new" style="background:#90EE90"> changes as detailed in the description of the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the applicable output method.</span></p></li></ol></li><li><p><span class="deltaxml-new" style="background:#90EE90">Apply character mapping as determined by the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the applicable output method. For characters that were substituted by this process, skip rules d and e. For the remaining characters that were not modified by character mapping, continue with rule d. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Apply </span><a title="Unicode Normalization" class="termref" href="#unicode-normalization"><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> if requested by the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. </span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="unicode-normalization" title="Unicode Normalization"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: </span><b><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization</span></b><span class="deltaxml-new" style="background:#90EE90"> is the process of removing alternative representations of equivalent sequences from textual data, to convert the data into a form that can be binary-compared for equivalence, as specified in </span><a href="#UNICODE-NORMALIZATION-FORM"><span class="deltaxml-new" style="background:#90EE90">[UAX #15: Unicode Normalization Forms]</span></a><span class="deltaxml-new" style="background:#90EE90">. For specific recommendations for character normalization on the World Wide Web, see </span><a href="#charmod-norm"><span class="deltaxml-new" style="background:#90EE90">[Character Model for the World Wide Web 1.0: Normalization]</span></a><span class="deltaxml-new" style="background:#90EE90">.]</span></p><p><span class="deltaxml-new" style="background:#90EE90"> The meanings associated with the possible values of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter are defined in section </span><a href="#XML_NORMALIZATION-FORM"><b><span class="deltaxml-new" style="background:#90EE90">5.1.9 XML Output Method: the normalization-form Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Continue with step e. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Escape according to the rules of the XML or HTML output method, whichever is applicable, any characters (such as </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;</span></code><span class="deltaxml-new" style="background:#90EE90">) where XML or HTML requires escaping, and any characters that cannot be represented in the selected encoding. For example, replace </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span></code><span class="deltaxml-new" style="background:#90EE90"> with </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;lt;</span></code><span class="deltaxml-new" style="background:#90EE90">. (See also section </span><a href="#HTML_CHARDATA"><b><span class="deltaxml-new" style="background:#90EE90">7.3 Writing Character Data</span></b></a><span class="deltaxml-new" style="background:#90EE90">). For characters such as </span><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> where XML defines a built-in entity but does not require its use in all circumstances, it is implementation-dependent whether the character is escaped. </span></p></li></ol></li><li><p><em><span class="deltaxml-new" style="background:#90EE90">Indentation</span></em><span class="deltaxml-new" style="background:#90EE90">, as controlled by the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter and the </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> add or remove whitespace according to the rules defined by the applicable output method.</span></p></li><li><p><em><span class="deltaxml-new" style="background:#90EE90">Encoding</span></em><span class="deltaxml-new" style="background:#90EE90">, as controlled by the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, converts the character stream produced by the previous phases into an octet stream.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">Serialization is only defined in terms of encoding the result as a stream of octets. However, a </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> provide an option that allows the encoding phase to be skipped, so that the result of serialization is a stream of Unicode characters. The effect of any such option is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">, and a </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is not required to support such an option. </span></p></div></li></ol></div><div class="div1"><h2><a id="xml-output"></a><span class="deltaxml-new" style="background:#90EE90">5 XML Output Method</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The XML output method serializes the normalized sequence as an XML entity that </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> satisfy the rules for either a well-formed XML document entity, a well-formed XML external general parsed entity, or both. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0003" title="err:SERE0003"><span class="deltaxml-new" style="background:#90EE90">err:SERE0003</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is unable to satisfy those rules, except for content modified by the character expansion phase of serialization, as described in </span><a href="#serphases"><b><span class="deltaxml-new" style="background:#90EE90">4 Phases of Serialization</span></b></a><span class="deltaxml-new" style="background:#90EE90">. The effects of the character expansion phase could result in the serialized output being not well-formed, but will not result in a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90">. If a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> results, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the document node of the normalized sequence has a single element node child and no text node children, then the serialized output is a well-formed XML document entity, and the serialized output </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> conform to the appropriate version of the XML Namespaces Recommendation </span><a href="#xml-names"><span class="deltaxml-new" style="background:#90EE90">[XML Names]</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#xml-names11"><span class="deltaxml-new" style="background:#90EE90">[XML Names 1.1]</span></a><span class="deltaxml-new" style="background:#90EE90">. If the normalized sequence does not take this form, then the serialized output is a well-formed XML external general parsed entity, which, when referenced within a trivial XML document wrapper like this:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;?xml version="</span><em><span class="deltaxml-new" style="background:#90EE90">version</span></em><span class="deltaxml-new" style="background:#90EE90">"?&gt; &lt;!DOCTYPE doc [ &lt;!ENTITY e SYSTEM "</span><em><span class="deltaxml-new" style="background:#90EE90">entity-URI</span></em><span class="deltaxml-new" style="background:#90EE90">"&gt; ]&gt; &lt;doc&gt;&amp;e;&lt;/doc&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">where </span><code><span class="deltaxml-new" style="background:#90EE90">entity-URI</span></code><span class="deltaxml-new" style="background:#90EE90"> is a URI for the entity, and the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> pseudo-attribute is the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, produces a document which </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> itself be a well-formed XML document conforming to the corresponding version of the XML Namespaces Recommendation </span><a href="#xml-names"><span class="deltaxml-new" style="background:#90EE90">[XML Names]</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#xml-names11"><span class="deltaxml-new" style="background:#90EE90">[XML Names 1.1]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="reconstructed-tree" title="reconstructed tree"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: A </span><b><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></b><span class="deltaxml-new" style="background:#90EE90"> may be constructed by parsing the XML document and converting it into an instance of the data model as specified in </span><a href="#xpath-datamodel-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery and XPath Data Model (XDM) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90">.] The result of serialization </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be such that the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><span class="deltaxml-new" style="background:#90EE90"> is the same as the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90"> except for the following permitted differences:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">If the document was produced by adding a document wrapper, as described above, then it will contain an extra </span><code><span class="deltaxml-new" style="background:#90EE90">doc</span></code><span class="deltaxml-new" style="background:#90EE90"> element as the document element.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The order of attribute and namespace nodes in the two trees </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be different.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> The following properties of corresponding nodes in the two trees </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be different:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the base-uri property of document nodes and element nodes;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the document-uri and unparsed-entities properties of document nodes;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the type-name and typed-value properties of element and attribute nodes;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the nilled property of element nodes;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the content property of text nodes, due to the effect of the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters.</span></p></li></ul></li><li><p><span class="deltaxml-new" style="background:#90EE90">The </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> contain additional attributes and text nodes resulting from the expansion of default and fixed values in its DTD or schema; also, in the presence of a DTD, non-CDATA attributes may lose whitespace characters as a result of attribute value normalization.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The type annotations of the nodes in the two trees </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be different. Type annotations in a </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90"> are discarded when the tree is serialized. Any new type annotations obtained by parsing the document will depend on whether the serialized XML document is assessed against a schema, and this </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> result in type annotations that are different from those in the original </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">In order to influence the type annotations in the instance of the data model that would result from processing a serialized XML document, the author of the XSLT stylesheet, XQuery expression or other process might wish to create the instance of the data model that is input to the serialization process so that it makes use of mechanisms provided by </span><a href="#xmlschema-1"><span class="deltaxml-new" style="background:#90EE90">[XML Schema]</span></a><span class="deltaxml-new" style="background:#90EE90">, such as </span><code><span class="deltaxml-new" style="background:#90EE90">xsi:type</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">xsi:schemaLocation</span></code><span class="deltaxml-new" style="background:#90EE90"> attributes. The serialization process will not automatically create such attributes in the serialized document if those attributes were not part of the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90"> that is to be serialized.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Similarly, it is possible that an element node in the instance of the data model that is to be serialized has the </span><code><span class="deltaxml-new" style="background:#90EE90">nilled</span></code><span class="deltaxml-new" style="background:#90EE90"> property with the value </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, but no </span><code><span class="deltaxml-new" style="background:#90EE90">xsi:nil</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute. The serialization process will not create such an attribute in the serialized document simply to reflect the value of the property. The value of the </span><code><span class="deltaxml-new" style="background:#90EE90">nilled</span></code><span class="deltaxml-new" style="background:#90EE90"> property has no direct effect on the serialized result. </span></p></div></li><li><p><span class="deltaxml-new" style="background:#90EE90">Additional namespace nodes </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be present in the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><span class="deltaxml-new" style="background:#90EE90"> if the serialization process did not undeclare one or more namespaces, as described in </span><a href="#xml-undeclare-NS"><b><span class="deltaxml-new" style="background:#90EE90">5.1.8 XML Output Method: the undeclare-prefixes Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">, and the starting instance of the data model contained an element node with a namespace node that declared some prefix, but a child element of that node did not have any namespace node that declared the same prefix.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> The </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> contain namespace nodes that are not present in the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><span class="deltaxml-new" style="background:#90EE90">, as the process of creating an instance of the data model </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> ignore namespace declarations in some circumstances. See </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#const-infoset-element"><span class="deltaxml-new" style="background:#90EE90">Section 6.2.3 Construction from an Infoset </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="https://www.w3.org/TR/xpath-datamodel-31/#const-psvi-element"><span class="deltaxml-new" style="background:#90EE90">Section 6.2.4 Construction from a PSVI </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">DM31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> of </span><a href="#xpath-datamodel-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery and XPath Data Model (XDM) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90"> for additional information. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, </span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">additional text nodes consisting of whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be present in the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><span class="deltaxml-new" style="background:#90EE90">; and</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">text nodes in the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90"> that contained only whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> correspond to text nodes in the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><span class="deltaxml-new" style="background:#90EE90"> that contain additional whitespace characters that were not present in the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#xml-indent"><b><span class="deltaxml-new" style="background:#90EE90">5.1.4 XML Output Method: the indent and suppress-indentation Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information on the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Additional nodes </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be present in the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><span class="deltaxml-new" style="background:#90EE90"> due to the effect of character mapping in the character expansion phase, and the values of attribute nodes and text nodes in the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be different from those in the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90">, due to the effects of URI expansion, character mapping and </span><a title="Unicode Normalization" class="termref" href="#unicode-normalization"><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> in the character expansion phase of serialization. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter can cause arbitrary characters to be inserted into the serialized XML document in an unescaped form, including characters that would be considered to be part of XML markup. Such characters could result in arbitrary new element nodes, attribute nodes, and so on, in the </span><a title="reconstructed tree" class="termref" href="#reconstructed-tree"><span class="deltaxml-new" style="background:#90EE90">reconstructed tree</span></a><span class="deltaxml-new" style="background:#90EE90"> that results from processing the serialized XML document.</span></p></div></li></ul><p><span class="deltaxml-new" style="background:#90EE90">A consequence of this rule is that certain characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as character references, to ensure that they survive the round trip through serialization and parsing. Specifically, CR, NEL and LINE SEPARATOR characters in text nodes </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output respectively as "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#xD;</span></code><span class="deltaxml-new" style="background:#90EE90">", "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#x85;</span></code><span class="deltaxml-new" style="background:#90EE90">", and "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#x2028;</span></code><span class="deltaxml-new" style="background:#90EE90">", or their equivalents; while CR, NL, TAB, NEL and LINE SEPARATOR characters in attribute nodes </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output respectively as "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#xD;</span></code><span class="deltaxml-new" style="background:#90EE90">", "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#xA;</span></code><span class="deltaxml-new" style="background:#90EE90">", "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#x9;</span></code><span class="deltaxml-new" style="background:#90EE90">", "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#x85;</span></code><span class="deltaxml-new" style="background:#90EE90">", and "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#x2028;</span></code><span class="deltaxml-new" style="background:#90EE90">", or their equivalents. In addition, the non-whitespace control characters #x1 through #x1F and #x7F through #x9F in text nodes and attribute nodes </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as character references. </span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, an attribute with the value "x" followed by "y" separated by a newline will result in the output </span><code><span class="deltaxml-new" style="background:#90EE90">"x&amp;#xA;y"</span></code><span class="deltaxml-new" style="background:#90EE90"> (or with any equivalent character reference). The XML output cannot be "x" followed by a literal newline followed by a "y" because after parsing, the attribute value would be </span><code><span class="deltaxml-new" style="background:#90EE90">"x y"</span></code><span class="deltaxml-new" style="background:#90EE90"> as a consequence of the XML attribute normalization rules.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">XML 1.0 did not permit an XML processor to normalize NEL or LINE SEPARATOR characters to a LINE FEED character. However, if a document entity that specifies version 1.1 invokes an external general parsed entity with no text declaration or a text declaration that specifies version 1.0, the external parsed entity is processed according to the rules of XML 1.1. For this reason, NEL and LINE SEPARATOR characters in text and attribute nodes </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> always be escaped using character references, regardless of the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. </span></p><p><span class="deltaxml-new" style="background:#90EE90"> XML 1.0 permitted control characters in the range #x7F through #x9F to appear as literal characters in an XML document, but XML 1.1 requires such characters, other than NEL, to be escaped as character references. An external general parsed entity with no text declaration or a text declaration that specifies a version pseudo-attribute with value </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90"> that is invoked by an XML 1.1 document entity </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> follow the rules of XML 1.1. Therefore, the non-whitespace control characters in the ranges #x1 through #x1F and #x7F through #x9F </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> always be escaped, regardless of the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. </span></p></div><p><span class="deltaxml-new" style="background:#90EE90">It is a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSEPM0004" title="err:SEPM0004"><span class="deltaxml-new" style="background:#90EE90">err:SEPM0004</span></a><span class="deltaxml-new" style="background:#90EE90">] to specify the doctype-system parameter, or to specify the standalone parameter with a value other than </span><code><span class="deltaxml-new" style="background:#90EE90">omit</span></code><span class="deltaxml-new" style="background:#90EE90">, if the instance of the data model contains text nodes or multiple element nodes as children of the root node. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> either signal the error, or recover by ignoring the request to output a document type declaration or </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p><div class="div2"><h3><a id="XML_PARAMS"></a><span class="deltaxml-new" style="background:#90EE90">5.1 The Influence of Serialization Parameters upon the XML Output Method</span></h3><div class="div3"><h4><a id="XML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">5.1.1 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies the version of XML and the version of Namespaces in XML to be used for outputting the instance of the data model. The version output in the XML declaration (if an XML declaration is not omitted) </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> correspond to the version of XML that the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> used for outputting the instance of the data model. The value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> match the </span><a href="https://www.w3.org/TR/REC-xml/#NT-VersionNum"><span class="deltaxml-new" style="background:#90EE90">VersionNum</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XML</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> production of the XML Recommendation </span><a href="#xml"><span class="deltaxml-new" style="background:#90EE90">[XML10]</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#xml11"><span class="deltaxml-new" style="background:#90EE90">[XML11]</span></a><span class="deltaxml-new" style="background:#90EE90">. A serialization error [</span><a href="#ERRSESU0013" title="err:SESU0013"><span class="deltaxml-new" style="background:#90EE90">err:SESU0013</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies a version of XML that is not supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">; the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p><p><span class="deltaxml-new" style="background:#90EE90">This document provides the normative definition of serialization for the XML output method if the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has either the value </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1.1</span></code><span class="deltaxml-new" style="background:#90EE90">. For any other value of </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, the behavior is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">. In that case the </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> behavior </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> supersede all other requirements of this recommendation.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the serialized result would contain an </span><a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName"><span class="deltaxml-new" style="background:#90EE90">NCName</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">Names</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> that contains a character that is not permitted by the version of Namespaces in XML specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0005" title="err:SERE0005"><span class="deltaxml-new" style="background:#90EE90">err:SERE0005</span></a><span class="deltaxml-new" style="background:#90EE90">] results. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the serialized result would contain a character that is not permitted by the version of XML specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0006" title="err:SERE0006"><span class="deltaxml-new" style="background:#90EE90">err:SERE0006</span></a><span class="deltaxml-new" style="background:#90EE90">] results. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example, if the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90">, and the instance of the data model contains a non-whitespace control character in the range #x1 to #x1F, a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0006" title="err:SERE0006"><span class="deltaxml-new" style="background:#90EE90">err:SERE0006</span></a><span class="deltaxml-new" style="background:#90EE90">] results. If the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">1.1</span></code><span class="deltaxml-new" style="background:#90EE90"> and a comment node in the instance of the data model contains a non-whitespace control character in the range #x1 to #x1F or a control character other than NEL in the range #x7F to #x9F, a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0006" title="err:SERE0006"><span class="deltaxml-new" style="background:#90EE90">err:SERE0006</span></a><span class="deltaxml-new" style="background:#90EE90">] results.</span></p></div></div><div class="div3"><h4><a id="XML_HTML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">5.1.2 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the XML output method. It is the responsibility of the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> to specify whether an error occurs if this parameter is specified in combination with the XML output method, or if the parameter is simply dropped.</span></p></div><div class="div3"><h4><a id="XML_ENCODING"></a><span class="deltaxml-new" style="background:#90EE90">5.1.3 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies the encoding to be used for outputting the instance of the data model. </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">Serializers</span></a><span class="deltaxml-new" style="background:#90EE90"> are </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to support values of </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0007" title="err:SESU0007"><span class="deltaxml-new" style="background:#90EE90">err:SESU0007</span></a><span class="deltaxml-new" style="background:#90EE90">] occurs if an output encoding other than </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90"> is requested and the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not support that encoding. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error, or recover by using </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90"> instead. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> use an encoding whose name does not match the </span><a href="https://www.w3.org/TR/REC-xml/#NT-EncName"><span class="deltaxml-new" style="background:#90EE90">EncName</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XML</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> production of the XML Recommendation </span><a href="#xml"><span class="deltaxml-new" style="background:#90EE90">[XML10]</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">When outputting a newline character in the instance of the data model, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is free to represent it using any character sequence that will be normalized to a newline character by an XML parser, unless a specific mapping for the newline character is provided in a character map (see </span><a href="#character-maps"><b><span class="deltaxml-new" style="background:#90EE90">11 Character Maps</span></b></a><span class="deltaxml-new" style="background:#90EE90">).</span></p><p><span class="deltaxml-new" style="background:#90EE90">When outputting any other character that is defined in the selected encoding, the character </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output using the correct representation of that character in the selected encoding.</span></p><p><span class="deltaxml-new" style="background:#90EE90">It is possible that the instance of the data model will contain a character that cannot be represented in the encoding that the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is using for output. In this case, if the character occurs in a context where XML recognizes character references (that is, in the value of an attribute node or text node), then the character </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as a character reference. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0008" title="err:SERE0008"><span class="deltaxml-new" style="background:#90EE90">err:SERE0008</span></a><span class="deltaxml-new" style="background:#90EE90">] occurs if such a character appears in a context where character references are not allowed (for example, if the character occurs in the name of an element). The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error. </span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example, if a text node contains the character LATIN SMALL LETTER E WITH ACUTE (#xE9), and the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">US-ASCII</span></code><span class="deltaxml-new" style="background:#90EE90">, the character </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be serialized as a character reference. If a comment node contains the same character, a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0008" title="err:SERE0008"><span class="deltaxml-new" style="background:#90EE90">err:SERE0008</span></a><span class="deltaxml-new" style="background:#90EE90">] results. </span></p></div></div><div class="div3"><h4><a id="xml-indent"></a><span class="deltaxml-new" style="background:#90EE90">5.1.4 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters control whether the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> adjust the whitespace in the serialized result so that a person will find it easier to read. If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> output whitespace characters in addition to the whitespace characters in the instance of the data model. It </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> also elide from the output whitespace characters that occurred in the instance of the data model or replace such whitespace characters with other whitespace characters.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="content" title="content"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The term </span><b><span class="deltaxml-new" style="background:#90EE90">content</span></b><span class="deltaxml-new" style="background:#90EE90"> has the same meaning as the term </span><a href="https://www.w3.org/TR/REC-xml/#dt-content"><span class="deltaxml-new" style="background:#90EE90">Content</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XML</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> defined in </span><a href="https://www.w3.org/TR/REC-xml/#sec-starttags"><span class="deltaxml-new" style="background:#90EE90">Section 3.1 Start-Tags, End-Tags, and Empty-Element Tags</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XML</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> of </span><a href="#xml"><span class="deltaxml-new" style="background:#90EE90">[XML10]</span></a><span class="deltaxml-new" style="background:#90EE90">.] [</span><a id="immediate-content" title="immediate content"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The </span><b><span class="deltaxml-new" style="background:#90EE90">immediate content</span></b><span class="deltaxml-new" style="background:#90EE90"> of an element is the part of the </span><a title="content" class="termref" href="#content"><span class="deltaxml-new" style="background:#90EE90">content</span></a><span class="deltaxml-new" style="background:#90EE90"> of the element that is not also in the </span><a title="content" class="termref" href="#content"><span class="deltaxml-new" style="background:#90EE90">content</span></a><span class="deltaxml-new" style="background:#90EE90"> of a child element of that element.] </span></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> output any additional, elide or replace whitespace characters. If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> use an algorithm for dealing with whitespace characters that satisfies all of the following constraints. If more than one constraint applies, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> apply the most restrictive constraint. That is, if any applicable constraint indicates that whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced, that constraint prevails; if an applicable constraint indicates that whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced, while all other applicable constraints indicate that whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced, whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced. </span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added adjacent to a text node only if the text node contains only whitespace characters. Whitespace characters in such a text node </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> also be elided or replaced. For example, a tab </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be inserted as a replacement for existing spaces.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced in the </span><a title="immediate content" class="termref" href="#immediate-content"><span class="deltaxml-new" style="background:#90EE90">immediate content</span></a><span class="deltaxml-new" style="background:#90EE90"> of an element whose type annotation is </span><code><span class="deltaxml-new" style="background:#90EE90">xs:untyped</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xs:anyType</span></code><span class="deltaxml-new" style="background:#90EE90"> and that has element node children, in the </span><a title="immediate content" class="termref" href="#immediate-content"><span class="deltaxml-new" style="background:#90EE90">immediate content</span></a><span class="deltaxml-new" style="background:#90EE90"> of an element whose content model is element only, or outside the </span><a title="content" class="termref" href="#content"><span class="deltaxml-new" style="background:#90EE90">content</span></a><span class="deltaxml-new" style="background:#90EE90"> of any element.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced in the </span><a title="immediate content" class="termref" href="#immediate-content"><span class="deltaxml-new" style="background:#90EE90">immediate content</span></a><span class="deltaxml-new" style="background:#90EE90"> of an element whose content model is known to be simple or empty.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced in places where the characters would constitute significant whitespace, for example, in the </span><a title="immediate content" class="termref" href="#immediate-content"><span class="deltaxml-new" style="background:#90EE90">immediate content</span></a><span class="deltaxml-new" style="background:#90EE90"> of an element that is annotated with a type other than </span><code><span class="deltaxml-new" style="background:#90EE90">xs:untyped</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xs:anyType</span></code><span class="deltaxml-new" style="background:#90EE90">, and whose content model is known to be mixed.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced in the </span><a title="content" class="termref" href="#content"><span class="deltaxml-new" style="background:#90EE90">content</span></a><span class="deltaxml-new" style="background:#90EE90"> of an element whose expanded QName is a member of the list of expanded QNames in the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added, elided or replaced in a part of the result document that is controlled by an </span><code><span class="deltaxml-new" style="background:#90EE90">xml:space</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute with value </span><code><span class="deltaxml-new" style="background:#90EE90">preserve</span></code><span class="deltaxml-new" style="background:#90EE90"> (See </span><a href="#xml"><span class="deltaxml-new" style="background:#90EE90">[XML10]</span></a><span class="deltaxml-new" style="background:#90EE90"> for more information about the </span><code><span class="deltaxml-new" style="background:#90EE90">xml:space</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute). </span></p></li></ul><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The effect of these rules is to ensure that whitespace is only added in places where (a) XSLT's </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:strip-space&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> declaration could cause it to be removed, and (b) it does not affect the </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90"> of any element node with simple content. It is usually not safe to indent document types that include elements with mixed content.</span></p></div><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The whitespace added may possibly be based on whitespace stripped from either the source document or the stylesheet (in the case of XSLT), or guided by other means that might depend on the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90">, in the case of an instance of the data model created using some other process.</span></p></div></div><div class="div3"><h4><a id="XML_CDATA-SECTION-ELEMENTS"></a><span class="deltaxml-new" style="background:#90EE90">5.1.5 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter contains a list of expanded QNames. If the expanded QName of the parent of a text node is a member of the list, then the text node </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as a CDATA section, except in those circumstances described below.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the text node contains the sequence of characters </span><code><span class="deltaxml-new" style="background:#90EE90">]]&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">, then the currently open CDATA section </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be closed following the </span><code><span class="deltaxml-new" style="background:#90EE90">]]</span></code><span class="deltaxml-new" style="background:#90EE90"> and a new CDATA section opened before the </span><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the text node contains characters that are not representable in the character encoding being used to output the instance of the data model, then the currently open CDATA section </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be closed before such characters, the characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output using character references or entity references, and a new CDATA section </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be opened for any further characters in the text node.</span></p><p><span class="deltaxml-new" style="background:#90EE90">CDATA sections </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be used except where they have been explicitly requested by the user, either by using the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, or by using some other </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> mechanism.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">This is phrased to permit an implementor to provide an option that attempts to preserve CDATA sections present in the source document.</span></p></div></div><div class="div3"><h4><a id="XML_OMIT-XML-DECLARATION"></a><span class="deltaxml-new" style="background:#90EE90">5.1.6 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The XML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output an XML declaration if the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">. The XML declaration </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> include both version information and an encoding declaration. If the </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the XML declaration </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> include a standalone document declaration with the same value as the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. If the </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">omit</span></code><span class="deltaxml-new" style="background:#90EE90">, the XML declaration </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> include a standalone document declaration; this ensures that it is both an XML declaration (allowed at the beginning of a document entity) and a text declaration (allowed at the beginning of an external general parsed entity).</span></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSEPM0009" title="err:SEPM0009"><span class="deltaxml-new" style="background:#90EE90">err:SEPM0009</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, and</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has a value other than </span><code><span class="deltaxml-new" style="background:#90EE90">omit</span></code><span class="deltaxml-new" style="background:#90EE90">; or </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has a value other than </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90"> and the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is specified.</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, if the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the XML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> output an XML declaration.</span></p></div><div class="div3"><h4><a id="XML_DOCTYPE"></a><span class="deltaxml-new" style="background:#90EE90">5.1.7 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is specified, the XML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output a document type declaration immediately before the first element. The name following </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;!DOCTYPE</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be the name of the first element, if any. If the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is also specified, then the XML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output </span><code><span class="deltaxml-new" style="background:#90EE90">PUBLIC</span></code><span class="deltaxml-new" style="background:#90EE90"> followed by the public identifier and then the system identifier; otherwise, it </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output </span><code><span class="deltaxml-new" style="background:#90EE90">SYSTEM</span></code><span class="deltaxml-new" style="background:#90EE90"> followed by the system identifier. The internal subset </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be empty. The </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be ignored unless the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is specified.</span></p></div><div class="div3"><h4><a id="xml-undeclare-NS"></a><span class="deltaxml-new" style="background:#90EE90">5.1.8 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The Data Model allows an element node that binds a non-empty prefix to have a child element node that does not bind that same prefix. In </span><em><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML 1.1</span></em><span class="deltaxml-new" style="background:#90EE90"> (</span><a href="#xml-names11"><span class="deltaxml-new" style="background:#90EE90">[XML Names 1.1]</span></a><span class="deltaxml-new" style="background:#90EE90">), this can be represented accurately by undeclaring prefixes. For the undeclaring prefix of the child element node, if the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the output method is XML or XHTML, and the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter value is greater than </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> undeclare its namespace. If the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90"> and the output method is XML or XHTML, then the undeclaration of prefixes </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> occur.</span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">Consider an element </span><code><span class="deltaxml-new" style="background:#90EE90">x:foo</span></code><span class="deltaxml-new" style="background:#90EE90"> with four in-scope namespaces that associate prefixes with URIs as follows: </span></p><ul><li><p><code><span class="deltaxml-new" style="background:#90EE90">x</span></code><span class="deltaxml-new" style="background:#90EE90"> is associated with </span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/x</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">y</span></code><span class="deltaxml-new" style="background:#90EE90"> is associated with </span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/y</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">z</span></code><span class="deltaxml-new" style="background:#90EE90"> is associated with </span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/z</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90"> is associated with </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/XML/1998/namespace</span></code></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">Suppose that it has a child element </span><code><span class="deltaxml-new" style="background:#90EE90">x:bar</span></code><span class="deltaxml-new" style="background:#90EE90"> with three in-scope namespaces:</span></p><ul><li><p><code><span class="deltaxml-new" style="background:#90EE90">x</span></code><span class="deltaxml-new" style="background:#90EE90"> is associated with </span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/x</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">y</span></code><span class="deltaxml-new" style="background:#90EE90"> is associated with </span><code><span class="deltaxml-new" style="background:#90EE90">http://example.org/y</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90"> is associated with </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/XML/1998/namespace</span></code></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">If namespace undeclaration is in effect, it will be serialized this way:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;x:foo xmlns:x="http://example.org/x" xmlns:y="http://example.org/y" xmlns:z="http://example.org/z"&gt; &lt;x:bar xmlns:z=""&gt;...&lt;/x:bar&gt; &lt;/x:foo&gt;</span></pre></div></div><p><span class="deltaxml-new" style="background:#90EE90">In </span><em><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML</span></em><span class="deltaxml-new" style="background:#90EE90"> 1.0 (</span><a href="#xml-names"><span class="deltaxml-new" style="background:#90EE90">[XML Names]</span></a><span class="deltaxml-new" style="background:#90EE90">), prefix undeclaration is not possible. If the output method is XML or XHTML, the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is </span><span><span class="deltaxml-new" style="background:#90EE90">one of</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, and the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90">, a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSEPM0010" title="err:SEPM0010"><span class="deltaxml-new" style="background:#90EE90">err:SEPM0010</span></a><span class="deltaxml-new" style="background:#90EE90">] results; the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p></div><div class="div3"><h4><a id="XML_NORMALIZATION-FORM"></a><span class="deltaxml-new" style="background:#90EE90">5.1.9 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the XML output method. The values </span><code><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">none</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0011" title="err:SESU0011"><span class="deltaxml-new" style="background:#90EE90">err:SESU0011</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies a normalization form that is not supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">; the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The meanings associated with the possible values of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter are as follows:</span></p><ul><li><p><code><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90"> specifies the serialized result will be in Normalization Form C, using the rules specified in </span><a href="#charmod-norm"><span class="deltaxml-new" style="background:#90EE90">[Character Model for the World Wide Web 1.0: Normalization]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">NFD</span></code><span class="deltaxml-new" style="background:#90EE90"> specifies the serialized result will be in Normalization Form D, as specified in </span><a href="#UNICODE-NORMALIZATION-FORM"><span class="deltaxml-new" style="background:#90EE90">[UAX #15: Unicode Normalization Forms]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">NFKC</span></code><span class="deltaxml-new" style="background:#90EE90"> specifies the serialized result will be in Normalization Form KC, as specified in </span><a href="#UNICODE-NORMALIZATION-FORM"><span class="deltaxml-new" style="background:#90EE90">[UAX #15: Unicode Normalization Forms]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">NFKD</span></code><span class="deltaxml-new" style="background:#90EE90"> specifies the serialized result will be in Normalization Form KD, as specified in </span><a href="#UNICODE-NORMALIZATION-FORM"><span class="deltaxml-new" style="background:#90EE90">[UAX #15: Unicode Normalization Forms]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">fully-normalized</span></code><span class="deltaxml-new" style="background:#90EE90"> specifies the serialized result will be in fully normalized text, as specified in </span><a href="#charmod-norm"><span class="deltaxml-new" style="background:#90EE90">[Character Model for the World Wide Web 1.0: Normalization]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">none</span></code><span class="deltaxml-new" style="background:#90EE90"> specifies that no </span><a title="Unicode Normalization" class="termref" href="#unicode-normalization"><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> will be applied.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> value has an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> effect.</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">If the value of the parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">fully-normalized</span></code><span class="deltaxml-new" style="background:#90EE90">, then no </span><em><span class="deltaxml-new" style="background:#90EE90">relevant construct</span></em><span class="deltaxml-new" style="background:#90EE90"> of the parsed entity created by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> may start with a composing character. The term </span><em><span class="deltaxml-new" style="background:#90EE90">relevant construct</span></em><span class="deltaxml-new" style="background:#90EE90"> has the meaning defined in section 2.13 of </span><a href="#xml11"><span class="deltaxml-new" style="background:#90EE90">[XML11]</span></a><span class="deltaxml-new" style="background:#90EE90">. If this condition is not satisfied, a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0012" title="err:SERE0012"><span class="deltaxml-new" style="background:#90EE90">err:SERE0012</span></a><span class="deltaxml-new" style="background:#90EE90">] </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be signaled.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">Specifying </span><code><span class="deltaxml-new" style="background:#90EE90">fully-normalized</span></code><span class="deltaxml-new" style="background:#90EE90"> as the value of this parameter does not guarantee that the XML document output by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> will in fact be fully normalized as defined in </span><a href="#xml11"><span class="deltaxml-new" style="background:#90EE90">[XML11]</span></a><span class="deltaxml-new" style="background:#90EE90">. This is because the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not check that the text is </span><code><span class="deltaxml-new" style="background:#90EE90">include normalized</span></code><span class="deltaxml-new" style="background:#90EE90">, which would involve checking all external entities that it refers to (such as an external DTD). Furthermore, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not check whether any character escape generated using character maps represents a composing character.</span></p></div></div><div class="div3"><h4><a id="XML_MEDIA-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">5.1.10 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the XML output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="XML_USE-CHARACTER-MAPS"></a><span class="deltaxml-new" style="background:#90EE90">5.1.11 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the XML output method. The result of serialization using the XML output method is not guaranteed to be well-formed XML if character maps have been specified. See </span><a href="#character-maps"><b><span class="deltaxml-new" style="background:#90EE90">11 Character Maps</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="XML_BYTE-ORDER-MARK"></a><span class="deltaxml-new" style="background:#90EE90">5.1.12 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the XML output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The byte order mark may be undesirable under certain circumstances; for example, to concatenate resulting XML fragments without additional processing to remove the byte order mark. Therefore this specification does not mandate the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter to have </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90"> when the encoding is UTF-16, even though the XML 1.0 and XML 1.1 specifications state that entities encoded in UTF-16 </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> begin with a byte order mark. Consequently, this specification does not guarantee that the resulting XML fragment, without a byte order mark, will not cause an error when processed by a conforming XML processor.</span></p></div></div><div class="div3"><h4><a id="XML_ESCAPE-URI-ATTRIBUTES"></a><span class="deltaxml-new" style="background:#90EE90">5.1.13 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the XML output method. It is the responsibility of the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> to specify whether an error occurs if this parameter is specified in combination with the XML output method, or if the parameter is simply dropped.</span></p></div><div class="div3"><h4><a id="XML_INCLUDE-CONTENT-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">5.1.14 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the XML output method. It is the responsibility of the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> to specify whether an error occurs if this parameter is specified in combination with the XML output method, or if the parameter is simply dropped.</span></p></div><div class="div3"><h4><a id="XML_ITEM-SEPARATOR"></a><span class="deltaxml-new" style="background:#90EE90">5.1.15 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The effect of the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is described in </span><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XML_ALLOW-DUPLICATE-NAMES"></a><span class="deltaxml-new" style="background:#90EE90">5.1.16 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the XML output method.</span></p></div><div class="div3"><h4><a id="XML_JSON-NODE-OUTPUT-METHOD"></a><span class="deltaxml-new" style="background:#90EE90">5.1.17 XML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the XML output method.</span></p></div></div></div><div class="div1"><h2><a id="xhtml-output"></a><span class="deltaxml-new" style="background:#90EE90">6 XHTML Output Method</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The XHTML output method serializes the instance of the data model as XML, using the HTML compatibility guidelines defined in the XHTML specification (</span><a href="#xhtml1"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> or the XHTML syntax of HTML5 (see </span><a href="#html5"><span class="deltaxml-new" style="background:#90EE90">[HTML5]</span></a><span class="deltaxml-new" style="background:#90EE90">).</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="recognized-as-HTML" title="recognized as an HTML element"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: An element node is </span><b><span class="deltaxml-new" style="background:#90EE90">recognized as an HTML element</span></b><span class="deltaxml-new" style="background:#90EE90"> by the XHTML output method if </span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the element node is in the </span><a title="XHTML namespace" class="termref" href="#xhtml-namespace"><span class="deltaxml-new" style="background:#90EE90">XHTML namespace</span></a><span class="deltaxml-new" style="background:#90EE90">, regardless of the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter or if the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent; or</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the element has a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">, and the local part of the name is equal to the name of an element defined by HTML5 </span><a href="#html5"><span class="deltaxml-new" style="background:#90EE90">[HTML5]</span></a><span class="deltaxml-new" style="background:#90EE90">, making the comparison </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">]</span></p><p><span class="deltaxml-new" style="background:#90EE90">It is entirely the responsibility of the person or process that creates the instance of the data model to ensure that the instance of the data model conforms to the </span><a href="#xhtml1"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#xhtml11"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.1]</span></a><span class="deltaxml-new" style="background:#90EE90"> specification if the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent or has a value less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90"> or the XHTML syntax of HTML5 if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">. It is not an error if the instance of the data model is invalid XHTML. Equally, it is entirely under the control of the person or process that creates the instance of the data model whether the output conforms to XHTML 1.0 Strict, XHTML 1.0 Transitional, the XHTML syntax of HTML5 (see </span><a href="#html5"><span class="deltaxml-new" style="background:#90EE90">[HTML5]</span></a><span class="deltaxml-new" style="background:#90EE90">), </span><a href="#html-polyglot"><span class="deltaxml-new" style="background:#90EE90">[POLYGLOT]</span></a><span class="deltaxml-new" style="background:#90EE90"> or any other specific definition of XHTML.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The serialization of the instance of the data model follows the same rules as for the XML output method, with the general exceptions noted below and parameter-specific exceptions in </span><a href="#XHTML_PARAMS"><b><span class="deltaxml-new" style="background:#90EE90">6.1 The Influence of Serialization Parameters upon the XHTML Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">. These differences are based on the HTML compatibility guidelines published in Appendix C of </span><a href="#xhtml1"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> and on </span><a href="#html-polyglot"><span class="deltaxml-new" style="background:#90EE90">[POLYGLOT]</span></a><span class="deltaxml-new" style="background:#90EE90">, both of which are designed to ensure that as far as possible, XHTML is rendered correctly on user agents designed originally to handle HTML.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the instance of the data model that is to be serialized is first subjected to </span><a title="PREFIXNORMALIZATION" class="termref" href="#PREFIXNORMALIZATION"><span class="deltaxml-new" style="background:#90EE90">prefix normalization</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="PREFIXNORMALIZATION" title="PREFIXNORMALIZATION"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: During </span><b><span class="deltaxml-new" style="background:#90EE90">prefix normalization</span></b><span class="deltaxml-new" style="background:#90EE90">, any element node in the instance of the data model that is to be serialized that is in one of the </span><a title="XHTML namespace" class="termref" href="#xhtml-namespace"><span class="deltaxml-new" style="background:#90EE90">XHTML namespace</span></a><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="SVG namespace" class="termref" href="#svg-namespace"><span class="deltaxml-new" style="background:#90EE90">SVG namespace</span></a><span class="deltaxml-new" style="background:#90EE90"> or the </span><a title="MathML namespace" class="termref" href="#mathml-namespace"><span class="deltaxml-new" style="background:#90EE90">MathML namespace</span></a><span class="deltaxml-new" style="background:#90EE90"> has its name replaced by the local part of its name. Such an element node is given a default namespace node whose value is the element's namespace URI. Any namespace node for any of those three namespaces that was previously present on any element node in the instance of the data model is also removed, unless the prefix that that namespace node declared is used as the prefix on the name of an attribute on that element or an ancestor of that element.]</span></p><p><span class="deltaxml-new" style="background:#90EE90"> The process of </span><a title="PREFIXNORMALIZATION" class="termref" href="#PREFIXNORMALIZATION"><span class="deltaxml-new" style="background:#90EE90">prefix normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> is equivalent to replacing the instance of the data model that is to be serialized with the result of the transformation described by this XSLT stylesheet, with the instance of the data model as the initial context item. </span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:stylesheet xmlns:xsl="http://www.w3.org/1999/XSL/Transform" version="3.0" xmlns:xhtml="http://www.w3.org/1999/xhtml" xmlns:svg="http://www.w3.org/2000/svg" xmlns:mathml="http://www.w3.org/1998/Math/MathML"&gt; &lt;xsl:template match="xhtml:*|svg:*|mathml:*"&gt; &lt;xsl:element name="{local-name()}" namespace="{namespace-uri()}"&gt; &lt;xsl:apply-templates select="@*|namespace::*|node()"/&gt; &lt;/xsl:element&gt; &lt;/xsl:template&gt; &lt;xsl:template match="node()|@*|namespace::*"&gt; &lt;xsl:copy copy-namespaces="no"&gt; &lt;xsl:apply-templates select="@*|namespace::*|node()"/&gt; &lt;/xsl:copy&gt; &lt;/xsl:template&gt; &lt;xsl:template match="namespace::*[. eq 'http://www.w3.org/1999/xhtml']| namespace::*[. eq 'http://www.w3.org/2000/svg']| namespace::*[. eq 'http://www.w3.org/1998/Math/MathML']"/&gt; &lt;/xsl:stylesheet&gt; </span></pre></div><ul><li><p><span class="deltaxml-new" style="background:#90EE90">[</span><a id="XHTMLEMPTY" title="EMPTY"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The following XHTML elements have an </span><b><span class="deltaxml-new" style="background:#90EE90">EMPTY</span></b><span class="deltaxml-new" style="background:#90EE90"> content model: </span><code><span class="deltaxml-new" style="background:#90EE90">area</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">base</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">br</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">col</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">embed</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">hr</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">img</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">input</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">link</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">basefont</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">frame</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">isindex</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code><span class="deltaxml-new" style="background:#90EE90">param</span></code><span class="deltaxml-new" style="background:#90EE90">.] [</span><a id="XHTMLVOID" title="void"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The </span><b><span class="deltaxml-new" style="background:#90EE90">void</span></b><span class="deltaxml-new" style="background:#90EE90"> elements of HTML5 are </span><code><span class="deltaxml-new" style="background:#90EE90">area</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">base</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">br</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">col</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">embed</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">hr</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">img</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">input</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">keygen</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">link</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">param</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">track</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">wbr</span></code><span class="deltaxml-new" style="background:#90EE90">.] [</span><a id="XHTMLEXPECTEDEMPTY" title="expected-empty"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: An element node is </span><b><span class="deltaxml-new" style="background:#90EE90">expected to be empty</span></b><span class="deltaxml-new" style="background:#90EE90"> if it is </span><a title="recognized as an HTML element" class="termref" href="#recognized-as-HTML"><span class="deltaxml-new" style="background:#90EE90">recognized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90"> and if either</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent or has a value less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90"> and the content model is </span><a title="EMPTY" class="termref" href="#XHTMLEMPTY"><span class="deltaxml-new" style="background:#90EE90">EMPTY</span></a><span class="deltaxml-new" style="background:#90EE90">, or</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90"> and the element is a </span><a title="void" class="termref" href="#XHTMLVOID"><span class="deltaxml-new" style="background:#90EE90">void</span></a><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">]</span></p><p><span class="deltaxml-new" style="background:#90EE90"> If an element node that has no child nodes is not </span><a title="expected-empty" class="termref" href="#XHTMLEXPECTEDEMPTY"><span class="deltaxml-new" style="background:#90EE90">expected to be empty</span></a><span class="deltaxml-new" style="background:#90EE90">, </span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90"> the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent or has a value less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, and the content model of the HTML element is not </span><a title="EMPTY" class="termref" href="#XHTMLEMPTY"><span class="deltaxml-new" style="background:#90EE90">EMPTY</span></a><span class="deltaxml-new" style="background:#90EE90"> (for example, an empty title or paragraph); or</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, and the HTML element is not a </span><a title="void" class="termref" href="#XHTMLVOID"><span class="deltaxml-new" style="background:#90EE90">void</span></a><span class="deltaxml-new" style="background:#90EE90"> element, </span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90"> the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> use the minimized form. That is, it </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;p&gt;&lt;/p&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> and not </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;p&nbsp;/&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If an element that has no children is </span><a title="expected-empty" class="termref" href="#XHTMLEXPECTEDEMPTY"><span class="deltaxml-new" style="background:#90EE90">expected to be empty</span></a><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> use the minimized tag syntax, for example </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;br&nbsp;/&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">, as the alternative syntax </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;br&gt;&lt;/br&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> allowed by XML gives uncertain results in many legacy user agents. If the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent or has a value less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> include a space before the trailing </span><code><span class="deltaxml-new" style="background:#90EE90">/&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">, e.g. </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;br&nbsp;/&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;hr&nbsp;/&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;img&nbsp;src="karen.jpg"&nbsp;alt="Karen"&nbsp;/&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> If the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent or has a value less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> use the entity reference </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;apos;</span></code><span class="deltaxml-new" style="background:#90EE90"> which, although defined in XML and therefore in XHTML, is not defined in versions of HTML prior to HTML5, and is not recognized by all HTML user agents.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent or has a value less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD</span></strong><span class="deltaxml-new" style="background:#90EE90"> output namespace declarations in a way that is consistent with the requirements of the XHTML DTD if this is possible. If the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD</span></strong><span class="deltaxml-new" style="background:#90EE90"> output namespace declarations in a way that is consistent with the requirements of </span><a href="#html-polyglot"><span class="deltaxml-new" style="background:#90EE90">[POLYGLOT]</span></a><span class="deltaxml-new" style="background:#90EE90">. The XHTML 1.0 DTDs require the declaration </span><code><span class="deltaxml-new" style="background:#90EE90">xmlns="http://www.w3.org/1999/xhtml"</span></code><span class="deltaxml-new" style="background:#90EE90"> to appear on the </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90"> element, and only on the </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90"> element. The </span><a href="#html-polyglot"><span class="deltaxml-new" style="background:#90EE90">[POLYGLOT]</span></a><span class="deltaxml-new" style="background:#90EE90"> specification permits namespace declarations to appear in a conforming document, but </span><span><span class="deltaxml-new" style="background:#90EE90">restricts the elements on which</span></span><span class="deltaxml-new" style="background:#90EE90"> they can appear. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output namespace declarations that are consistent with the namespace nodes present in the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90">, but it </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> avoid outputting redundant namespace declarations on elements where the DTD would make them invalid, for versions prior to HTML5, or where they are not permitted by </span><a href="#html-polyglot"><span class="deltaxml-new" style="background:#90EE90">[POLYGLOT]</span></a><span class="deltaxml-new" style="background:#90EE90">, for serialization according to the syntax of HTML5.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90"> element is generated by an XSLT literal result element of the form </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;html xmlns="http://www.w3.org/1999/xhtml"&gt; ... &lt;/html&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">, or by an XQuery direct element constructor of the same form, then the </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90"> element in the result document will have a node name whose prefix is "", which will satisfy the requirements of the DTD. In other cases the prefix assigned to the element is implementation-dependent.</span></p></div></li></ul><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><a href="#html-polyglot"><span class="deltaxml-new" style="background:#90EE90">[POLYGLOT]</span></a><span class="deltaxml-new" style="background:#90EE90"> and Appendix C of </span><a href="#xhtml1"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> describe a number of compatibility guidelines for users of XHTML who wish to render their XHTML documents with HTML user agents. In some cases, such as the guideline on the form empty elements take, only the serialization process itself has the ability to follow the guideline. In such cases, those guidelines are reflected in the requirements on the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> described above.</span></p><p><span class="deltaxml-new" style="background:#90EE90">In all other cases, the guidelines can be adhered to by the instance of the data model that is input to the serialization process. The guideline on the use of whitespace characters in attribute values is one such example. Another example is that </span><code><span class="deltaxml-new" style="background:#90EE90">xml:lang="..."</span></code><span class="deltaxml-new" style="background:#90EE90"> does not serialize to both </span><code><span class="deltaxml-new" style="background:#90EE90">xml:lang="..."</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">lang="..."</span></code><span class="deltaxml-new" style="background:#90EE90"> as required by some legacy user agents. It is the responsibility of the person or process that creates the instance of the data model that is input to the serialization process to ensure it is created in a way that is consistent with the guidelines. No </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> results if the input instance of the data model does not adhere to the guidelines.</span></p></div><div class="div2"><h3><a id="XHTML_PARAMS"></a><span class="deltaxml-new" style="background:#90EE90">6.1 The Influence of Serialization Parameters upon the XHTML Output Method</span></h3><div class="div3"><h4><a id="XHTML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">6.1.1 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#XML_VERSION"><b><span class="deltaxml-new" style="background:#90EE90">5.1.1 XML Output Method: the version Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_HTML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">6.1.2 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies whether the XHTML output method will produce a serialized document following rules that are tailored to the requirements of the XHTML syntax of </span><a href="#html5"><span class="deltaxml-new" style="background:#90EE90">[HTML5]</span></a><span class="deltaxml-new" style="background:#90EE90"> or the requirements of </span><a href="#xhtml1"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#xhtml11"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.1]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The differences are described in detail throughout </span><a href="#xhtml-output"><b><span class="deltaxml-new" style="background:#90EE90">6 XHTML Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_ENCODING"></a><span class="deltaxml-new" style="background:#90EE90">6.1.3 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#XML_ENCODING"><b><span class="deltaxml-new" style="background:#90EE90">5.1.3 XML Output Method: the encoding Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_INDENT"></a><span class="deltaxml-new" style="background:#90EE90">6.1.4 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> add or remove whitespace as it serializes the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90">, if it observes the following constraints.</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added other than before or after an element, or adjacent to an existing whitespace character.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added or removed adjacent to an inline element. The inline elements are those elements </span><a title="recognized as an HTML element" class="termref" href="#recognized-as-HTML"><span class="deltaxml-new" style="background:#90EE90">recognized as HTML elements</span></a><span class="deltaxml-new" style="background:#90EE90"> that are in the %inline category of any of the XHTML 1.0 DTDs, in the %inline.class category of the XHTML 1.1 DTD, those elements defined to be phrasing elements in HTML5 and elements </span><a title="recognized as an HTML element" class="termref" href="#recognized-as-HTML"><span class="deltaxml-new" style="background:#90EE90">recognized as HTML elements</span></a><span class="deltaxml-new" style="background:#90EE90"> with local names </span><code><span class="deltaxml-new" style="background:#90EE90">ins</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">del</span></code><span class="deltaxml-new" style="background:#90EE90"> if they are used as inline elements (i.e., if they do not contain element children).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added or removed inside a formatted element, the formatted elements being those </span><a title="recognized as an HTML element" class="termref" href="#recognized-as-HTML"><span class="deltaxml-new" style="background:#90EE90">recognized as HTML elements</span></a><span class="deltaxml-new" style="background:#90EE90"> with local names </span><code><span class="deltaxml-new" style="background:#90EE90">pre</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">script</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">style</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">title</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code><span class="deltaxml-new" style="background:#90EE90">textarea</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added in the content of an element whose expanded QName matches a member of the list of expanded QNames in the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. The expanded QName of an element node is considered to match a member of the list of expanded QNames if:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the two expanded QNames are equal;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the expanded QNames both have </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URIs</span></a><span class="deltaxml-new" style="background:#90EE90">, and the local parts of the two QNames are equal </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90">; or </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the local parts of the two QNames are equal </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90"> and one QName has a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90"> and the namespace URI of the other is equal to the </span><a title="XHTML namespace" class="termref" href="#xhtml-namespace"><span class="deltaxml-new" style="background:#90EE90">XHTML namespace</span></a><span class="deltaxml-new" style="background:#90EE90"> URI.</span></p></li></ul></li></ul><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The effect of the above constraints is to ensure any insertion or deletion of whitespace would not affect how an HTML user agent that conforms to the specified version of HTML would render the output, assuming the serialized document does not refer to any HTML style sheets.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The HTML definition of whitespace is different from the XML definition: see section 9.1 of </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> 4.01 specification.</span></p></div></div><div class="div3"><h4><a id="XHTML_CDATA-SECTION-ELEMENTS"></a><span class="deltaxml-new" style="background:#90EE90">6.1.5 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#XML_CDATA-SECTION-ELEMENTS"><b><span class="deltaxml-new" style="background:#90EE90">5.1.5 XML Output Method: the cdata-section-elements Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_OMIT-XML-DECLARATION"></a><span class="deltaxml-new" style="background:#90EE90">6.1.6 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters for the XHTML output method is described in </span><a href="#XML_OMIT-XML-DECLARATION"><b><span class="deltaxml-new" style="background:#90EE90">5.1.6 XML Output Method: the omit-xml-declaration and standalone Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">As with the XML output method, the XHTML output method specifies that an XML declaration will be output unless it is suppressed using the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. Appendix C.1 of </span><a href="#xhtml1"><span class="deltaxml-new" style="background:#90EE90">[XHTML 1.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> provides advice on the consequences of including, or omitting, the XML declaration.</span></p></div></div><div class="div3"><h4><a id="XHTML_DOCTYPE"></a><span class="deltaxml-new" style="background:#90EE90">6.1.7 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">If the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is absent, the first element node child of the document node that is to be serialized is </span><a title="recognized as an HTML element" class="termref" href="#recognized-as-HTML"><span class="deltaxml-new" style="background:#90EE90">recognized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">, the local part of the QName of which is equal to the string </span><code><span class="deltaxml-new" style="background:#90EE90">HTML</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90">, and any text node preceding that element in document order contains only whitespace characters, then the XHTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output a document type declaration immediately before the first element, with no public or system identifier. The name following </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;!DOCTYPE</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be the same as the local part of the name of the element.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Otherwise, the behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters for the XHTML output method is described in </span><a href="#XML_DOCTYPE"><b><span class="deltaxml-new" style="background:#90EE90">5.1.7 XML Output Method: the doctype-system and doctype-public Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_UNDECLARE-PREFIXES"></a><span class="deltaxml-new" style="background:#90EE90">6.1.8 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#xml-undeclare-NS"><b><span class="deltaxml-new" style="background:#90EE90">5.1.8 XML Output Method: the undeclare-prefixes Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_NORMALIZATION-FORM"></a><span class="deltaxml-new" style="background:#90EE90">6.1.9 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#XML_NORMALIZATION-FORM"><b><span class="deltaxml-new" style="background:#90EE90">5.1.9 XML Output Method: the normalization-form Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_MEDIA-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">6.1.10 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#XML_MEDIA-TYPE"><b><span class="deltaxml-new" style="background:#90EE90">5.1.10 XML Output Method: the media-type Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_USE-CHARACTER-MAPS"></a><span class="deltaxml-new" style="background:#90EE90">6.1.11 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#XML_USE-CHARACTER-MAPS"><b><span class="deltaxml-new" style="background:#90EE90">5.1.11 XML Output Method: the use-character-maps Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_BYTE-ORDER-MARK"></a><span class="deltaxml-new" style="background:#90EE90">6.1.12 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The behavior for </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XHTML output method is described in </span><a href="#XML_BYTE-ORDER-MARK"><b><span class="deltaxml-new" style="background:#90EE90">5.1.12 XML Output Method: the byte-order-mark Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_ESCAPE-URI-ATTRIBUTES"></a><span class="deltaxml-new" style="background:#90EE90">6.1.13 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90"> If the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the XHTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> apply </span><a title="URI Escaping" class="termref" href="#uri-escaping"><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></a><span class="deltaxml-new" style="background:#90EE90"> to </span><a title="URI attribute values" class="termref" href="#uri-attribute-values"><span class="deltaxml-new" style="background:#90EE90">URI attribute values</span></a><span class="deltaxml-new" style="background:#90EE90">, except that relative URIs </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be absolutized.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">This escaping is deliberately confined to non-ASCII characters, because escaping of ASCII characters is not always appropriate, for example when URIs or URI fragments are interpreted locally by the HTML user agent. Even in the case of non-ASCII characters, escaping can sometimes cause problems. More precise control of </span><a title="URI Escaping" class="termref" href="#uri-escaping"><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></a><span class="deltaxml-new" style="background:#90EE90"> is therefore available by setting </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> to </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, and controlling the escaping of URIs by using methods defined in </span><a href="https://www.w3.org/TR/xpath-functions-31/#func-encode-for-uri"><span class="deltaxml-new" style="background:#90EE90">Section 6.2 fn:encode-for-uri </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="https://www.w3.org/TR/xpath-functions-31/#func-iri-to-uri"><span class="deltaxml-new" style="background:#90EE90">Section 6.3 fn:iri-to-uri </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></div><div class="div3"><h4><a id="XHTML_INCLUDE-CONTENT-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">6.1.14 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">If the instance of the data model includes a </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element </span><a title="recognized as an HTML element" class="termref" href="#recognized-as-HTML"><span class="deltaxml-new" style="background:#90EE90">recognized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">, and the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the XHTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> add a </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element as the first child element of the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element, specifying the character encoding actually used. </span><span><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element </span><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD</span></strong><span class="deltaxml-new" style="background:#90EE90"> be in no namespace if the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element is in no namespace, and in the XHTML namespace if the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element is in the XHTML namespace.</span></span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example,</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;head&gt; &lt;meta http-equiv="Content-Type" content="text/html; charset=EUC-JP" /&gt; ...</span></pre></div></div><p><span class="deltaxml-new" style="background:#90EE90">The content type </span><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD</span></strong><span class="deltaxml-new" style="background:#90EE90"> be set to the value given for the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">It is recommended that the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> use as default value for this parameter one of the MIME types (</span><a href="#RFC2046"><span class="deltaxml-new" style="background:#90EE90">[RFC2046]</span></a><span class="deltaxml-new" style="background:#90EE90">) registered for XHTML. Currently, these are </span><code><span class="deltaxml-new" style="background:#90EE90">text/html</span></code><span class="deltaxml-new" style="background:#90EE90"> (registered by </span><a href="#RFC2854"><span class="deltaxml-new" style="background:#90EE90">[RFC2854]</span></a><span class="deltaxml-new" style="background:#90EE90">) and </span><code><span class="deltaxml-new" style="background:#90EE90">application/xhtml+xml</span></code><span class="deltaxml-new" style="background:#90EE90"> (registered by </span><a href="#RFC3236"><span class="deltaxml-new" style="background:#90EE90">[RFC3236]</span></a><span class="deltaxml-new" style="background:#90EE90">). Note that some user agents fail to recognize the charset parameter if the content type is not </span><code><span class="deltaxml-new" style="background:#90EE90">text/html</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element has been added to the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element as described above, then any existing </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element child of the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element having an </span><code><span class="deltaxml-new" style="background:#90EE90">http-equiv</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute with the value "Content-Type", making the comparison </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90"> after first stripping leading and trailing spaces from the value of the attribute solely for the purposes of comparison, </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be discarded. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">This process removes possible parameters in the attribute value. For example,</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;meta http-equiv="Content-Type" content="text/html;version='3.0'" /&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">in the data model instance would be replaced by,</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8" /&gt;</span></pre></div></div></div><div class="div3"><h4><a id="XHTML_ITEM-SEPARATOR"></a><span class="deltaxml-new" style="background:#90EE90">6.1.15 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The effect of the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is described in </span><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="XHTML_ALLOW-DUPLICATE-NAMES"></a><span class="deltaxml-new" style="background:#90EE90">6.1.16 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the XHTML output method.</span></p></div><div class="div3"><h4><a id="XHTML_JSON-NODE-OUTPUT-METHOD"></a><span class="deltaxml-new" style="background:#90EE90">6.1.17 XHTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the XHTML output method.</span></p></div></div></div><div class="div1"><h2><a id="html-output"></a><span class="deltaxml-new" style="background:#90EE90">7 HTML Output Method</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The HTML output method serializes the instance of the data model as HTML.</span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example, the following XSL stylesheet generates html output,</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xsl:stylesheet version="2.0" xmlns:xsl="http://www.w3.org/1999/XSL/Transform"&gt; &lt;xsl:output method="html" version="4.0"/&gt; &lt;xsl:template match="/"&gt; &lt;html&gt; &lt;xsl:apply-templates/&gt; &lt;/html&gt; &lt;/xsl:template&gt; ... &lt;/xsl:stylesheet&gt;</span></pre></div></div><p><span class="deltaxml-new" style="background:#90EE90">In the example, the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute of the </span><code><span class="deltaxml-new" style="background:#90EE90">xsl:output</span></code><span class="deltaxml-new" style="background:#90EE90"> element indicates the version of the HTML Recommendation </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> to which the serialized result is to conform.</span></p><p><span class="deltaxml-new" style="background:#90EE90">It is entirely the responsibility of the person or process that creates the instance of the data model to ensure that the instance of the data model conforms to the HTML Recommendation </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90">. It is not an error if the instance of the data model is invalid HTML. Equally, it is entirely under the control of the person or process that creates the instance of the data model whether the output conforms to HTML. If the result tree is valid HTML, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> serialize the result in a way that conforms with the version of HTML specified by the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="div2"><h3><a id="HTML_MARKUP"></a><span class="deltaxml-new" style="background:#90EE90">7.1 Markup for Elements</span></h3><p><span class="deltaxml-new" style="background:#90EE90">As is described in detail below, the HTML output method will not output an element differently from the XML output method unless the element is to be </span><a title="serialized as an HTML element" class="termref" href="#serialize-as-HTML"><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">. [</span><a id="XML-ISLAND" title="XML Island"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: The portion of the serialized document representing the result of serializing an element, that is not to be </span><a title="serialized as an HTML element" class="termref" href="#serialize-as-HTML"><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">, is known as an </span><b><span class="deltaxml-new" style="background:#90EE90">XML Island.</span></b><span class="deltaxml-new" style="background:#90EE90">] [</span><a id="serialize-as-HTML" title="serialized as an HTML element"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: An element node is </span><b><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></b><span class="deltaxml-new" style="background:#90EE90"> if</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the expanded QName of the element has a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">, regardless of the value of the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90">, or </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the value of the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90"> or greater, and the element node is in the </span><a title="XHTML namespace" class="termref" href="#xhtml-namespace"><span class="deltaxml-new" style="background:#90EE90">XHTML namespace</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90">]</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the element is to be </span><a title="serialized as an HTML element" class="termref" href="#serialize-as-HTML"><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">, but the local part of the expanded QName is not recognized as the name of an HTML element, the element </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output in the same way as a non-empty, inline element such as </span><code><span class="deltaxml-new" style="background:#90EE90">span</span></code><span class="deltaxml-new" style="background:#90EE90">. In particular:</span></p><ol class="enumar"><li><p><span class="deltaxml-new" style="background:#90EE90"> Any namespace node in the result tree for the </span><a title="XML namespace" class="termref" href="#xml-namespace"><span class="deltaxml-new" style="background:#90EE90">XML namespace</span></a><span class="deltaxml-new" style="background:#90EE90">, is ignored by the HTML output method. In addition, if the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, any element node that has a prefix and is in the </span><a title="XHTML namespace" class="termref" href="#xhtml-namespace"><span class="deltaxml-new" style="background:#90EE90">XHTML namespace</span></a><span class="deltaxml-new" style="background:#90EE90">, </span><a title="MathML namespace" class="termref" href="#mathml-namespace"><span class="deltaxml-new" style="background:#90EE90">MathML namespace</span></a><span class="deltaxml-new" style="background:#90EE90">, or </span><a title="SVG namespace" class="termref" href="#svg-namespace"><span class="deltaxml-new" style="background:#90EE90">SVG namespace</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be serialized with an unprefixed element name. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> serialize an attribute with the name </span><code><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90"> whose value is equal to the namespace URI of the element node, unless an ancestor element in the serialized result already has an attribute named </span><code><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90"> with the same value, and no intervening element has an attribute named </span><code><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90"> with a different value. If the element node has a namespace node for the default namespace whose value is not equal to the namespace URI of the element node, the namespace node is ignored. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> serialize a namespace declaration for the namespace node declaring the element node's prefix, unless an attribute of the element node has the same prefix. For namespace nodes in the result tree that are not ignored, the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> represent these namespaces using attributes named </span><code><span class="deltaxml-new" style="background:#90EE90">xmlns</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xmlns:</span></code><em><span class="deltaxml-new" style="background:#90EE90">prefix</span></em><span class="deltaxml-new" style="background:#90EE90"> in the same way as the XML output method would represent them when the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is set to </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">If the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90"> contains elements or attributes whose names have a </span><a title="non-null namespace URI" class="termref" href="#non-null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">non-null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">, the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> generate namespace-prefixed QNames for these nodes in the same way as the XML output method would do when the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is set to </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Where special rules are defined later in this section for serializing specific HTML elements and attributes, these rules </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be applied to an element that is not to be </span><a title="serialized as an HTML element" class="termref" href="#serialize-as-HTML"><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90"> or an attribute whose name has a </span><a title="non-null namespace URI" class="termref" href="#non-null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">non-null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90">. However, the generic rules for the HTML output method that apply to all elements and attributes, for example the rules for escaping special characters in the text and the rules for indentation, </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be used also for namespaced elements and attributes.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When serializing an element whose name is not defined in the HTML specification, but that is to be </span><a title="serialized as an HTML element" class="termref" href="#serialize-as-HTML"><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">, the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> apply the same rules (for example, indentation rules) as when serializing a </span><code><span class="deltaxml-new" style="background:#90EE90">span</span></code><span class="deltaxml-new" style="background:#90EE90"> element. The descendants of such an element </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be serialized as if they were descendants of a </span><code><span class="deltaxml-new" style="background:#90EE90">span</span></code><span class="deltaxml-new" style="background:#90EE90"> element.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">When serializing an element whose name is in a non-null namespace, the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> apply the same rules (for example, indentation rules) as when serializing a </span><code><span class="deltaxml-new" style="background:#90EE90">div</span></code><span class="deltaxml-new" style="background:#90EE90"> element. The descendants of such an element </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be serialized as if they were descendants of a </span><code><span class="deltaxml-new" style="background:#90EE90">div</span></code><span class="deltaxml-new" style="background:#90EE90"> element, except for the influence of the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter on any text node children of the element. </span></p></li></ol><p><span class="deltaxml-new" style="background:#90EE90">The HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> output an end-tag for an empty element if the element type has an empty content model, and the value of the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> is less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, or the element is a void element and the value of the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">For HTML 4.0, the element types that have an empty content model are </span><code><span class="deltaxml-new" style="background:#90EE90">area</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">base</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">basefont</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">br</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">col</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">embed</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">frame</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">hr</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">img</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">input</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">isindex</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">link</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">param</span></code><span class="deltaxml-new" style="background:#90EE90">. For HTML5, the void elements are </span><code><span class="deltaxml-new" style="background:#90EE90">area</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">base</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">br</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">col</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">embed</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">hr</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">img</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">input</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">keygen</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">link</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">param</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">source</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">track</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">wbr</span></code><span class="deltaxml-new" style="background:#90EE90">. It is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> whether the </span><code><span class="deltaxml-new" style="background:#90EE90">basefont</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">frame</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">isindex</span></code><span class="deltaxml-new" style="background:#90EE90"> elements, which are not part of HTML5 are considered to be void elements when the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> has the value </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p><p><span class="deltaxml-new" style="background:#90EE90">For example, an element written as </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;br/&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;br&gt;&lt;/br&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> in an XSLT stylesheet </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;br&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The markup generation step of the </span><a title="" class="termref" href="#serphases"><span class="deltaxml-new" style="background:#90EE90">phases of serialization</span></a><span class="deltaxml-new" style="background:#90EE90"> only creates start tags and end tags for the HTML output method, never XML-style empty element tags. As such, a </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> serialize an HTML element that has no children, but whose content model is not empty, using a pair of adjacent start and end element tags, or as a solitary start tag if permitted by the context. </span></p></div><p><span class="deltaxml-new" style="background:#90EE90">For any element node that is to be </span><a title="serialized as an HTML element" class="termref" href="#serialize-as-HTML"><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">, the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> compare the local part of the name of the element node with the names of HTML elements making the comparison </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90">. If the local part of the name of the element node compares equal to that of any HTML element, the element node </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be recognized as being that kind of HTML element. For example, elements named </span><code><span class="deltaxml-new" style="background:#90EE90">br</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">BR</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">Br</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> all be recognized as the HTML </span><code><span class="deltaxml-new" style="background:#90EE90">br</span></code><span class="deltaxml-new" style="background:#90EE90"> element and output without an end-tag.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> perform escaping for any text node descendant, nor for any attribute of an element node descendant, of a </span><code><span class="deltaxml-new" style="background:#90EE90">script</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">style</span></code><span class="deltaxml-new" style="background:#90EE90"> element. </span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example, a </span><code><span class="deltaxml-new" style="background:#90EE90">script</span></code><span class="deltaxml-new" style="background:#90EE90"> element created by an XQuery direct element constructor or an XSLT literal result element, such as:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;script&gt;if (a &amp;lt; b) foo()&lt;/script&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">or</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;script&gt;&lt;![CDATA[if (a &lt; b) foo()]]&gt;&lt;/script&gt;</span></pre></div><p><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;script&gt;if (a &lt; b) foo()&lt;/script&gt;</span></pre></div></div><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">A common requirement is to output a </span><code><span class="deltaxml-new" style="background:#90EE90">script</span></code><span class="deltaxml-new" style="background:#90EE90"> element as shown in the example below:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;script type="application/ecmascript"&gt; document.write ("&lt;em&gt;This won't work&lt;/em&gt;") &lt;/script&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">This is invalid HTML, for the reasons explained in section B.3.2 of the </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> 4.01 specification. Nevertheless, it is possible to output this fragment, using either of the following constructs:</span></p><p><span class="deltaxml-new" style="background:#90EE90">Firstly, by use of a </span><code><span class="deltaxml-new" style="background:#90EE90">script</span></code><span class="deltaxml-new" style="background:#90EE90"> element created by an XQuery direct element constructor or an XSLT literal result element:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;script type="application/ecmascript"&gt; document.write ("&lt;em&gt;This won't work&lt;/em&gt;") &lt;/script&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">Secondly, by constructing the markup from ordinary text characters:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;script type="application/ecmascript"&gt; document.write ("&amp;lt;em&amp;gt;This won't work&amp;lt;/em&amp;gt;") &lt;/script&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">As the </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> specification points out, the correct way to write this is to use the escape conventions for the specific scripting language. For JavaScript, it can be written as:</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;script type="application/ecmascript"&gt; document.write ("&amp;lt;em&amp;gt;This will work&amp;lt;\/em&amp;gt;") &lt;/script&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">The </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> 4.01 specification also shows examples of how to write this in various other scripting languages. The escaping </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be done manually; it will not be done by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></div><div class="div2"><h3><a id="HTML_ATTRIBS"></a><span class="deltaxml-new" style="background:#90EE90">7.2 Writing Attributes</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> escape "</span><code><span class="deltaxml-new" style="background:#90EE90">&lt;</span></code><span class="deltaxml-new" style="background:#90EE90">" characters occurring in attribute values.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A boolean attribute is an attribute with only a single allowed value in any of the HTML DTDs or that is specified to be a boolean attribute by HTML5 (see </span><a href="#html5"><span class="deltaxml-new" style="background:#90EE90">[HTML5]</span></a><span class="deltaxml-new" style="background:#90EE90">), where the allowed value is equal without regard to case to the name of the attribute. The HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output any boolean attribute in minimized form if and only if the value of the attribute node actually is equal to the name of the attribute making the comparison </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example, a start-tag created using the following XQuery direct element constructor or XSLT literal result element</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;OPTION selected="selected"&gt;</span></pre></div><p><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;OPTION selected&gt;</span></pre></div></div><p><span class="deltaxml-new" style="background:#90EE90">The HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> escape a </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;</span></code><span class="deltaxml-new" style="background:#90EE90"> character occurring in an attribute value immediately followed by a </span><code><span class="deltaxml-new" style="background:#90EE90">{</span></code><span class="deltaxml-new" style="background:#90EE90"> character (see </span><a href="http://www.w3.org/TR/REC-html40/appendix/notes.html#h-B.7.1.1"><span class="deltaxml-new" style="background:#90EE90">Section B.7.1</span></a><span class="deltaxml-new" style="background:#90EE90"> of the HTML Recommendation </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90">).</span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example, a start-tag created using the following XQuery direct element constructor or XSLT literal result element</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;BODY bgcolor='&amp;amp;{{randomrbg}};'&gt;</span></pre></div><p><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;BODY bgcolor='&amp;{randomrbg};'&gt;</span></pre></div></div><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#HTML_PARAMS"><b><span class="deltaxml-new" style="background:#90EE90">7.4 The Influence of Serialization Parameters upon the HTML Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for additional directives on how attributes </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be written.</span></p></div><div class="div2"><h3><a id="HTML_CHARDATA"></a><span class="deltaxml-new" style="background:#90EE90">7.3 Writing Character Data</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> output a character using a character entity reference in preference to using a numeric character reference, if an entity is defined for the character in the version of HTML that the output method is using. Entity references and character references </span><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD</span></strong><span class="deltaxml-new" style="background:#90EE90"> be used only where the character is not present in the selected encoding, or where the visual representation of the character is unclear (as with </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;nbsp;</span></code><span class="deltaxml-new" style="background:#90EE90">, for example).</span></p><p><span class="deltaxml-new" style="background:#90EE90">When outputting a sequence of </span><a title="whitespace character" class="termref" href="#whitespace-char"><span class="deltaxml-new" style="background:#90EE90">whitespace characters</span></a><span class="deltaxml-new" style="background:#90EE90"> in the instance of the data model, within an element where whitespace characters are treated normally (but not in elements such as </span><code><span class="deltaxml-new" style="background:#90EE90">pre</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">textarea</span></code><span class="deltaxml-new" style="background:#90EE90">), the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> represent it using any sequence of whitespace characters that will be treated in the same way by an HTML user agent. See section 3.5 of </span><a href="#xhtml-modularization"><span class="deltaxml-new" style="background:#90EE90">[XHTML Modularization]</span></a><span class="deltaxml-new" style="background:#90EE90"> for some additional information on handling of whitespace by an HTML user agent for versions of HTML prior to HTML5, and see the </span><a href="#html5"><span class="deltaxml-new" style="background:#90EE90">[HTML5]</span></a><span class="deltaxml-new" style="background:#90EE90"> for information on the handling of whitespace characters by an HTML5 user agent. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The terms space character and white_space character defined in HTML5 do not match the definition of </span><a title="whitespace character" class="termref" href="#whitespace-char"><span class="deltaxml-new" style="background:#90EE90">whitespace character</span></a><span class="deltaxml-new" style="background:#90EE90"> in this specification.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">Certain characters are permitted in XML, but not in HTML prior to HTML5 — for example, the control characters #x7F-#x9F, are permitted in both XML 1.0 and XML 1.1, and the control characters #x1-#x8, #xB, #xC and #xE-#x1F are permitted in XML 1.1, but none of these is permitted in HTML prior to HTML5 . It is a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0014" title="err:SERE0014"><span class="deltaxml-new" style="background:#90EE90">err:SERE0014</span></a><span class="deltaxml-new" style="background:#90EE90">] to use the HTML output method if such characters appear in the instance of the data model and the value of the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> is less than </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p><p><span class="deltaxml-new" style="background:#90EE90">The HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> terminate processing instructions with </span><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> rather than </span><code><span class="deltaxml-new" style="background:#90EE90">?&gt;</span></code><span class="deltaxml-new" style="background:#90EE90">. It is a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0015" title="err:SERE0015"><span class="deltaxml-new" style="background:#90EE90">err:SERE0015</span></a><span class="deltaxml-new" style="background:#90EE90">] to use the HTML output method when </span><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> appears within a processing instruction in the data model instance being serialized.</span></p></div><div class="div2"><h3><a id="HTML_PARAMS"></a><span class="deltaxml-new" style="background:#90EE90">7.4 The Influence of Serialization Parameters upon the HTML Output Method</span></h3><div class="div3"><h4><a id="HTML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">7.4.1 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> or the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter indicates the version of the HTML Recommendation </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#html5"><span class="deltaxml-new" style="background:#90EE90">[HTML5]</span></a><span class="deltaxml-new" style="background:#90EE90"> to which the serialized result is to conform. [</span><a id="req-html-ver" title="requested HTML version"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: If the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not absent, the </span><b><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></b><span class="deltaxml-new" style="background:#90EE90"> is the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter; otherwise, it is the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter.] If the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not support the version of HTML specified by the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90">, it </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0013" title="err:SESU0013"><span class="deltaxml-new" style="background:#90EE90">err:SESU0013</span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p><p><span class="deltaxml-new" style="background:#90EE90">This document provides the normative definition of serialization for the HTML output method if the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> has the lexical form of a value of type decimal whose value is 1.0 or greater, but no greater than 5.0. For any other value of version parameter, the behavior is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">. In that case the </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> behavior </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> supersede all other requirements of this recommendation.</span></p></div><div class="div3"><h4><a id="HTML_ENCODING"></a><span class="deltaxml-new" style="background:#90EE90">7.4.2 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies the encoding to be used. </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">Serializers</span></a><span class="deltaxml-new" style="background:#90EE90"> are </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to support values of </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0007" title="err:SESU0007"><span class="deltaxml-new" style="background:#90EE90">err:SESU0007</span></a><span class="deltaxml-new" style="background:#90EE90">] occurs if an output encoding other than </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90"> is requested and the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not support that encoding. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error. </span></p><p><span class="deltaxml-new" style="background:#90EE90">It is possible that the instance of the data model will contain a character that cannot be represented in the encoding that the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is using for output. In this case, if the character occurs in a context where HTML recognizes character references, then the character </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output as a character entity reference or decimal numeric character reference; otherwise (for example, in a </span><code><span class="deltaxml-new" style="background:#90EE90">script</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">style</span></code><span class="deltaxml-new" style="background:#90EE90"> element or in a comment), the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0008" title="err:SERE0008"><span class="deltaxml-new" style="background:#90EE90">err:SERE0008</span></a><span class="deltaxml-new" style="background:#90EE90">]. </span></p><p><span class="deltaxml-new" style="background:#90EE90">See </span><a href="#HTML_INCLUDE-CONTENT-TYPE"><b><span class="deltaxml-new" style="background:#90EE90">7.4.13 HTML Output Method: the include-content-type Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> regarding how this parameter is used with the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></div><div class="div3"><h4><a id="HTML_INDENT"></a><span class="deltaxml-new" style="background:#90EE90">7.4.3 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, then the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> add or remove whitespace as it serializes the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90">, if it observes the following constraints.</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added other than before or after an element, or adjacent to an existing whitespace character.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added or removed adjacent to an inline element. The inline elements are those included in the </span><code><span class="deltaxml-new" style="background:#90EE90">%inline</span></code><span class="deltaxml-new" style="background:#90EE90"> category of any of the HTML 4.01 DTDs or those elements defined to be phrasing elements in HTML5, as well as the </span><code><span class="deltaxml-new" style="background:#90EE90">ins</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">del</span></code><span class="deltaxml-new" style="background:#90EE90"> elements if they are used as inline elements (i.e., if they do not contain element children).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added or removed inside a formatted element, the formatted elements being </span><code><span class="deltaxml-new" style="background:#90EE90">pre</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">script</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">style</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">title</span></code><span class="deltaxml-new" style="background:#90EE90">, and </span><code><span class="deltaxml-new" style="background:#90EE90">textarea</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">Whitespace characters </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be added in the content of an element whose expanded QName matches a member of the list of expanded QNames in the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. The expanded QName of an element node is considered to match a member of the list of expanded QNames if:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">the two expanded QNames are equal;</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the expanded QNames both have </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URIs</span></a><span class="deltaxml-new" style="background:#90EE90">, and the local parts of the two QNames are equal </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90">; or </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">the value of the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the local parts of the two QNames are equal </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90"> and one QName has a </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90"> and the namespace URI of the other is equal to the XHTML namespace URI.</span></p></li></ul></li></ul><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The effect of the above constraints is to ensure any insertion or deletion of whitespace would not affect how a conforming HTML user agent would render the output, assuming the serialized document does not refer to any HTML style sheets.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Note that the HTML definition of whitespace is different from the XML definition (see section 9.1 of the </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> specification).</span></p></div></div><div class="div3"><h4><a id="HTML_CDATA-SECTION-ELEMENTS"></a><span class="deltaxml-new" style="background:#90EE90">7.4.4 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the HTML output method, except in the case of </span><a title="XML Island" class="termref" href="#XML-ISLAND"><span class="deltaxml-new" style="background:#90EE90">XML Islands</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="HTML_OMIT-XML-DECLARATION"></a><span class="deltaxml-new" style="background:#90EE90">7.4.5 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not applicable to the HTML output method.</span></p></div><div class="div3"><h4><a id="HTML_DOCTYPE"></a><span class="deltaxml-new" style="background:#90EE90">7.4.6 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">If the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are specified, then the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output a document type declaration. If the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is specified, then the output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output </span><code><span class="deltaxml-new" style="background:#90EE90">PUBLIC</span></code><span class="deltaxml-new" style="background:#90EE90"> followed by the specified public identifier; if the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is also specified, it </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> also output the specified system identifier following the public identifier. If the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is specified but the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not specified, then the output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output </span><code><span class="deltaxml-new" style="background:#90EE90">SYSTEM</span></code><span class="deltaxml-new" style="background:#90EE90"> followed by the specified system identifier.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the value of the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> is </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">, the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameters are both absent, the first element node child of the document node that is to be serialized is to be </span><a title="serialized as an HTML element" class="termref" href="#serialize-as-HTML"><span class="deltaxml-new" style="background:#90EE90">serialized as an HTML element</span></a><span class="deltaxml-new" style="background:#90EE90">, the local part of the QName of which is equal to the string </span><code><span class="deltaxml-new" style="background:#90EE90">HTML</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90">, and any text node that precedes that element node in document contain only whitespace characters, then the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output a document type declaration, with no public or system identifier.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output a document type declaration, it </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be serialized immediately before the first element, if any, and the name following </span><code><span class="deltaxml-new" style="background:#90EE90">&lt;!DOCTYPE</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be </span><code><span class="deltaxml-new" style="background:#90EE90">HTML</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="HTML_UNDECLARE-PREFIXES"></a><span class="deltaxml-new" style="background:#90EE90">7.4.7 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the HTML output method.</span></p></div><div class="div3"><h4><a id="HTML_NORMALIZATION-FORM"></a><span class="deltaxml-new" style="background:#90EE90">7.4.8 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the HTML output method. The values </span><code><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">none</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0011" title="err:SESU0011"><span class="deltaxml-new" style="background:#90EE90">err:SESU0011</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies a normalization form that is not supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">; the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p></div><div class="div3"><h4><a id="HTML_MEDIA-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">7.4.9 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the HTML output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information. See </span><a href="#HTML_INCLUDE-CONTENT-TYPE"><b><span class="deltaxml-new" style="background:#90EE90">7.4.13 HTML Output Method: the include-content-type Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> regarding how this parameter is used with the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></div><div class="div3"><h4><a id="HTML_USE-CHARACTER-MAPS"></a><span class="deltaxml-new" style="background:#90EE90">7.4.10 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the HTML output method. See </span><a href="#character-maps"><b><span class="deltaxml-new" style="background:#90EE90">11 Character Maps</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="HTML_BYTE-ORDER-MARK"></a><span class="deltaxml-new" style="background:#90EE90">7.4.11 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the HTML output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="HTML_ESCAPE-URI-ATTRIBUTES"></a><span class="deltaxml-new" style="background:#90EE90">7.4.12 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90"> If the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> apply </span><a title="URI Escaping" class="termref" href="#uri-escaping"><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></a><span class="deltaxml-new" style="background:#90EE90"> to </span><a title="URI attribute values" class="termref" href="#uri-attribute-values"><span class="deltaxml-new" style="background:#90EE90">URI attribute values</span></a><span class="deltaxml-new" style="background:#90EE90">, except that relative URIs </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> be absolutized. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">This escaping is deliberately confined to non-ASCII characters, because escaping of ASCII characters is not always appropriate, for example when URIs or URI fragments are interpreted locally by the HTML user agent. Even in the case of non-ASCII characters, escaping can sometimes cause problems. More precise control of </span><a title="URI Escaping" class="termref" href="#uri-escaping"><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></a><span class="deltaxml-new" style="background:#90EE90"> is therefore available by setting </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> to </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span class="deltaxml-new" style="background:#90EE90">, and controlling the escaping of URIs by using methods defined in </span><a href="https://www.w3.org/TR/xpath-functions-31/#func-encode-for-uri"><span class="deltaxml-new" style="background:#90EE90">Section 6.2 fn:encode-for-uri </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="https://www.w3.org/TR/xpath-functions-31/#func-iri-to-uri"><span class="deltaxml-new" style="background:#90EE90">Section 6.3 fn:iri-to-uri </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">FO31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></div><div class="div3"><h4><a id="HTML_INCLUDE-CONTENT-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">7.4.13 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">If there is a </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element, and the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the HTML output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> add a </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element as the first child element of the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element specifying the character encoding actually used.</span></p><div class="exampleOuter"><p><span class="deltaxml-new" style="background:#90EE90">For example,</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;HEAD&gt; &lt;META http-equiv="Content-Type" content="text/html; charset=EUC-JP"&gt; ...</span></pre></div></div><p><span class="deltaxml-new" style="background:#90EE90">The content type </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be set to the value given for the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p><p><span class="deltaxml-new" style="background:#90EE90">If a </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element has been added to the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element as described above, then any existing </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element child of the </span><code><span class="deltaxml-new" style="background:#90EE90">head</span></code><span class="deltaxml-new" style="background:#90EE90"> element having an </span><code><span class="deltaxml-new" style="background:#90EE90">http-equiv</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute with the value "Content-Type", making the comparison </span><a title="without regard to case" class="termref" href="#caseless-compare"><span class="deltaxml-new" style="background:#90EE90">without regard to case</span></a><span class="deltaxml-new" style="background:#90EE90"> after first stripping leading and trailing spaces from the value of the attribute solely for the purposes of comparison, </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be discarded.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">This process removes possible parameters in the attribute value. For example,</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;meta http-equiv="Content-Type" content="text/html;version='3.0'"/&gt;</span></pre></div><p><span class="deltaxml-new" style="background:#90EE90">in the data model instance would be replaced by,</span></p><div class="exampleInner"><pre><span class="deltaxml-new" style="background:#90EE90">&lt;meta http-equiv="Content-Type" content="text/html;charset=utf-8"/&gt;</span></pre></div></div></div><div class="div3"><h4><a id="HTML_ITEM-SEPARATOR"></a><span class="deltaxml-new" style="background:#90EE90">7.4.14 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The effect of the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is described in </span><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="HTML_ALLOW-DUPLICATE-NAMES"></a><span class="deltaxml-new" style="background:#90EE90">7.4.15 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the HTML output method.</span></p></div><div class="div3"><h4><a id="HTML_JSON-NODE-OUTPUT-METHOD"></a><span class="deltaxml-new" style="background:#90EE90">7.4.16 HTML Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the HTML output method.</span></p></div></div></div><div class="div1"><h2><a id="text-output"></a><span class="deltaxml-new" style="background:#90EE90">8 Text Output Method</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The Text output method serializes the instance of the data model by outputting the </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90"> of the document node created by the markup generation step of the </span><a title="" class="termref" href="#serphases"><span class="deltaxml-new" style="background:#90EE90">phases of serialization</span></a><span class="deltaxml-new" style="background:#90EE90"> without any escaping.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A newline character in the instance of the data model </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be output using any character sequence that is conventionally used to represent a line ending in the chosen system environment.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The rule just stated applies to newline characters (#xA); it does not apply to occurrences in the data model instance of carriage return (CR), NEL, or LINE SEPARATOR characters; these should be output literally, regardless of the conventions for line endings in the system environment.</span></p><p><span class="deltaxml-new" style="background:#90EE90">To illustrate, the following table shows the expected output for various character sequences in environments which conventionally use #xA (LF, as in Linux systems), #xD followed by #xA (CR+LF, Windows), #xD (CR only, older versions of Mac OS), #x85 (NEL, some IBM operating systems), or #x2028 (LINE SEPARATOR) to separate lines:</span></p><table style="border:1px solid" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Expected output for various character sequences</span></caption><thead><tr><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">Input</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">#xA systems</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">#xD#xA systems</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">#xD systems</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">#x85 systems</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">#x2028 systems</span></th></tr></thead><tbody><tr><td><span class="deltaxml-new" style="background:#90EE90">character #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #xD</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">character #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #x85</span></td><td><span class="deltaxml-new" style="background:#90EE90">character #x2028</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD + #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #x85</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #x2028</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD + #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD + #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD + #xD + #xA</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD + #xD</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD + #x85</span></td><td><span class="deltaxml-new" style="background:#90EE90">string #xD + #xD + #x2028</span></td></tr></tbody></table></div><div class="div2"><h3><a id="TEXT_PARAMS"></a><span class="deltaxml-new" style="background:#90EE90">8.1 The Influence of Serialization Parameters upon the Text Output Method</span></h3><div class="div3"><h4><a id="TEXT_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">8.1.1 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_HTML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">8.1.2 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_ENCODING"></a><span class="deltaxml-new" style="background:#90EE90">8.1.3 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter identifies the encoding that the Text output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> use to convert sequences of characters to sequences of bytes. </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">Serializers</span></a><span class="deltaxml-new" style="background:#90EE90"> are </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to support values of </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0007" title="err:SESU0007"><span class="deltaxml-new" style="background:#90EE90">err:SESU0007</span></a><span class="deltaxml-new" style="background:#90EE90">] occurs if the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not support the encoding specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error. If the instance of the data model contains a character that cannot be represented in the encoding that the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is using for output, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0008" title="err:SERE0008"><span class="deltaxml-new" style="background:#90EE90">err:SERE0008</span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></div><div class="div3"><h4><a id="TEXT_INDENT"></a><span class="deltaxml-new" style="background:#90EE90">8.1.4 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_CDATA-SECTION-ELEMENTS"></a><span class="deltaxml-new" style="background:#90EE90">8.1.5 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_OMIT-XML-DECLARATION"></a><span class="deltaxml-new" style="background:#90EE90">8.1.6 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_DOCTYPE"></a><span class="deltaxml-new" style="background:#90EE90">8.1.7 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_UNDECLARE-PREFIXES"></a><span class="deltaxml-new" style="background:#90EE90">8.1.8 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_NORMALIZATION-FORM"></a><span class="deltaxml-new" style="background:#90EE90">8.1.9 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the Text output method. The values </span><code><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">none</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0011" title="err:SESU0011"><span class="deltaxml-new" style="background:#90EE90">err:SESU0011</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies a normalization form that is not supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">; the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p></div><div class="div3"><h4><a id="TEXT_MEDIA-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">8.1.10 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the Text output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="TEXT_USE-CHARACTER-MAPS"></a><span class="deltaxml-new" style="background:#90EE90">8.1.11 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the Text output method. See </span><a href="#character-maps"><b><span class="deltaxml-new" style="background:#90EE90">11 Character Maps</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="TEXT_BYTE-ORDER-MARK"></a><span class="deltaxml-new" style="background:#90EE90">8.1.12 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the Text output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="TEXT_ESCAPE-URI-ATTRIBUTES"></a><span class="deltaxml-new" style="background:#90EE90">8.1.13 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_INCLUDE-CONTENT-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">8.1.14 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_ITEM-SEPARATOR"></a><span class="deltaxml-new" style="background:#90EE90">8.1.15 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The effect of the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is described in </span><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div><div class="div3"><h4><a id="TEXT_ALLOW-DUPLICATE-NAMES"></a><span class="deltaxml-new" style="background:#90EE90">8.1.16 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the Text output method.</span></p></div><div class="div3"><h4><a id="TEXT_JSON-NODE-OUTPUT-METHOD"></a><span class="deltaxml-new" style="background:#90EE90">8.1.17 Text Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the Text output method.</span></p></div></div></div><div class="div1"><h2><a id="json-output"></a><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The JSON output method serializes the instance of the data model as a JSON value using the JSON syntax defined in </span><span><a href="#rfc7159"><span class="deltaxml-new" style="background:#90EE90">[RFC 7159]</span></a></span><span class="deltaxml-new" style="background:#90EE90">. </span><span><span class="deltaxml-new" style="background:#90EE90"> Sequence normalization is not performed for this output method. </span></span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><a title="array item" class="termref" href="#dt-array-item"><span class="deltaxml-new" style="background:#90EE90">array item</span></a><span class="deltaxml-new" style="background:#90EE90"> in the data model </span><span><span class="deltaxml-new" style="background:#90EE90">instance</span></span><span class="deltaxml-new" style="background:#90EE90"> is serialized to a JSON array by outputting the serialized JSON value of each </span><span><span class="deltaxml-new" style="background:#90EE90">member</span></span><span class="deltaxml-new" style="background:#90EE90"> within the array separated by delimiters according to the JSON array syntax</span><span><span class="deltaxml-new" style="background:#90EE90">, i.e. </span><code><span class="deltaxml-new" style="background:#90EE90">[member, member, ...]</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span><span><span class="deltaxml-new" style="background:#90EE90">Each </span><span><span class="deltaxml-new" style="background:#90EE90">member</span></span><span class="deltaxml-new" style="background:#90EE90"> in the array is to be serialized </span><span><span class="deltaxml-new" style="background:#90EE90">by recursively applying the rules</span></span><span class="deltaxml-new" style="background:#90EE90"> in this section.</span></span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A </span><a title="map item" class="termref" href="#dt-map-item"><span class="deltaxml-new" style="background:#90EE90">map item</span></a><span class="deltaxml-new" style="background:#90EE90"> in the data model </span><span><span class="deltaxml-new" style="background:#90EE90">instance</span></span><span class="deltaxml-new" style="background:#90EE90"> is serialized to a JSON object by outputting, for each key/value pair, the </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90"> of the key </span><span><a title="to a JSON string" class="termref" href="#to-a-json-string"><span class="deltaxml-new" style="background:#90EE90">to a JSON string</span></a><span class="deltaxml-new" style="background:#90EE90">, followed by</span></span><span class="deltaxml-new" style="background:#90EE90"> the serialized JSON value of the entry, separated by delimiters according to the JSON object syntax</span><span><span class="deltaxml-new" style="background:#90EE90">, i.e. </span><code><span class="deltaxml-new" style="background:#90EE90">{key:value, key:value, ...}</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span><span><span class="deltaxml-new" style="background:#90EE90">The order in which each key/value pair appears in the serialized output is </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">If any two keys of the map item have the same </span><a title="string value" class="termref" href="#dt-string-value"><span class="deltaxml-new" style="background:#90EE90">string value</span></a><span class="deltaxml-new" style="background:#90EE90">, serialization error [</span><a href="#ERRSERE0022" title="err:SERE0022"><span class="deltaxml-new" style="background:#90EE90">err:SERE0022</span></a><span class="deltaxml-new" style="background:#90EE90">] is raised, unless the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> A node in the data model instance is serialized </span><a title="to a JSON string" class="termref" href="#to-a-json-string"><span class="deltaxml-new" style="background:#90EE90">to a JSON string</span></a><span class="deltaxml-new" style="background:#90EE90"> by outputting the result of serializing the node using the method specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. </span><span><span class="deltaxml-new" style="background:#90EE90"> The node is serialized with the serialization parameter </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> set to </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90"> and with no other serialization parameters set. </span></span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><a href="https://www.w3.org/TR/xpath-31/#dt-atomic-value"><span class="deltaxml-new" style="background:#90EE90">atomic value</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> in the data model instance with a numeric type, or derived from a numeric type </span><code><span class="deltaxml-new" style="background:#90EE90">xs:float</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">xs:double</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xs:decimal</span></code><span><span class="deltaxml-new" style="background:#90EE90">is</span></span><span class="deltaxml-new" style="background:#90EE90"> serialized to a JSON number. </span><span><span class="deltaxml-new" style="background:#90EE90">Implementations </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> serialize the numeric value using any lexical representation of a JSON number defined in </span><a href="#rfc7159"><span class="deltaxml-new" style="background:#90EE90">[RFC 7159]</span></a><span class="deltaxml-new" style="background:#90EE90">. </span></span><span><span class="deltaxml-new" style="background:#90EE90">If the numeric value cannot be represented in the JSON grammar (such as Infinity or NaN), then the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal a serialization error [</span><a href="#ERRSERE0020" title="err:SERE0020"><span class="deltaxml-new" style="background:#90EE90">err:SERE0020</span></a><span class="deltaxml-new" style="background:#90EE90">].</span></span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><a href="https://www.w3.org/TR/xpath-31/#dt-atomic-value"><span class="deltaxml-new" style="background:#90EE90">atomic value</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> in the data model instance of type </span><code><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><span class="deltaxml-new" style="background:#90EE90"> and value </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span><span class="deltaxml-new" style="background:#90EE90">is</span></span><span class="deltaxml-new" style="background:#90EE90"> serialized to the JSON token </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><a href="https://www.w3.org/TR/xpath-31/#dt-atomic-value"><span class="deltaxml-new" style="background:#90EE90">atomic value</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> in the data model instance of type </span><code><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><span class="deltaxml-new" style="background:#90EE90"> and value </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span><span class="deltaxml-new" style="background:#90EE90">is</span></span><span class="deltaxml-new" style="background:#90EE90"> serialized to the JSON token </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><a href="https://www.w3.org/TR/xpath-31/#dt-atomic-value"><span class="deltaxml-new" style="background:#90EE90">atomic value</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> in the data model instance of any other type </span><span><span class="deltaxml-new" style="background:#90EE90">is</span></span><span class="deltaxml-new" style="background:#90EE90"> serialized </span><a title="to a JSON string" class="termref" href="#to-a-json-string"><span class="deltaxml-new" style="background:#90EE90">to a JSON string</span></a><span class="deltaxml-new" style="background:#90EE90"> by outputting the </span><span><span class="deltaxml-new" style="background:#90EE90">result of applying the </span><code><span class="deltaxml-new" style="background:#90EE90">fn:string</span></code><span class="deltaxml-new" style="background:#90EE90"> function to</span></span><span class="deltaxml-new" style="background:#90EE90"> the item.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An empty sequence in the data model instance is serialized to the JSON token </span><code><span class="deltaxml-new" style="background:#90EE90">null</span></code><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A sequence of length greater than one in the data model instance </span><span><span class="deltaxml-new" style="background:#90EE90">will result in a serialization error [</span><a href="#ERRSERE0023" title="err:SERE0023"><span class="deltaxml-new" style="background:#90EE90">err:SERE0023</span></a><span class="deltaxml-new" style="background:#90EE90">]</span></span><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> Any item in the data model instance of type not specified in the above list will result in a serialization error [</span><a href="#ERRSERE0021" title="err:SERE0021"><span class="deltaxml-new" style="background:#90EE90">err:SERE0021</span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p></li></ul><p><span class="deltaxml-new" style="background:#90EE90"> [</span><a id="to-a-json-string" title="to a JSON string"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: Whenever a value is serialized </span><b><span class="deltaxml-new" style="background:#90EE90">to a JSON string</span></b><span class="deltaxml-new" style="background:#90EE90">, the following procedure is applied to the supplied string:</span></p><ol class="enumar"><li><p><span class="deltaxml-new" style="background:#90EE90">Any character in the string for which character mapping is defined (see </span><a href="#character-maps"><b><span class="deltaxml-new" style="background:#90EE90">11 Character Maps</span></b></a><span class="deltaxml-new" style="background:#90EE90">) is substituted by the replacement string defined in the character map.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> Any other character in the input string (but not a character produced by character mapping) is a candidate for </span><a title="Unicode Normalization" class="termref" href="#unicode-normalization"><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> if requested by the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, and JSON escaping. JSON escaping replaces the characters quotation mark, backspace, form-feed, newline, carriage return, tab</span><span><span class="deltaxml-new" style="background:#90EE90">, reverse solidus, or solidus</span></span><span class="deltaxml-new" style="background:#90EE90"> by the corresponding JSON escape sequences </span><code><span class="deltaxml-new" style="background:#90EE90">\"</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">\b</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">\f</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">\n</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">\r</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">\t</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">\\</span></code><span class="deltaxml-new" style="background:#90EE90">, or </span><code><span class="deltaxml-new" style="background:#90EE90">\/</span></code></span><span class="deltaxml-new" style="background:#90EE90"> respectively, and any other codepoint in the range 1-31 or 127-159 by an escape in the form </span><code><span class="deltaxml-new" style="background:#90EE90">\uHHHH</span></code><span class="deltaxml-new" style="background:#90EE90"> where </span><code><span class="deltaxml-new" style="background:#90EE90">HHHH</span></code><span class="deltaxml-new" style="background:#90EE90"> is the hexadecimal representation of the codepoint value. Escaping is also applied to any characters that cannot be represented in the selected encoding. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">The resulting string is enclosed in double quotation marks.</span></p></li></ol><p><span class="deltaxml-new" style="background:#90EE90">]</span></p><p><span class="deltaxml-new" style="background:#90EE90"> Finally, encoding, as controlled by the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, converts the character stream produced by the preceding rules into an octet stream. </span></p><div class="div2"><h3><a id="JSON_PARAMS"></a><span class="deltaxml-new" style="background:#90EE90">9.1 The Influence of Serialization Parameters upon the JSON Output Method</span></h3><p><span class="deltaxml-new" style="background:#90EE90"> When nodes are serialized using the JSON output method, serialization is delegated to the output method specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter. The </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is set to </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, and no other serialization parameters are passed down to the serialization method responsible for serializing the node. </span></p><div class="div3"><h4><a id="JSON_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">9.1.1 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_HTML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">9.1.2 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_ENCODING"></a><span class="deltaxml-new" style="background:#90EE90">9.1.3 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter identifies the encoding that the JSON output method </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> use to convert sequences of characters to sequences of bytes. </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">Serializers</span></a><span class="deltaxml-new" style="background:#90EE90"> are </span><strong><span class="deltaxml-new" style="background:#90EE90">REQUIRED</span></strong><span class="deltaxml-new" style="background:#90EE90"> to support values of </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0007" title="err:SESU0007"><span class="deltaxml-new" style="background:#90EE90">err:SESU0007</span></a><span class="deltaxml-new" style="background:#90EE90">] occurs if the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not support the encoding specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error. If the instance of the data model contains a character that cannot be represented in the encoding that the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is using for output, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal a </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0008" title="err:SERE0008"><span class="deltaxml-new" style="background:#90EE90">err:SERE0008</span></a><span class="deltaxml-new" style="background:#90EE90">].</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">If an encoding other than UTF-8, UTF-16, UTF-32, US-ASCII, or an equivalent is specified for the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, the output will (except in unusual circumstances) fail to conform to the definition of JSON in </span><a href="#rfc7159"><span class="deltaxml-new" style="background:#90EE90">[RFC 7159]</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></div><div class="div3"><h4><a id="JSON_INDENT"></a><span class="deltaxml-new" style="background:#90EE90">9.1.4 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter controls whether the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> adjusts the whitespace in the serialized result so that a person will find it easier to read. If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has </span><span><span class="deltaxml-new" style="background:#90EE90">one of the values </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> output additional whitespace characters adjacent to the JSON structural tokens. If the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">, the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> output no whitespace characters adjacent to the JSON structural tokens. </span></p><p><span class="deltaxml-new" style="background:#90EE90"> The </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the JSON output method. </span></p></div><div class="div3"><h4><a id="JSON_CDATA-SECTION-ELEMENTS"></a><span class="deltaxml-new" style="background:#90EE90">9.1.5 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_OMIT-XML-DECLARATION"></a><span class="deltaxml-new" style="background:#90EE90">9.1.6 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_DOCTYPE"></a><span class="deltaxml-new" style="background:#90EE90">9.1.7 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_UNDECLARE-PREFIXES"></a><span class="deltaxml-new" style="background:#90EE90">9.1.8 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_NORMALIZATION-FORM"></a><span class="deltaxml-new" style="background:#90EE90">9.1.9 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the JSON output method. The values </span><code><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">none</span></code><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">. A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSESU0011" title="err:SESU0011"><span class="deltaxml-new" style="background:#90EE90">err:SESU0011</span></a><span class="deltaxml-new" style="background:#90EE90">] results if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies a normalization form that is not supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">; the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p></div><div class="div3"><h4><a id="JSON_MEDIA-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">9.1.10 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the JSON output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="JSON_USE-CHARACTER-MAPS"></a><span class="deltaxml-new" style="background:#90EE90">9.1.11 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the JSON output method. See </span><a href="#character-maps"><b><span class="deltaxml-new" style="background:#90EE90">11 Character Maps</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p></div><div class="div3"><h4><a id="JSON_BYTE-ORDER-MARK"></a><span class="deltaxml-new" style="background:#90EE90">9.1.12 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the JSON output method. See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">Serialized output containing a byte-order mark does not conform to the definition of JSON in </span><a href="#rfc7159"><span class="deltaxml-new" style="background:#90EE90">[RFC 7159]</span></a><span class="deltaxml-new" style="background:#90EE90"> (although conforming JSON parsers are allowed to tolerate the byte-order mark).</span></p></div></div><div class="div3"><h4><a id="JSON_ESCAPE-URI-ATTRIBUTES"></a><span class="deltaxml-new" style="background:#90EE90">9.1.13 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_INCLUDE-CONTENT-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">9.1.14 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_ITEM-SEPARATOR"></a><span class="deltaxml-new" style="background:#90EE90">9.1.15 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is not applicable to the JSON output method.</span></p></div><div class="div3"><h4><a id="JSON_ALLOW-DUPLICATE-NAMES"></a><span class="deltaxml-new" style="background:#90EE90">9.1.16 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter determines whether the presence of multiple keys in a map item with the same string value (e.g. the date 2014-10-01 and the string "</span><code><span class="deltaxml-new" style="background:#90EE90">2014-10-01</span></code><span class="deltaxml-new" style="background:#90EE90">") will or will not raise serialization error [</span><a href="#ERRSERE0022" title="err:SERE0022"><span class="deltaxml-new" style="background:#90EE90">err:SERE0022</span></a><span class="deltaxml-new" style="background:#90EE90">]. If the value is </span><span><span class="deltaxml-new" style="background:#90EE90">one of</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, such duplicate keys will result in duplicate object-member names in the JSON output and no error will be raised because of the duplicate names. If the value is </span><code><span class="deltaxml-new" style="background:#90EE90">no</span></code><span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code></span><span class="deltaxml-new" style="background:#90EE90">, such duplicate keys are an error ([</span><a href="#ERRSERE0022" title="err:SERE0022"><span class="deltaxml-new" style="background:#90EE90">err:SERE0022</span></a><span class="deltaxml-new" style="background:#90EE90">]).</span></p></div><div class="div3"><h4><a id="JSON_JSON-NODE-OUTPUT-METHOD"></a><span class="deltaxml-new" style="background:#90EE90">9.1.17 JSON Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90"> The </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter determines how a node in the data model instance gets converted to a JSON value. If the value is one of </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">html</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">text</span></code><span class="deltaxml-new" style="background:#90EE90">, then the node is converted </span><a title="to a JSON string" class="termref" href="#to-a-json-string"><span class="deltaxml-new" style="background:#90EE90">to a JSON string</span></a><span class="deltaxml-new" style="background:#90EE90"> by serializing the node using the output method specified by this parameter. If the value is </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90"> then the node is serialised with the additional serialization parameter </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> set to </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></div></div></div><div class="div1"><h2><a id="adaptive-output"></a><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The Adaptive output method serializes the instance of the data model </span><span><span class="deltaxml-new" style="background:#90EE90"> into a human readable form for the purposes of debugging query results. </span></span><span class="deltaxml-new" style="background:#90EE90"> The intention of this is to allow any valid XDM instance to be serialized without raising a serialization error. </span><span><span class="deltaxml-new" style="background:#90EE90">Sequence normalization is not performed for this output method.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90">Each item in the supplied sequence is serialized individually as follows, with an occurrence of the chosen </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> between successive items.</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">A document, element, text, comment, or processing instruction node is serialized using the XML output method described in </span><a href="#xml-output"><b><span class="deltaxml-new" style="background:#90EE90">5 XML Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An attribute or namespace </span><a title="node" class="termref" href="#dt-node"><span class="deltaxml-new" style="background:#90EE90">node</span></a><span class="deltaxml-new" style="background:#90EE90"> is serialized as if it had a containing element node. For example an attribute node might be serialized as the string </span><code><span class="deltaxml-new" style="background:#90EE90">xsi:type="xs:integer"</span></code><span class="deltaxml-new" style="background:#90EE90">; a namespace node might be serialized as </span><code><span class="deltaxml-new" style="background:#90EE90">xmlns:sns="http://example.com/sample-namespace"</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">This may result in output of QNames containing prefixes whose binding is not displayed.</span></p></div></li><li><p><span class="deltaxml-new" style="background:#90EE90">An </span><a href="https://www.w3.org/TR/xpath-31/#dt-atomic-value"><span class="deltaxml-new" style="background:#90EE90">atomic value</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> is serialized </span><span><span class="deltaxml-new" style="background:#90EE90">as follows:</span></span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90">An instance of </span><code><span class="deltaxml-new" style="background:#90EE90">xs:boolean</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized as </span><code><span class="deltaxml-new" style="background:#90EE90">true()</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">false()</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An instance of </span><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xs:anyURI</span></code></span><span class="deltaxml-new" style="background:#90EE90"> is serialized by enclosing the value in double quotation marks and doubling any quotes within the value; or optionally by enclosing the value in apostrophes and doubling any apostrophes within the value. </span><span><span class="deltaxml-new" style="background:#90EE90">The resulting value is then serialized using the Text output method described in </span><a href="#text-output"><b><span class="deltaxml-new" style="background:#90EE90">8 Text Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The Text output method will apply character expansion and encoding rules to this string as specified by the serialization parameters.</span></p></div></li><li><p><span class="deltaxml-new" style="background:#90EE90">An instance of </span><code><span class="deltaxml-new" style="background:#90EE90">xs:integer</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xs:decimal</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized by converting the value to a string using the </span><code><span class="deltaxml-new" style="background:#90EE90">fn:string</span></code><span class="deltaxml-new" style="background:#90EE90"> function.</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An instance of </span><code><span class="deltaxml-new" style="background:#90EE90">xs:double</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized by applying the function </span><code><span class="deltaxml-new" style="background:#90EE90">format-number(?, '0.0##########################e0')</span></code><span><span class="deltaxml-new" style="background:#90EE90">using the following default decimal format properties:</span></span></p><table class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Decimal format</span></caption><thead><tr><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">Property name</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">Property value</span></th></tr></thead><tbody><tr><td><code><span class="deltaxml-new" style="background:#90EE90">decimal-separator</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The period character (.)</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">exponent-separator</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The character (e)</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">grouping-separator</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The comma character (,)</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">zero-digit</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The Western digit zero (#x30).</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">digit</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The number sign character (#)</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">infinity</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The string "INF"</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">NaN</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The string "NaN"</span></td></tr><tr><td><code><span class="deltaxml-new" style="background:#90EE90">minus-sign</span></code></td><td><span class="deltaxml-new" style="background:#90EE90">The hyphen-minus character (#x2D)</span></td></tr></tbody></table></li><li><p><span class="deltaxml-new" style="background:#90EE90">An instance of </span><code><span class="deltaxml-new" style="background:#90EE90">xs:QName</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xs:NOTATION</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized as a URI-qualified name (that is, in the form </span><code><span class="deltaxml-new" style="background:#90EE90">Q{uri}local</span></code><span class="deltaxml-new" style="background:#90EE90">).</span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">An atomic value of any other type is serialized using the syntax of a constructor function: </span><code><span class="deltaxml-new" style="background:#90EE90">xs:TYPE("VAL")</span></code><span class="deltaxml-new" style="background:#90EE90"> where </span><code><span class="deltaxml-new" style="background:#90EE90">TYPE</span></code><span class="deltaxml-new" style="background:#90EE90"> is the name of the primitive type, and </span><code><span class="deltaxml-new" style="background:#90EE90">VAL</span></code><span class="deltaxml-new" style="background:#90EE90"> is the result of applying the </span><code><span class="deltaxml-new" style="background:#90EE90">fn:string()</span></code><span class="deltaxml-new" style="background:#90EE90"> function. For example, </span><code><span class="deltaxml-new" style="background:#90EE90">xs:date("2015-07-17")</span></code><span class="deltaxml-new" style="background:#90EE90">. </span><span><span class="deltaxml-new" style="background:#90EE90">The resulting string is then serialized using the Text output method described in </span><a href="#text-output"><b><span class="deltaxml-new" style="background:#90EE90">8 Text Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></span></p></li></ul></li><li><p><span class="deltaxml-new" style="background:#90EE90"> An </span><a title="array item" class="termref" href="#dt-array-item"><span class="deltaxml-new" style="background:#90EE90">array item</span></a><span class="deltaxml-new" style="background:#90EE90"> is serialized using the syntax of a </span><a href="https://www.w3.org/TR/xpath-31/#doc-xpath31-SquareArrayConstructor"><span class="deltaxml-new" style="background:#90EE90"> SquareArrayConstructor </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, that is as </span><code><span class="deltaxml-new" style="background:#90EE90">[member,member, ... ]</span></code><span class="deltaxml-new" style="background:#90EE90">. The members, which in general are sequences, are serialized in the form </span><code><span class="deltaxml-new" style="background:#90EE90">(item,item, ...)</span></code><span class="deltaxml-new" style="background:#90EE90"> where the items are serialized by applying these rules recursively. The items are separated by commas (not by the item-separator character). The enclosing parentheses are optional if the sequence has length one. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">The serializer should avoid outputting the parentheses if it is able to determine the length of the sequence before serializing the first item; but it is allowed to output parentheses around a singleton if this avoids buffering data in memory.</span></p></div></li><li><p><span class="deltaxml-new" style="background:#90EE90"> A </span><a title="map item" class="termref" href="#dt-map-item"><span class="deltaxml-new" style="background:#90EE90">map item</span></a><span class="deltaxml-new" style="background:#90EE90"> is serialized using the syntax of a </span><a href="https://www.w3.org/TR/xpath-31/#doc-xpath31-MapConstructor"><span class="deltaxml-new" style="background:#90EE90"> MapConstructor </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90">, that is as </span><code><span class="deltaxml-new" style="background:#90EE90">map{key:value, key:value, ...}</span></code><span class="deltaxml-new" style="background:#90EE90">. The order of entries is implementation-dependent. The key is serialized by applying the rules for serializing an atomic value. The values are serialized in the same way as the members of an array (see above). </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90">A </span><a title="function item" class="termref" href="#dt-function-item"><span class="deltaxml-new" style="background:#90EE90">function item</span></a><span class="deltaxml-new" style="background:#90EE90"> is serialized to the representation </span><code><span class="deltaxml-new" style="background:#90EE90"> name#A</span></code><span class="deltaxml-new" style="background:#90EE90"> where </span><var><span class="deltaxml-new" style="background:#90EE90">name</span></var><span class="deltaxml-new" style="background:#90EE90"> is </span><span><span class="deltaxml-new" style="background:#90EE90">a representation of</span></span><span class="deltaxml-new" style="background:#90EE90"> the function name and </span><var><span class="deltaxml-new" style="background:#90EE90">A</span></var><span class="deltaxml-new" style="background:#90EE90"> is the arity. </span><span><span class="deltaxml-new" style="background:#90EE90">If the function name is in one of the namespaces </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2005/xpath-functions</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2005/xpath-functions/math</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2005/xpath-functions/map</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2005/xpath-functions/array</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2001/XMLSchema</span></code><span class="deltaxml-new" style="background:#90EE90">, then the name is output as a lexical QName using the conventional prefix </span><code><span class="deltaxml-new" style="background:#90EE90">fn</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">math</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">map</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">array</span></code><span class="deltaxml-new" style="background:#90EE90">, or </span><code><span class="deltaxml-new" style="background:#90EE90">xs</span></code><span class="deltaxml-new" style="background:#90EE90"> as appropriate; if it is in any other namespace or in no namespace, then the name is output as a URI-qualified name (that is, </span><code><span class="deltaxml-new" style="background:#90EE90">Q{uri}local</span></code><span class="deltaxml-new" style="background:#90EE90">). </span></span><span class="deltaxml-new" style="background:#90EE90"> If the function is anonymous, </span><var><span class="deltaxml-new" style="background:#90EE90">name</span></var><span class="deltaxml-new" style="background:#90EE90"> is replaced by the string </span><code><span class="deltaxml-new" style="background:#90EE90">(anonymous</span><span><span class="deltaxml-new" style="background:#90EE90">-function</span></span><span class="deltaxml-new" style="background:#90EE90">)</span></code><span class="deltaxml-new" style="background:#90EE90">. </span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90"> The following examples illustrate this rule:</span></p><ul><li><p><code><span class="deltaxml-new" style="background:#90EE90">fn:exists#1</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized as </span><code><span class="deltaxml-new" style="background:#90EE90">function fn:exists#1</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">Q{http://www.w3.org/2005/xpath-functions}exists#1</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized as </span><code><span><span class="deltaxml-new" style="background:#90EE90">fn:</span></span><span class="deltaxml-new" style="background:#90EE90">exists#1</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">function($a) { $a }</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized as </span><code><span class="deltaxml-new" style="background:#90EE90">(anonymous</span><span><span class="deltaxml-new" style="background:#90EE90">-function</span></span><span class="deltaxml-new" style="background:#90EE90">)#1</span></code></p></li><li><p><code><span class="deltaxml-new" style="background:#90EE90">math:pi#0</span></code><span class="deltaxml-new" style="background:#90EE90"> is serialized as </span><code><span class="deltaxml-new" style="background:#90EE90">math:pi#0</span></code></p></li></ul></div></li></ul><p><span class="deltaxml-new" style="background:#90EE90">Character maps are applied (a) when nodes are serialized using the XML output method, and (b) to any value represented as a string enclosed in quotation marks.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Optionally, in all the above constructs, characters whose visual representation is ambiguous (for example tab or non-breaking-space) may be represented in the form of an XML numeric character reference (for example </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#x9;</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#xa0;</span></code><span class="deltaxml-new" style="background:#90EE90">)</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90"> In many cases the serialization of an item conforms to the syntax of an XQuery expression whose result is that item. There are exceptions, however: for example the syntax will not be valid XQuery in the case of free-standing attribute or namespace nodes, or QName values, or anonymous functions; and where it is valid XQuery, the result of evaluating the expression will not necessarily be identical to the original: for example, the distinction between strings and untypedAtomic values is lost. </span></p></div><p><span class="deltaxml-new" style="background:#90EE90"> If any value cannot be output because doing so would cause a serialization error, </span><span><span class="deltaxml-new" style="background:#90EE90">the behavior is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></span></p><p><span class="deltaxml-new" style="background:#90EE90"> If the output is sent to a destination that allows hyperlinks to be included in the generated text, then the serializer </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> include </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90"> hyperlinks to provide additional information for example:</span></p><ul><li><p><span class="deltaxml-new" style="background:#90EE90"> to allow the type of </span><a href="https://www.w3.org/TR/xpath-31/#dt-atomic-value"><span class="deltaxml-new" style="background:#90EE90">atomic values</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XP31</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> to be ascertained. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> to allow the namespace binding of prefixes to be ascertained. </span></p></li><li><p><span class="deltaxml-new" style="background:#90EE90"> to provide further information about the cause of error indicators. </span></p></li></ul><div class="div2"><h3><a id="ADAPTIVE_PARAMS"></a><span class="deltaxml-new" style="background:#90EE90">10.1 The Influence of Serialization Parameters upon the Adaptive Output Method</span></h3><p><span class="deltaxml-new" style="background:#90EE90"> For some item types the Adaptive output method will delegate serialization to other output methods. With the exception of the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter, all serialization parameters, if set, will be passed down to the serialization method that is applied to each item in the supplied sequence. Only the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are directly applicable to the Adaptive output method. </span></p><div class="div3"><h4><a id="ADAPTIVE_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">10.1.1 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_HTML_VERSION"></a><span class="deltaxml-new" style="background:#90EE90">10.1.2 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">html-version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_ENCODING"></a><span class="deltaxml-new" style="background:#90EE90">10.1.3 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">encoding</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method.</span></p></div><div class="div3"><h4><a id="ADAPTIVE_INDENT"></a><span class="deltaxml-new" style="background:#90EE90">10.1.4 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method.</span></p></div><div class="div3"><h4><a id="ADAPTIVE_CDATA-SECTION-ELEMENTS"></a><span class="deltaxml-new" style="background:#90EE90">10.1.5 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method.</span></p></div><div class="div3"><h4><a id="ADAPTIVE_OMIT-XML-DECLARATION"></a><span class="deltaxml-new" style="background:#90EE90">10.1.6 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90"> If these parameters call for an XML declaration to be serialized, then an XML declaration is to be output each time the Adaptive output method delegates the serialization of a node to the XML output method. If several node items appear in the sequence to be serialized or as values in maps or arrays to be serialized, then the output will contain several XML declarations. </span></p></div></div><div class="div3"><h4><a id="ADAPTIVE_DOCTYPE"></a><span class="deltaxml-new" style="background:#90EE90">10.1.7 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameters</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-public</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters are not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method.</span></p></div><div class="div3"><h4><a id="ADAPTIVE_UNDECLARE-PREFIXES"></a><span class="deltaxml-new" style="background:#90EE90">10.1.8 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method.</span></p></div><div class="div3"><h4><a id="ADAPTIVE_NORMALIZATION-FORM"></a><span class="deltaxml-new" style="background:#90EE90">10.1.9 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_MEDIA-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">10.1.10 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">media-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_USE-CHARACTER-MAPS"></a><span class="deltaxml-new" style="background:#90EE90">10.1.11 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method </span><span><span class="deltaxml-new" style="background:#90EE90">only as elsewhere specified</span></span><span class="deltaxml-new" style="background:#90EE90">. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_BYTE-ORDER-MARK"></a><span class="deltaxml-new" style="background:#90EE90">10.1.12 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is applicable to the Adaptive output method. </span><span><span class="deltaxml-new" style="background:#90EE90"> See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> for more information.</span></span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">A byte order mark can appear only once in the serialized output. Therefore, this parameter does not get passed down to any delegated output method.</span></p></div></div><div class="div3"><h4><a id="ADAPTIVE_ESCAPE-URI-ATTRIBUTES"></a><span class="deltaxml-new" style="background:#90EE90">10.1.13 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_INCLUDE-CONTENT-TYPE"></a><span class="deltaxml-new" style="background:#90EE90">10.1.14 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_ITEM-SEPARATOR"></a><span class="deltaxml-new" style="background:#90EE90">10.1.15 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. It specifies the string to be inserted between adjacent serialized items. </span><span><span class="deltaxml-new" style="background:#90EE90"> If the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is absent, the string "</span><code><span class="deltaxml-new" style="background:#90EE90">&amp;#x000A;</span></code><span class="deltaxml-new" style="background:#90EE90">" (a single newline character) is used by the Adaptive output method as the </span><code><span class="deltaxml-new" style="background:#90EE90">item-separator</span></code><span class="deltaxml-new" style="background:#90EE90"> value. </span></span></p></div><div class="div3"><h4><a id="ADAPTIVE_ALLOW-DUPLICATE-NAMES"></a><span class="deltaxml-new" style="background:#90EE90">10.1.16 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div><div class="div3"><h4><a id="ADAPTIVE_JSON-NODE-OUTPUT-METHOD"></a><span class="deltaxml-new" style="background:#90EE90">10.1.17 Adaptive Output Method: the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> Parameter</span></h4><p><span class="deltaxml-new" style="background:#90EE90"> The </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is not </span><span><span class="deltaxml-new" style="background:#90EE90">directly</span></span><span class="deltaxml-new" style="background:#90EE90"> applicable to the Adaptive output method. </span></p></div></div></div><div class="div1"><h2><a id="character-maps"></a><span class="deltaxml-new" style="background:#90EE90">11 Character Maps</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is a list of characters and corresponding string substitutions.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Character maps allow a specific character appearing in a text or attribute node </span><span><span class="deltaxml-new" style="background:#90EE90">or a string</span></span><span class="deltaxml-new" style="background:#90EE90"> in the instance of the data model to be replaced with a specified string of characters during serialization. The string that is substituted is output "as is," and the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> performs no checks that the resulting document is well-formed. This mechanism can therefore be used to introduce arbitrary markup in the serialized output. See </span><a href="https://www.w3.org/TR/xslt-30/#character-maps"><span class="deltaxml-new" style="background:#90EE90">Section 26.1 Character Maps </span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">XT30</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> of </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> for examples of using character mapping in XSLT.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Character mapping is applied to the characters that actually appear in a text or attribute node </span><span><span class="deltaxml-new" style="background:#90EE90">or a string</span></span><span class="deltaxml-new" style="background:#90EE90"> in the instance of the data model, before any other serialization operations such as escaping or </span><a title="Unicode Normalization" class="termref" href="#unicode-normalization"><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> are applied. If a character is mapped, then it is not subjected to XML or HTML escaping, nor to Unicode Normalization. The string that is substituted for a character is not validated or processed in any way by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">, except for translation into the target encoding. In particular, it is not subjected to XML or HTML escaping, it is not subjected to Unicode Normalization, and it is not subjected to further character mapping. </span></p><p><span class="deltaxml-new" style="background:#90EE90">Character mapping is not applied to characters in text nodes whose parent elements are listed in the </span><code><span class="deltaxml-new" style="background:#90EE90">cdata-section-elements</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter, nor to characters for which output escaping has been disabled (disabling output escaping is an </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> feature), nor to characters in attribute values that are subject to </span><a title="URI Escaping" class="termref" href="#uri-escaping"><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></a><span class="deltaxml-new" style="background:#90EE90"> defined for the HTML and XHTML output methods, unless </span><a title="URI Escaping" class="termref" href="#uri-escaping"><span class="deltaxml-new" style="background:#90EE90">URI escaping</span></a><span class="deltaxml-new" style="background:#90EE90"> has been disabled using the </span><code><span class="deltaxml-new" style="background:#90EE90">escape-uri-attributes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter in the output definition.</span></p><p><span class="deltaxml-new" style="background:#90EE90">On serialization, occurrences of a character specified in the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> in text nodes</span><span><span class="deltaxml-new" style="background:#90EE90">,</span></span><span class="deltaxml-new" style="background:#90EE90"> attribute values </span><span><span class="deltaxml-new" style="background:#90EE90">and strings</span></span><span class="deltaxml-new" style="background:#90EE90"> are replaced by the corresponding string from the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p><div class="note"><p class="prefix"><b><span class="deltaxml-new" style="background:#90EE90">Note:</span></b></p><p><span class="deltaxml-new" style="background:#90EE90">Using a character map can result in non-well-formed documents if the string contains XML-significant characters. For example, it is possible to create documents containing unmatched start and end tags, references to entities that are not declared, or attributes that contain tags or unescaped quotation marks.</span></p></div><p><span class="deltaxml-new" style="background:#90EE90">If a character is mapped, then it is not subjected to XML or HTML escaping.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization error</span></a><span class="deltaxml-new" style="background:#90EE90"> [</span><a href="#ERRSERE0008" title="err:SERE0008"><span class="deltaxml-new" style="background:#90EE90">err:SERE0008</span></a><span class="deltaxml-new" style="background:#90EE90">] occurs if character mapping causes the output of a string containing a character that cannot be represented in the encoding that the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is using for output. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> signal the error.</span></p></div><div class="div1"><h2><a id="conformance"></a><span class="deltaxml-new" style="background:#90EE90">12 Conformance</span></h2><p><span class="deltaxml-new" style="background:#90EE90">Serialization is intended primarily as a component of a </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90">. [</span><a id="host-language" title="host language"><span class="deltaxml-new" style="background:#90EE90">Definition</span></a><span class="deltaxml-new" style="background:#90EE90">: A </span><b><span class="deltaxml-new" style="background:#90EE90">host language</span></b><span class="deltaxml-new" style="background:#90EE90"> is another specification that includes, by reference, this specification and all of its requirements. A host language might be a programming language such as </span><a href="#xslt-30"><span class="deltaxml-new" style="background:#90EE90">[XSL Transformations (XSLT) Version 3.0]</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a href="#xquery-31"><span class="deltaxml-new" style="background:#90EE90">[XQuery 3.1: An XML Query Language]</span></a><span class="deltaxml-new" style="background:#90EE90">, or it might be an application programming interface (API) intended to be used by programs written in some other high-level programming language. The use of the term </span><em><span class="deltaxml-new" style="background:#90EE90">language</span></em><span class="deltaxml-new" style="background:#90EE90"> is not intended to preclude the possibility that this specification might be referenced outside the context of a programming language specification.] This document relies on specifications that use it to specify conformance criteria for Serialization in their respective environments. Specifications that set conformance criteria for their use of Serialization </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> change the semantic definitions of Serialization as given in this specification, except by subsetting and/or compatible extensions. It is the responsibility of the </span><a title="host language" class="termref" href="#host-language"><span class="deltaxml-new" style="background:#90EE90">host language</span></a><span class="deltaxml-new" style="background:#90EE90"> to specify how </span><a title="serialization error" class="termref" href="#serial-err"><span class="deltaxml-new" style="background:#90EE90">serialization errors</span></a><span class="deltaxml-new" style="background:#90EE90"> are to be handled.</span></p><p><span class="deltaxml-new" style="background:#90EE90">Certain facilities in this specification are described as producing </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> results. A claim that asserts conformance with this specification </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be accompanied by documentation stating the effect of each implementation-defined feature. For convenience, a non-normative checklist of implementation-defined features is provided at </span><a href="#implementation-defined-features"><b><span class="deltaxml-new" style="background:#90EE90">E.1 Checklist of Implementation-Defined Features</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></div></div><div class="back"><div class="div1"><h2><a id="references"></a><span class="deltaxml-new" style="background:#90EE90">A References</span></h2><div class="div2"><h3><a id="normative-references"></a><span class="deltaxml-new" style="background:#90EE90">A.1 Normative References</span></h3><dl><dt class="label"><span><a id="charmod-norm"></a><span class="deltaxml-new" style="background:#90EE90">Character Model for the World Wide Web 1.0: Normalization</span></span></dt><dd><div><a href="http://www.w3.org/TR/charmod-norm/"><cite><span class="deltaxml-new" style="background:#90EE90">Character Model for the World Wide Web 1.0: Normalization</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, François Yergeau, Martin Dürst, Richard Ishida, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 01&nbsp;May&nbsp;2012. This version is http://www.w3.org/TR/2012/WD-charmod-norm-20120501/. The </span><a href="http://www.w3.org/TR/charmod-norm/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/charmod-norm/.</span></div></dd><dt class="label"><span><a id="xpath-datamodel-31"></a><span class="deltaxml-new" style="background:#90EE90">XQuery and XPath Data Model (XDM) 3.1</span></span></dt><dd><div><a href="https://www.w3.org/TR/xpath-datamodel-31/"><cite><span class="deltaxml-new" style="background:#90EE90">XQuery and XPath Data Model (XDM) 3.1</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Norman Walsh, John Snelson, Andrew Coleman, Editors. World Wide Web Consortium, 21 March 2017. This version is https://www.w3.org/TR/2017/REC-xpath-datamodel-31-20170321/. The </span><a href="https://www.w3.org/TR/xpath-datamodel-31/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at https://www.w3.org/TR/xpath-datamodel-31/.</span></div></dd><dt class="label"><span><a id="xpath-functions-31"></a><span class="deltaxml-new" style="background:#90EE90">XQuery and XPath Functions and Operators 3.1</span></span></dt><dd><div><a href="https://www.w3.org/TR/xpath-functions-31/"><cite><span class="deltaxml-new" style="background:#90EE90">XQuery and XPath Functions and Operators 3.1</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Michael Kay, Editor. World Wide Web Consortium, 21 March 2017. This version is https://www.w3.org/TR/2017/REC-xpath-functions-31-20170321/. The </span><a href="https://www.w3.org/TR/xpath-functions-31/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at https://www.w3.org/TR/xpath-functions-31/.</span></div></dd><dt class="label"><span><a id="html5"></a><span class="deltaxml-new" style="background:#90EE90">HTML5</span></span></dt><dd><div><a href="http://www.w3.org/TR/html5/"><cite><span class="deltaxml-new" style="background:#90EE90">HTML5</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Robin Berjon, Steve Faulkner, Travis Leithead, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 04&nbsp;Feb&nbsp;2014. This version is http://www.w3.org/TR/2014/CR-html5-20140204/. The </span><a href="http://www.w3.org/TR/html5/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/html5/.</span></div></dd><dt class="label"><span><a id="html401"></a><span class="deltaxml-new" style="background:#90EE90">HTML</span></span></dt><dd><div><a href="http://www.w3.org/TR/html401/"><cite><span class="deltaxml-new" style="background:#90EE90">HTML 4.01 Specification</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Dave Raggett, Arnaud Le Hors, and Ian Jacobs, Editors. World Wide Web Consortium, 24&nbsp;Dec&nbsp;1999. This version is http://www.w3.org/TR/1999/REC-html401-19991224/. The </span><a href="http://www.w3.org/TR/html401/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/html401/</span></div></dd><dt class="label"><span><a id="html-polyglot"></a><span class="deltaxml-new" style="background:#90EE90">POLYGLOT</span></span></dt><dd><div><a href="http://www.w3.org/TR/html-polyglot/"><cite><span class="deltaxml-new" style="background:#90EE90">Polyglot Markup: A robust profile of the HTML5 vocabulary</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Eliot Graff and Leif Halvard Silli, Editors. World Wide Web Consortium, 04&nbsp;Feb&nbsp;2014. This version is http://www.w3.org/TR/2014/WD-html-polyglot-20140204/. The </span><a href="http://www.w3.org/TR/html-polyglot/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/html-polyglot/.</span></div></dd><dt class="label"><span><a id="IANA"></a><span class="deltaxml-new" style="background:#90EE90">IANA</span></span></dt><dd><div><a href="http://www.iana.org/assignments/character-sets"><cite><span class="deltaxml-new" style="background:#90EE90">Character Sets</span></cite></a><span class="deltaxml-new" style="background:#90EE90">. Internet Assigned Numbers Authority. Oct 2012. </span></div></dd><dt class="label"><span><a id="RFC2046"></a><span class="deltaxml-new" style="background:#90EE90">RFC2046</span></span></dt><dd><div><a href="http://www.ietf.org/rfc/rfc2046.txt"><cite><span class="deltaxml-new" style="background:#90EE90">Multipurpose Internet Mail Extensions (MIME) Part Two: Media Types</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, N. Freed, N. Borenstein. Network Working Group, IETF, Nov 1996. </span></div></dd><dt class="label"><span><a id="RFC2119"></a><span class="deltaxml-new" style="background:#90EE90">RFC2119</span></span></dt><dd><div><a href="http://www.ietf.org/rfc/rfc2119.txt"><cite><span class="deltaxml-new" style="background:#90EE90">Key words for use in RFCs to Indicate Requirement Levels</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, S. Bradner. Network Working Group, IETF, Mar 1997. </span></div></dd><dt class="label"><span><a id="RFC2978"></a><span class="deltaxml-new" style="background:#90EE90">RFC2978</span></span></dt><dd><div><a href="http://www.ietf.org/rfc/rfc2978.txt"><cite><span class="deltaxml-new" style="background:#90EE90">IANA Charset Registration Procedures</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, N. Freed and J. Postel Network Working Group, IETF, Oct 2000. </span></div></dd><dt class="label"><span><a id="RFC2854"></a><span class="deltaxml-new" style="background:#90EE90">RFC2854</span></span></dt><dd><div><a href="http://www.ietf.org/rfc/rfc2854.txt"><cite><span class="deltaxml-new" style="background:#90EE90">The 'text/html' Media Type</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, D. Connolly, L. Masinter. Network Working Group, IETF, Jun 2000. </span></div></dd><dt class="label"><span><a id="RFC3236"></a><span class="deltaxml-new" style="background:#90EE90">RFC3236</span></span></dt><dd><div><a href="http://www.ietf.org/rfc/rfc3236.txt"><cite><span class="deltaxml-new" style="background:#90EE90">The 'application/xhtml+xml' Media Type</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, M. Baker and P. Stark. Network Working Group, IETF, Jan 2002. </span></div></dd><dt class="label"><span><a id="UNICODE-ENCODING"></a><span class="deltaxml-new" style="background:#90EE90">Unicode Encoding</span></span></dt><dd><div><a href="http://www.unicode.org/reports/tr17/"><cite><span class="deltaxml-new" style="background:#90EE90">Unicode Character Encoding Model</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Unicode Consortium. Unicode Standard Annex #17. </span></div></dd><dt class="label"><span><a id="UNICODE-NORMALIZATION-FORM"></a><span class="deltaxml-new" style="background:#90EE90">UAX #15: Unicode Normalization Forms</span></span></dt><dd><div><a href="http://www.unicode.org/reports/tr15/"><cite><span class="deltaxml-new" style="background:#90EE90">Unicode Normalization Forms</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Unicode Consortium. Unicode Standard Annex #15. </span></div></dd><dt class="label"><span><a id="xhtml1"></a><span class="deltaxml-new" style="background:#90EE90">XHTML 1.0</span></span></dt><dd><div><a href="http://www.w3.org/TR/xhtml1/"><cite><span class="deltaxml-new" style="background:#90EE90">XHTML™ 1.0 The Extensible HyperText Markup Language (Second Edition)</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Steven Pemberton, Editor. World Wide Web Consortium, 01&nbsp;Aug&nbsp;2002. This version is http://www.w3.org/TR/2002/REC-xhtml1-20020801. The </span><a href="http://www.w3.org/TR/xhtml1/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xhtml1/.</span></div></dd><dt class="label"><span><a id="xhtml11"></a><span class="deltaxml-new" style="background:#90EE90">XHTML 1.1</span></span></dt><dd><div><a href="http://www.w3.org/TR/xhtml11/"><cite><span class="deltaxml-new" style="background:#90EE90">XHTML™ 1.1 - Module-based XHTML - Second Edition</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Shane McCarron and Masayasu Ishikawa, Editors. World Wide Web Consortium, 23&nbsp;Nov&nbsp;2010. This version is http://www.w3.org/TR/2010/REC-xhtml11-20101123. The </span><a href="http://www.w3.org/TR/xhtml11/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xhtml11/.</span></div></dd><dt class="label"><span><a id="xml"></a><span class="deltaxml-new" style="background:#90EE90">XML10</span></span></dt><dd><div><a href="http://www.w3.org/TR/xml/"><cite><span class="deltaxml-new" style="background:#90EE90">Extensible Markup Language (XML) 1.0 (Fifth Edition)</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Tim Bray, Jean Paoli, Michael Sperberg-McQueen, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 26&nbsp;Nov&nbsp;2008. This version is http://www.w3.org/TR/2008/REC-xml-20081126/. The </span><a href="http://www.w3.org/TR/xml/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xml.</span></div></dd><dt class="label"><span><a id="xml11"></a><span class="deltaxml-new" style="background:#90EE90">XML11</span></span></dt><dd><div><a href="http://www.w3.org/TR/xml11/"><cite><span class="deltaxml-new" style="background:#90EE90">Extensible Markup Language (XML) 1.1 (Second Edition)</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Tim Bray, Jean Paoli, Michael Sperberg-McQueen, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 16&nbsp;Aug&nbsp;2006. This version is http://www.w3.org/TR/2006/REC-xml11-20060816. The </span><a href="http://www.w3.org/TR/xml11/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xml11/.</span></div></dd><dt class="label"><span><a id="xml-names"></a><span class="deltaxml-new" style="background:#90EE90">XML Names</span></span></dt><dd><div><a href="http://www.w3.org/TR/xml-names/"><cite><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML 1.0 (Third Edition)</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Tim Bray, Dave Hollander, Andrew Layman, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 08&nbsp;Dec&nbsp;2009. This version is http://www.w3.org/TR/2009/REC-xml-names-20091208/. The </span><a href="http://www.w3.org/TR/xml-names/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xml-names/.</span></div></dd><dt class="label"><span><a id="xml-names11"></a><span class="deltaxml-new" style="background:#90EE90">XML Names 1.1</span></span></dt><dd><div><a href="http://www.w3.org/TR/xml-names11/"><cite><span class="deltaxml-new" style="background:#90EE90">Namespaces in XML 1.1 (Second Edition)</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Tim Bray, Dave Hollander, Andrew Layman, and Richard Tobin, Editors. World Wide Web Consortium, 16&nbsp;Aug&nbsp;2006. This version is http://www.w3.org/TR/2006/REC-xml-names11-20060816. The </span><a href="http://www.w3.org/TR/xml-names11/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xml-names11/.</span></div></dd><dt class="label"><span><a id="xmlschema-1"></a><span class="deltaxml-new" style="background:#90EE90">XML Schema</span></span></dt><dd><div><a href="http://www.w3.org/TR/xmlschema-1/"><cite><span class="deltaxml-new" style="background:#90EE90">XML Schema Part 1: Structures Second Edition</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Henry Thompson, David Beech, Murray Maloney, and Noah Mendelsohn, Editors. World Wide Web Consortium, 28&nbsp;Oct&nbsp;2004. This version is http://www.w3.org/TR/2004/REC-xmlschema-1-20041028/. The </span><a href="http://www.w3.org/TR/xmlschema-1/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xmlschema-1/.</span></div></dd><dt class="label"><span><a id="xpath-31"></a><span class="deltaxml-new" style="background:#90EE90">XML Path Language (XPath) 3.1</span></span></dt><dd><div><a href="https://www.w3.org/TR/xpath-31/"><cite><span class="deltaxml-new" style="background:#90EE90">XML Path Language (XPath) 3.1</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Jonathan Robie, Michael Dyck and Josh Spiegel, Editors. World Wide Web Consortium, 21 March 2017. This version is https://www.w3.org/TR/2017/REC-xpath-31-20170321/. The </span><a href="https://www.w3.org/TR/xpath-31/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at https://www.w3.org/TR/xpath-31/.</span></div></dd><dt class="label"><span><a id="xquery-31"></a><span class="deltaxml-new" style="background:#90EE90">XQuery 3.1: An XML Query Language</span></span></dt><dd><div><a href="https://www.w3.org/TR/xquery-31/"><cite><span class="deltaxml-new" style="background:#90EE90">XQuery 3.1: An XML Query Language</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Jonathan Robie, Michael Dyck and Josh Spiegel, Editors. World Wide Web Consortium, 21 March 2017. This version is https://www.w3.org/TR/2017/REC-xquery-31-20170321/. The </span><a href="https://www.w3.org/TR/xquery-31/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at https://www.w3.org/TR/xquery-31/.</span></div></dd><dt class="label"><span><a id="xslt-30"></a><span class="deltaxml-new" style="background:#90EE90">XSL Transformations (XSLT) Version 3.0</span></span></dt><dd><div><a href="https://www.w3.org/TR/xslt-30/"><cite><span class="deltaxml-new" style="background:#90EE90">XSL Transformations (XSLT) Version 3.0</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Michael Kay, Editor. World Wide Web Consortium, 7 February 2017. This version is https://www.w3.org/TR/2017/CR-xslt-30-20170207/. The </span><a href="https://www.w3.org/TR/xslt-30/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at https://www.w3.org/TR/xslt-30/.</span></div></dd><dt class="label"><span><a id="rfc7159"></a><span class="deltaxml-new" style="background:#90EE90">RFC 7159</span></span></dt><dd><div><span class="deltaxml-new" style="background:#90EE90">IETF. </span><em><span class="deltaxml-new" style="background:#90EE90">RFC 7159: The Javascript Object Notation (JSON) Data Interchange Format</span></em><span><span class="deltaxml-new" style="background:#90EE90">, T. Bray, Editor. Internet Engineering Task Force, March 2014.</span></span><span class="deltaxml-new" style="background:#90EE90"> Available at: </span><a href="http://www.rfc-editor.org/rfc/rfc7159.txt"><span class="deltaxml-new" style="background:#90EE90">http://www.rfc-editor.org/rfc/rfc7159.txt</span></a></div></dd></dl></div><div class="div2"><h3><a id="informative-references"></a><span class="deltaxml-new" style="background:#90EE90">A.2 Informative References</span></h3><dl><dt class="label"><span><a id="ECMA-404"></a><span class="deltaxml-new" style="background:#90EE90">The JSON Data Interchange Format</span></span></dt><dd><div><a href="http://www.ecma-international.org/publications/standards/Ecma-404.htm"><cite><span class="deltaxml-new" style="background:#90EE90">The JSON Data Interchange Format</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, ECMA International. </span></div></dd><dt class="label"><span><a id="xhtml-modularization"></a><span class="deltaxml-new" style="background:#90EE90">XHTML Modularization</span></span></dt><dd><div><a href="http://www.w3.org/TR/xhtml-modularization/"><cite><span class="deltaxml-new" style="background:#90EE90">XHTML™ Modularization 1.1 - Second Edition</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Shane McCarron, Editor. World Wide Web Consortium, 29&nbsp;Jul&nbsp;2010. This version is http://www.w3.org/TR/2010/REC-xhtml-modularization-20100729. The </span><a href="http://www.w3.org/TR/xhtml-modularization/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at http://www.w3.org/TR/xhtml-modularization/.</span></div></dd><dt class="label"><span><a id="xpath-datamodel"></a><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0 and XPath 2.0 Data Model</span></span></dt><dd><div><a href="https://www.w3.org/TR/xpath-datamodel/"><cite><span class="deltaxml-new" style="background:#90EE90">XQuery 1.0 and XPath 2.0 Data Model (XDM) (Second Edition)</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Norman Walsh, Mary Fernández, Ashok Malhotra, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 14 December 2010. This version is https://www.w3.org/TR/2010/REC-xpath-datamodel-20101214/. The </span><a href="https://www.w3.org/TR/xpath-datamodel/"><span class="deltaxml-new" style="background:#90EE90">latest version</span></a><span class="deltaxml-new" style="background:#90EE90"> is available at https://www.w3.org/TR/xpath-datamodel/.</span></div></dd><dt class="label"><span><a id="serialization-10-2ed"></a><span class="deltaxml-new" style="background:#90EE90">XSLT 2.0 and XQuery 1.0 Serialization (Second Edition)</span></span></dt><dd><div><a href="http://www.w3.org/TR/2010/REC-xslt-xquery-serialization-20101214/"><cite><span class="deltaxml-new" style="background:#90EE90">XSLT 2.0 and XQuery 1.0 Serialization (Second Edition), W3C Recommendation</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Henry Zongaro, Norman Walsh, Joanne Tong, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 14&nbsp; December&nbsp; 2010. This version is http://www.w3.org/TR/2010/REC-xslt-xquery-serialization-20101214/</span></div></dd><dt class="label"><span><a id="serialization-31-fpwd"></a><span class="deltaxml-new" style="background:#90EE90">XSLT and XQuery Serialization 3.1 (First Public Working Draft)</span></span></dt><dd><div><a href="http://www.w3.org/TR/2014/WD-xslt-xquery-serialization-31-20140424/"><cite><span class="deltaxml-new" style="background:#90EE90">XSLT and XQuery Serialization, W3C First Public Working Draft</span></cite></a><span class="deltaxml-new" style="background:#90EE90">, Andrew Coleman, C.&nbsp;M.&nbsp;Sperberg-McQueen, </span><em><span class="deltaxml-new" style="background:#90EE90">et. al.</span></em><span class="deltaxml-new" style="background:#90EE90">, Editors. World Wide Web Consortium, 24&nbsp;April&nbsp;2014.</span></div></dd></dl></div></div><div class="div1"><h2><a id="serparams-schema"></a><span class="deltaxml-new" style="background:#90EE90">B Schema for Serialization Parameters</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The following schema describes the structure of a Data Model instance that can be used to specify the settings of serialization parameters using the mechanism described in </span><a href="#serparams-in-xdm-instance"><b><span class="deltaxml-new" style="background:#90EE90">3.1 Setting Serialization Parameters by Means of a Data Model Instance</span></b></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><p><span class="deltaxml-new" style="background:#90EE90">A copy of this schema is available at </span><a href="http://www.w3.org/2017/01/xslt-xquery-serialization/schema-for-serialization-parameters.xsd"><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2017/01/xslt-xquery-serialization/schema-for-serialization-parameters.xsd</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p><pre><span class="deltaxml-new" style="background:#90EE90">&lt;xs:schema xmlns:xs="http://www.w3.org/2001/XMLSchema" targetNamespace="http://www.w3.org/2010/xslt-xquery-serialization" xmlns:output="http://www.w3.org/2010/xslt-xquery-serialization" elementFormDefault="qualified"&gt; &lt;xs:annotation&gt; &lt;xs:documentation&gt; This is a schema for serialization parameters for XSLT and XQuery Serialization 3.1. This schema is available for use under the conditions of the W3C Software License published at http://www.w3.org/Consortium/Legal/copyright-software-19980720 It defines a schema for XML Infoset instances with which a user of a host language MAY specify serialization parameters for use in serializing an instance of the XQuery and XPath Data Model. It also provides hooks that allow the inclusion of implementation- defined serialization parameters and implementation-defined modifiers to serialization parameters. &lt;/xs:documentation&gt; &lt;/xs:annotation&gt; &lt;xs:simpleType name="EQName"&gt; &lt;!--* In principle, this could be declared as a single-step * restriction of xs:token with the pattern * "Q\{(.*)\}[\i-[:]][\c-[:]]*". We derive it in two * steps because a bug causes some widely used processors * not to support character-class subtraction. *--&gt; &lt;xs:restriction&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="xs:token"&gt; &lt;xs:pattern value="Q\{[^{}]*\}[\i][\c]*"/&gt; &lt;xs:whiteSpace value="collapse"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:pattern value="Q\{.*\}[^:]*"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="Prefixed-QName"&gt; &lt;xs:annotation&gt; &lt;xs:documentation&gt; Prefixed-QName matches only QNames with a non-null prefix: that is, only QNames with a colon. &lt;/xs:documentation&gt; &lt;/xs:annotation&gt; &lt;xs:restriction base="xs:QName"&gt; &lt;xs:pattern value=".*:.*"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="Qualified-EQName"&gt; &lt;xs:annotation&gt; &lt;xs:documentation&gt; Qualified-EQName matches only EQNames with a non-null namespace name. &lt;/xs:documentation&gt; &lt;/xs:annotation&gt; &lt;xs:restriction base="output:EQName"&gt; &lt;xs:pattern value=".*\{(.*\S.*)\}.*"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="QName-or-EQName"&gt; &lt;xs:union memberTypes="xs:QName output:EQName"/&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="QNames-type"&gt; &lt;xs:list itemType="output:QName-or-EQName"/&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="yes-no-type"&gt; &lt;xs:restriction base="xs:token"&gt; &lt;xs:enumeration value="no"/&gt; &lt;xs:enumeration value="yes"/&gt; &lt;xs:enumeration value="false"/&gt; &lt;xs:enumeration value="true"/&gt; &lt;xs:enumeration value="0"/&gt; &lt;xs:enumeration value="1"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="yes-no-omit-type"&gt; &lt;xs:restriction base="xs:token"&gt; &lt;xs:enumeration value="no"/&gt; &lt;xs:enumeration value="omit"/&gt; &lt;xs:enumeration value="yes"/&gt; &lt;xs:enumeration value="false"/&gt; &lt;xs:enumeration value="true"/&gt; &lt;xs:enumeration value="0"/&gt; &lt;xs:enumeration value="1"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="char-type"&gt; &lt;xs:restriction base="xs:string"&gt; &lt;xs:maxLength value="1"/&gt; &lt;xs:minLength value="1"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="encoding-string-type"&gt; &lt;xs:restriction base="xs:token"&gt; &lt;xs:pattern value="[A-Za-z][A-Za-z0-9._\-]*"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="json-node-output-method-type"&gt; &lt;xs:union&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="xs:token"&gt; &lt;xs:enumeration value="html"/&gt; &lt;xs:enumeration value="text"/&gt; &lt;xs:enumeration value="xml"/&gt; &lt;xs:enumeration value="xhtml"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="output:EQName"&gt; &lt;xs:pattern value="Q\{\s*\}(html|text|xml|xhtml)"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;!--* other values must have non-null namespace URI *--&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="output:Prefixed-QName"/&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="output:Qualified-EQName"/&gt; &lt;/xs:simpleType&gt; &lt;/xs:union&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="method-type"&gt; &lt;xs:union&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="xs:token"&gt; &lt;xs:enumeration value="html"/&gt; &lt;xs:enumeration value="text"/&gt; &lt;xs:enumeration value="xml"/&gt; &lt;xs:enumeration value="xhtml"/&gt; &lt;xs:enumeration value="json"/&gt; &lt;xs:enumeration value="adaptive"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="output:EQName"&gt; &lt;xs:pattern value="Q\{\s*\}(html|text|xml|xhtml|json|adaptive)"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;!--* other values must have non-null namespace URI *--&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="output:Prefixed-QName"/&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType&gt; &lt;xs:restriction base="output:Qualified-EQName"/&gt; &lt;/xs:simpleType&gt; &lt;/xs:union&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="pubid-char-string-type"&gt; &lt;xs:restriction base="xs:token"&gt; &lt;xs:pattern value="([- \r\n\ta-zA-Z0-9'()+,./:=?;!*#@$_%])*"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;xs:simpleType name="system-id-string-type"&gt; &lt;xs:restriction base="xs:string"&gt; &lt;xs:pattern value="[^']*|[^&amp;quot;]*"/&gt; &lt;/xs:restriction&gt; &lt;/xs:simpleType&gt; &lt;!-- - Base type of all serialization parameter types --&gt; &lt;xs:complexType name="base-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:restriction base="xs:anyType"&gt; &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt; &lt;/xs:restriction&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Generic string serialization parameters --&gt; &lt;xs:complexType name="string-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="xs:string" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Generic tokenized string serialization parameters --&gt; &lt;xs:complexType name="tokenized-string-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="xs:token" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Generic decimal serialization parameters --&gt; &lt;xs:complexType name="decimal-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="xs:decimal" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter type for "yes", "no", "true", "false", "0" or "1" - serialization parameters --&gt; &lt;xs:complexType name="yes-no-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:yes-no-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter type for list of xs:QName - serialization parameters --&gt; &lt;xs:complexType name="QNames-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:QNames-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter type for "yes", "no", "true", "false", "0", "1" or "omit" - serialization parameters --&gt; &lt;xs:complexType name="yes-no-omit-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:yes-no-omit-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter type for NMTOKEN serialization parameters --&gt; &lt;xs:complexType name="NMTOKEN-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="xs:NMTOKEN" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Base element declaration for all serialization parameter elements --&gt; &lt;xs:element name="serialization-parameter-element" abstract="true" type="output:base-param-type"/&gt; &lt;!-- - Serialization parameter element for allow-duplicate-names parameter --&gt; &lt;xs:element id="allow-duplicate-names" name="allow-duplicate-names" type="output:yes-no-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for byte-order-mark parameter --&gt; &lt;xs:element id="byte-order-mark" name="byte-order-mark" type="output:yes-no-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for cdata-section-elements parameter --&gt; &lt;xs:element id="cdata-section-elements" name="cdata-section-elements" type="output:QNames-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter type for doctype-public parameter --&gt; &lt;xs:complexType name="doctype-public-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:pubid-char-string-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter element for doctype-public parameter --&gt; &lt;xs:element id="doctype-public" name="doctype-public" type="output:doctype-public-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter type for doctype-system parameter --&gt; &lt;xs:complexType name="doctype-system-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:system-id-string-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter element for doctype-system parameter --&gt; &lt;xs:element id="doctype-system" name="doctype-system" type="output:doctype-system-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter type for encoding parameter --&gt; &lt;xs:complexType name="encoding-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:encoding-string-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter element for encoding parameter --&gt; &lt;xs:element id="encoding" name="encoding" type="output:encoding-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for escape-uri-attributes parameter --&gt; &lt;xs:element id="escape-uri-attributes" name="escape-uri-attributes" type="output:yes-no-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for html-version parameter --&gt; &lt;xs:element id="html-version" name="html-version" type="output:decimal-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for include-content-type parameter --&gt; &lt;xs:element id="include-content-type" name="include-content-type" type="output:yes-no-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for indent parameter --&gt; &lt;xs:element id="indent" name="indent" type="output:yes-no-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for item-separator parameter --&gt; &lt;xs:element id="item-separator" name="item-separator" type="output:string-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter type for json-node-output-method parameter --&gt; &lt;xs:complexType name="json-node-output-method-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:json-node-output-method-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter element for json-node-output-method parameter --&gt; &lt;xs:element id="json-node-output-method" name="json-node-output-method" type="output:json-node-output-method-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for media-type parameter --&gt; &lt;xs:element id="media-type" name="media-type" type="output:tokenized-string-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter type for method parameter --&gt; &lt;xs:complexType name="method-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:attribute name="value" type="output:method-type" use="required"/&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter element for method parameter --&gt; &lt;xs:element id="method" name="method" type="output:method-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for normalization-form parameter --&gt; &lt;xs:element id="normalization-form" name="normalization-form" type="output:NMTOKEN-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for omit-xml-declaration parameter --&gt; &lt;xs:element id="omit-xml-declaration" name="omit-xml-declaration" type="output:yes-no-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for standalone parameter --&gt; &lt;xs:element id="standalone" name="standalone" type="output:yes-no-omit-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for suppress-indentation parameter --&gt; &lt;xs:element id="suppress-indentation" name="suppress-indentation" type="output:QNames-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for undeclare-prefixes parameter --&gt; &lt;xs:element id="undeclare-prefixes" name="undeclare-prefixes" type="output:yes-no-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter type for use-character-maps parameter --&gt; &lt;xs:complexType name="use-character-maps-param-type"&gt; &lt;xs:complexContent&gt; &lt;xs:extension base="output:base-param-type"&gt; &lt;xs:sequence&gt; &lt;xs:element name="character-map" minOccurs="0" maxOccurs="unbounded"&gt; &lt;xs:complexType&gt; &lt;xs:attribute name="character" type="output:char-type"/&gt; &lt;xs:attribute name="map-string" type="xs:string"/&gt; &lt;xs:anyAttribute namespace="##other" processContents="lax"/&gt; &lt;/xs:complexType&gt; &lt;/xs:element&gt; &lt;xs:any minOccurs="0" namespace="##other" processContents="lax"/&gt; &lt;/xs:sequence&gt; &lt;/xs:extension&gt; &lt;/xs:complexContent&gt; &lt;/xs:complexType&gt; &lt;!-- - Serialization parameter element for use-character-maps parameter --&gt; &lt;xs:element id="use-character-maps" name="use-character-maps" type="output:use-character-maps-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;!-- - Serialization parameter element for version parameter --&gt; &lt;xs:element id="version" name="version" type="output:tokenized-string-param-type" substitutionGroup = "output:serialization-parameter-element"/&gt; &lt;xs:element name="serialization-parameters"&gt; &lt;xs:complexType&gt; &lt;xs:choice minOccurs="0" maxOccurs="unbounded"&gt; &lt;xs:element ref="output:serialization-parameter-element"/&gt; &lt;xs:any namespace="##other" processContents="lax"/&gt; &lt;/xs:choice&gt; &lt;/xs:complexType&gt; &lt;/xs:element&gt; &lt;/xs:schema&gt; </span></pre></div><div class="div1"><h2><a id="id-errors"></a><span class="deltaxml-new" style="background:#90EE90">C Summary of Error Conditions</span></h2><p><span class="deltaxml-new" style="background:#90EE90">This document uses the </span><code><span class="deltaxml-new" style="background:#90EE90">err</span></code><span class="deltaxml-new" style="background:#90EE90"> prefix which represents the same namespace URI (http://www.w3.org/2005/xqt-errors) as defined in </span><a href="#xpath-31"><span class="deltaxml-new" style="background:#90EE90">[XML Path Language (XPath) 3.1]</span></a><span class="deltaxml-new" style="background:#90EE90">. Use of this namespace prefix binding in this document is not normative.</span></p><dl><dt><a id="ERRSENR0001"></a><span class="deltaxml-new" style="background:#90EE90">err:SENR0001</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if an item in </span><em><span class="deltaxml-new" style="background:#90EE90">S</span><sub><span class="deltaxml-new" style="background:#90EE90">6</span></sub></em><span class="deltaxml-new" style="background:#90EE90"> in </span><a title="sequence normalization" class="termref" href="#sequence-normalization"><span class="deltaxml-new" style="background:#90EE90">sequence normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> is an attribute node or a namespace node.</span></p></dd><dt><a id="ERRSERE0003"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0003</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is unable to satisfy the rules for either a well-formed XML document entity or a well-formed XML external general parsed entity, or both, except for content modified by the character expansion phase of serialization.</span></p></dd><dt><a id="ERRSEPM0004"></a><span class="deltaxml-new" style="background:#90EE90">err:SEPM0004</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error to specify the doctype-system parameter, or to specify the standalone parameter with a value other than </span><code><span class="deltaxml-new" style="background:#90EE90">omit</span></code><span class="deltaxml-new" style="background:#90EE90">, if the instance of the data model contains text nodes or multiple element nodes as children of the root node.</span></p></dd><dt><a id="ERRSERE0005"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0005</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the serialized result would contain an </span><a href="https://www.w3.org/TR/REC-xml-names/#NT-NCName"><span class="deltaxml-new" style="background:#90EE90">NCName</span></a><sup><small><span class="deltaxml-new" style="background:#90EE90">Names</span></small></sup><span class="deltaxml-new" style="background:#90EE90"> that contains a character that is not permitted by the version of Namespaces in XML specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></dd><dt><a id="ERRSERE0006"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0006</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the serialized result would contain a character that is not permitted by the version of XML specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></dd><dt><a id="ERRSESU0007"></a><span class="deltaxml-new" style="background:#90EE90">err:SESU0007</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if an output encoding other than </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-8</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">UTF-16</span></code><span class="deltaxml-new" style="background:#90EE90"> is requested and the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not support that encoding.</span></p></dd><dt><a id="ERRSERE0008"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0008</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if a character that cannot be represented in the encoding that the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is using for output appears in a context where character references are not allowed (for example if the character occurs in the name of an element).</span></p></dd><dt><a id="ERRSEPM0009"></a><span class="deltaxml-new" style="background:#90EE90">err:SEPM0009</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the </span><code><span class="deltaxml-new" style="background:#90EE90">omit-xml-declaration</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has the value </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, and the </span><code><span class="deltaxml-new" style="background:#90EE90">standalone</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute has a value other than </span><code><span class="deltaxml-new" style="background:#90EE90">omit</span></code><span class="deltaxml-new" style="background:#90EE90">; or the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter has a value other than </span><code><span class="deltaxml-new" style="background:#90EE90">1.0</span></code><span class="deltaxml-new" style="background:#90EE90"> and the </span><code><span class="deltaxml-new" style="background:#90EE90">doctype-system</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is specified.</span></p></dd><dt><a id="ERRSEPM0010"></a><span class="deltaxml-new" style="background:#90EE90">err:SEPM0010</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the output method is </span><code><span class="deltaxml-new" style="background:#90EE90">xml</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">xhtml</span></code><span class="deltaxml-new" style="background:#90EE90">, the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">undeclare-prefixes</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is </span><span><span class="deltaxml-new" style="background:#90EE90">one of</span></span><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">, and the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is 1.0.</span></p></dd><dt><a id="ERRSESU0011"></a><span class="deltaxml-new" style="background:#90EE90">err:SESU0011</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter specifies a normalization form that is not supported by the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><a id="ERRSERE0012"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0012</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter is </span><code><span class="deltaxml-new" style="background:#90EE90">fully-normalized</span></code><span class="deltaxml-new" style="background:#90EE90"> and any relevant construct of the result begins with a combining character.</span></p></dd><dt><a id="ERRSESU0013"></a><span class="deltaxml-new" style="background:#90EE90">err:SESU0013</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> does not support the version of XML or HTML specified by the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></dd><dt><a id="ERRSERE0014"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0014</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error to use the HTML output method if characters which are permitted in XML but not in HTML appear in the instance of the data model.</span></p></dd><dt><a id="ERRSERE0015"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0015</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error to use the HTML output method when </span><code><span class="deltaxml-new" style="background:#90EE90">&gt;</span></code><span class="deltaxml-new" style="background:#90EE90"> appears within a processing instruction in the data model instance being serialized.</span></p></dd><dt><a id="ERRSEPM0016"></a><span class="deltaxml-new" style="background:#90EE90">err:SEPM0016</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if a parameter value is invalid for the defined domain.</span></p></dd><dt><a id="ERRSEPM0017"></a><span class="deltaxml-new" style="background:#90EE90">err:SEPM0017</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if evaluating an expression in order to extract the setting of a serialization parameter from a data model instance would yield an error.</span></p></dd><dt><a id="ERRSEPM0018"></a><span class="deltaxml-new" style="background:#90EE90">err:SEPM0018</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if evaluating an expression in order to extract the setting of the </span><code><span class="deltaxml-new" style="background:#90EE90">use-character-maps</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter from a data model instance would yield a sequence of length greater than one.</span></p></dd><dt><a id="ERRSEPM0019"></a><span class="deltaxml-new" style="background:#90EE90">err:SEPM0019</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if an instance of the data model used to specify the settings of serialization parameters specifies the value of the same parameter more than once.</span></p></dd><dt><a id="ERRSERE0020"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0020</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if a numeric value being serialized using the JSON output method cannot be represented in the JSON grammar (e.g. </span><code><span class="deltaxml-new" style="background:#90EE90">+INF</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">-INF</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">NaN</span></code><span class="deltaxml-new" style="background:#90EE90">). </span></p></dd><dt><a id="ERRSERE0021"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0021</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if a sequence being serialized using the JSON output method includes items for which no rules are provided in the appropriate section of the serialization rules.</span></p></dd><dt><a id="ERRSERE0022"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0022</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if a map being serialized using the JSON output method has two keys with the same string value, unless the </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> has the value </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code></span><span class="deltaxml-new" style="background:#90EE90">.</span></p></dd><dt><a id="ERRSERE0023"></a><span class="deltaxml-new" style="background:#90EE90">err:SERE0023</span></dt><dd><p><span class="deltaxml-new" style="background:#90EE90">It is an error if a sequence being serialized using the JSON output method is of length greater than one.</span></p></dd></dl></div><div class="div1"><h2><a id="list-of-uri-attributes"></a><span class="deltaxml-new" style="background:#90EE90">D List of URI Attributes</span></h2><p><span class="deltaxml-new" style="background:#90EE90">The following list of attributes are declared as type </span><code><span class="deltaxml-new" style="background:#90EE90">%URI</span></code><span class="deltaxml-new" style="background:#90EE90"> or </span><code><span class="deltaxml-new" style="background:#90EE90">%UriList</span></code><span class="deltaxml-new" style="background:#90EE90"> for a given HTML or XHTML element, with the exception of the </span><code><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute for element </span><code><span class="deltaxml-new" style="background:#90EE90">A</span></code><span class="deltaxml-new" style="background:#90EE90"> which is not a URI type. The </span><code><span class="deltaxml-new" style="background:#90EE90">name</span></code><span class="deltaxml-new" style="background:#90EE90"> attribute for element </span><code><span class="deltaxml-new" style="background:#90EE90">A</span></code><strong><span class="deltaxml-new" style="background:#90EE90">SHOULD</span></strong><span class="deltaxml-new" style="background:#90EE90"> be escaped as is recommended by the HTML Recommendation </span><a href="#html401"><span class="deltaxml-new" style="background:#90EE90">[HTML]</span></a><span class="deltaxml-new" style="background:#90EE90"> in Appendix B.2.1.</span></p><table style="width:500px" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Attributes of type URI</span></caption><thead><tr><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">Attributes</span></th><th style="text-align:left"><span class="deltaxml-new" style="background:#90EE90">Elements</span></th></tr></thead><tbody><tr><td><span class="deltaxml-new" style="background:#90EE90">action</span></td><td><span class="deltaxml-new" style="background:#90EE90">FORM</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">archive</span></td><td><span class="deltaxml-new" style="background:#90EE90">OBJECT</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">background</span></td><td><span class="deltaxml-new" style="background:#90EE90">BODY</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">cite</span></td><td><span class="deltaxml-new" style="background:#90EE90">BLOCKQUOTE, DEL, INS, Q</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">classid</span></td><td><span class="deltaxml-new" style="background:#90EE90">OBJECT</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">codebase</span></td><td><span class="deltaxml-new" style="background:#90EE90">APPLET, OBJECT</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">data</span></td><td><span class="deltaxml-new" style="background:#90EE90">OBJECT</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">datasrc</span></td><td><span class="deltaxml-new" style="background:#90EE90">BUTTON, DIV, INPUT, OBJECT, SELECT, SPAN, TABLE, TEXTAREA</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">for</span></td><td><span class="deltaxml-new" style="background:#90EE90">SCRIPT</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">formaction</span></td><td><span class="deltaxml-new" style="background:#90EE90">BUTTON, INPUT</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">href</span></td><td><span class="deltaxml-new" style="background:#90EE90">A, AREA, BASE, LINK</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">icon</span></td><td><span class="deltaxml-new" style="background:#90EE90">COMMAND</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">longdesc</span></td><td><span class="deltaxml-new" style="background:#90EE90">FRAME, IFRAME, IMG</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">manifest</span></td><td><span class="deltaxml-new" style="background:#90EE90">HTML</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">name</span></td><td><span class="deltaxml-new" style="background:#90EE90">A</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">poster</span></td><td><span class="deltaxml-new" style="background:#90EE90">VIDEO</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">profile</span></td><td><span class="deltaxml-new" style="background:#90EE90">HEAD</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">src</span></td><td><span class="deltaxml-new" style="background:#90EE90">AUDIO, EMBED, FRAME, IFRAME, IMG, INPUT, SCRIPT, SOURCE, TRACK, VIDEO</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">usemap</span></td><td><span class="deltaxml-new" style="background:#90EE90">IMG, INPUT, OBJECT</span></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">value</span></td><td><span class="deltaxml-new" style="background:#90EE90">INPUT</span></td></tr></tbody></table></div><div class="div1"><h2><a id="implementation-defined-or-dependent-features"></a><span class="deltaxml-new" style="background:#90EE90">E Checklist of Implementation-Defined </span><span><span class="deltaxml-new" style="background:#90EE90">and Implementation-Dependent</span></span><span class="deltaxml-new" style="background:#90EE90"> Features (Non-Normative)</span></h2><p><span class="deltaxml-new" style="background:#90EE90">This appendix provides a summary of Serialization features whose effect is explicitly </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span><span class="deltaxml-new" style="background:#90EE90"> or </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a></span><span class="deltaxml-new" style="background:#90EE90">. </span></p><div class="div2"><h3><a id="implementation-defined-features"></a><span class="deltaxml-new" style="background:#90EE90">E.1 Checklist of Implementation-Defined Features</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The following list describes Serialization features whose effect is explicitly </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">. The conformance rules (see </span><a href="#conformance"><b><span class="deltaxml-new" style="background:#90EE90">12 Conformance</span></b></a><span class="deltaxml-new" style="background:#90EE90">) require vendors to provide documentation that explains how these choices have been exercised.</span></p><ol><li><span class="deltaxml-new" style="background:#90EE90">For any </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> output method, it is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> whether </span><a title="sequence normalization" class="termref" href="#sequence-normalization"><span class="deltaxml-new" style="background:#90EE90">sequence normalization</span></a><span class="deltaxml-new" style="background:#90EE90"> process takes place. (See </span><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">If the namespace URI is non-null for the </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter, then the parameter specifies an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> output method. (See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">The effect of additional serialization parameters on the output of the </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90">, where the name of such a parameter </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST</span></strong><span class="deltaxml-new" style="background:#90EE90"> be namespace-qualified, is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> or </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. The extent of this effect on the output </span><strong><span class="deltaxml-new" style="background:#90EE90">MUST NOT</span></strong><span class="deltaxml-new" style="background:#90EE90"> override the provisions of this specification. (See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">Implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> schema components </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> be included in the set of schema components that are used in evaluating an XQuery expression or XSLT instruction in the process of using an XDM instance to determine the serialization parameters. (See </span><a href="#serparams-in-xdm-instance"><b><span class="deltaxml-new" style="background:#90EE90">3.1 Setting Serialization Parameters by Means of a Data Model Instance</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">If an instance of the data model used to determine the settings of serialization parameters contains elements or attributes that are in a namespace other than </span><code><span class="deltaxml-new" style="background:#90EE90">http://www.w3.org/2010/xslt-xquery-serialization</span></code><span class="deltaxml-new" style="background:#90EE90">, the implementation </span><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> interpret them to specify the values of </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> serialization parameters in an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> manner. (See </span><a href="#serparams-in-xdm-instance"><b><span class="deltaxml-new" style="background:#90EE90">3.1 Setting Serialization Parameters by Means of a Data Model Instance</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">The effect of providing an option that allows the encoding phase to be skipped, so that the result of serialization is a stream of Unicode characters, is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">. The </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><span class="deltaxml-new" style="background:#90EE90"> is not required to support such an option. (See </span><a href="#serphases"><b><span class="deltaxml-new" style="background:#90EE90">4 Phases of Serialization</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">If an implementation supports a value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the XML or XHTML output method for which this document does not provide a normative definition, the behavior is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#XML_VERSION"><b><span class="deltaxml-new" style="background:#90EE90">5.1.1 XML Output Method: the version Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">A </span><a title="serializer" class="termref" href="#serializer"><span class="deltaxml-new" style="background:#90EE90">serializer</span></a><strong><span class="deltaxml-new" style="background:#90EE90">MAY</span></strong><span class="deltaxml-new" style="background:#90EE90"> provide an </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> mechanism to place CDATA sections in the </span><a title="result tree" class="termref" href="#result-tree"><span class="deltaxml-new" style="background:#90EE90">result tree</span></a><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#XML_CDATA-SECTION-ELEMENTS"><b><span class="deltaxml-new" style="background:#90EE90">5.1.5 XML Output Method: the cdata-section-elements Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">If the value of the </span><code><span class="deltaxml-new" style="background:#90EE90">normalization-form</span></code><span class="deltaxml-new" style="background:#90EE90"> form parameter is not </span><code><span class="deltaxml-new" style="background:#90EE90">NFC</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">NFD</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">NFKC</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">NFKD</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">fully-normalized</span></code><span class="deltaxml-new" style="background:#90EE90">, or </span><code><span class="deltaxml-new" style="background:#90EE90">none</span></code><span class="deltaxml-new" style="background:#90EE90"> then the meaning of the value and its effect is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#XML_NORMALIZATION-FORM"><b><span class="deltaxml-new" style="background:#90EE90">5.1.9 XML Output Method: the normalization-form Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90"> For the HTML output method, it is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> whether the </span><code><span class="deltaxml-new" style="background:#90EE90">basefont</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">frame</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">isindex</span></code><span class="deltaxml-new" style="background:#90EE90"> elements, which are not part of HTML5 are considered to be void elements when the </span><a title="requested HTML version" class="termref" href="#req-html-ver"><span class="deltaxml-new" style="background:#90EE90">requested HTML version</span></a><span class="deltaxml-new" style="background:#90EE90"> has the value </span><code><span class="deltaxml-new" style="background:#90EE90">5.0</span></code><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#HTML_MARKUP"><b><span class="deltaxml-new" style="background:#90EE90">7.1 Markup for Elements</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">If an implementation supports a value of the </span><code><span class="deltaxml-new" style="background:#90EE90">version</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for the HTML output method for which this document does not provide a normative definition, the behavior is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#HTML_VERSION"><b><span class="deltaxml-new" style="background:#90EE90">7.4.1 HTML Output Method: the version and html-version Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span><span class="deltaxml-new" style="background:#90EE90">It is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> whether the serialization process recovers from serialization errors when the Adaptive output method is used. If it does, it is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> what error indicator is used.</span></span><span class="deltaxml-new" style="background:#90EE90"> (See </span><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span><span class="deltaxml-new" style="background:#90EE90">It is </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> whether, when the Adaptive output method is used, a serializer includes hyperlinks in its output to record the types of atomic values, the bindings of namespace prefixes, the causes of error indicators, and other information.</span></span><span class="deltaxml-new" style="background:#90EE90"> (See </span><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li></ol></div><div class="div2"><h3><a id="implementation-dependent-features"></a><span class="deltaxml-new" style="background:#90EE90">E.2 Checklist of Implementation-Dependent Features</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The following list describes Serialization features whose effect is explicitly </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. The conformance rules (see </span><a href="#conformance"><b><span class="deltaxml-new" style="background:#90EE90">12 Conformance</span></b></a><span class="deltaxml-new" style="background:#90EE90">) do not require vendors or specifications which define conformance criteria for serialization to provide documentation that explains how these choices have been exercised.</span></p><ol><li><span class="deltaxml-new" style="background:#90EE90">The octet order of the serialized result sequence of octets is </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">In those cases where they have no important effect on the content of the serialized result, details of the output methods defined by this specification are left unspecified and are regarded as </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span class="deltaxml-new" style="background:#90EE90">When map items are serialized using the JSON output method, the order in which key/value pairs appear in the serialized output is </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90">. (See </span><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li><li><span><span class="deltaxml-new" style="background:#90EE90">If, when the Adaptive output method is used, a serializer includes hyperlinks in its output to record the types of atomic values, the bindings of namespace prefixes, the causes of error indicators, and other information, then it is </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90"> what hyperlinks are used and how they convey the information.</span></span><span class="deltaxml-new" style="background:#90EE90"> (See </span><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90">)</span></li></ol></div></div><div class="div1"><h2><a id="revision-log"></a><span class="deltaxml-new" style="background:#90EE90">F Change Log (Non-Normative)</span></h2><p><span class="deltaxml-new" style="background:#90EE90">This appendix details the changes that have been made since the publication of the first public working draft of this version (3.1) of this specification (</span><a href="#serialization-31-fpwd"><span class="deltaxml-new" style="background:#90EE90">[XSLT and XQuery Serialization 3.1 (First Public Working Draft)]</span></a><span class="deltaxml-new" style="background:#90EE90">). For differences between that working draft and earlier versions of this specification, see </span><a href="http://www.w3.org/TR/xslt-xquery-serialization-31/#revision-log"><span class="deltaxml-new" style="background:#90EE90">the Change Log</span></a><span class="deltaxml-new" style="background:#90EE90"> in that draft.</span></p><div class="div2"><h3><a id="id-changes-pr"></a><span class="deltaxml-new" style="background:#90EE90">F.1 Changes introduced in the Proposed Recommendation</span></h3><p><span class="deltaxml-new" style="background:#90EE90">None.</span></p></div><div class="div2"><h3><a id="id-changes-cr2"></a><span class="deltaxml-new" style="background:#90EE90">F.2 Changes introduced in the second Candidate Recommendation</span></h3><table style="border:1px solid; padding:5px; width:100%" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Changes for current version</span></caption><thead><tr><td><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug (if applicable)</span></td><td><span class="deltaxml-new" style="background:#90EE90">Erratum (if applicable)</span></td><td><span class="deltaxml-new" style="background:#90EE90">Category</span></td><td><span class="deltaxml-new" style="background:#90EE90">Description of change</span></td><td><span class="deltaxml-new" style="background:#90EE90">Affected sections</span></td></tr></thead><tbody><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29435"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29435</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Allow numbers to be serialized using any legal JSON lexical representation in the JSON output method</span></td><td><ul><li><p><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> allow implementors to choose which legal lexical form to serialize JSON numbers. This allows an xs:double containing a whole number to be serialized as an integer.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29703"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29703</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Addition of </span><code><span class="deltaxml-new" style="background:#90EE90">true</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">false</span></code><span class="deltaxml-new" style="background:#90EE90">, </span><code><span class="deltaxml-new" style="background:#90EE90">1</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">0</span></code><span class="deltaxml-new" style="background:#90EE90"> as allowable values of Boolean serialization parameters.</span></td><td><ul><li><p><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> update table with allowable values of Boolean parameters.</span></p></li><li><p><a href="#xml-output"><b><span class="deltaxml-new" style="background:#90EE90">5 XML Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> update description with new allowable values.</span></p></li><li><p><a href="#xhtml-output"><b><span class="deltaxml-new" style="background:#90EE90">6 XHTML Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> update description with new allowable values.</span></p></li><li><p><a href="#html-output"><b><span class="deltaxml-new" style="background:#90EE90">7 HTML Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> update description with new allowable values.</span></p></li><li><p><a href="#text-output"><b><span class="deltaxml-new" style="background:#90EE90">8 Text Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> update description with new allowable values.</span></p></li><li><p><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> update description with new allowable values.</span></p></li><li><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> update description with new allowable values.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29704"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29704</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial</span></td><td><span class="deltaxml-new" style="background:#90EE90">Minor changes in static context table.</span></td><td><ul><li><p><a href="#serparams-in-xdm-instance"><b><span class="deltaxml-new" style="background:#90EE90">3.1 Setting Serialization Parameters by Means of a Data Model Instance</span></b></a><span class="deltaxml-new" style="background:#90EE90"> change prefix for xslt namespace and define fn:local-name in staic context table.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29296"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29296</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial</span></td><td><span class="deltaxml-new" style="background:#90EE90">Adaptive Method, Error Recovery.</span></td><td><ul><li><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> change how errors SHOULD recover to implementation-defined.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29664"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29664</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">JSON Output Method: the json-node-output-method Parameter.</span></td><td><ul><li><p><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> and </span><a href="#JSON_PARAMS"><b><span class="deltaxml-new" style="background:#90EE90">9.1 The Influence of Serialization Parameters upon the JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> clarify how serialization parameters are passed down to delegated json-node-output-method.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29665"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29665</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">JSON escaping</span></td><td><ul><li><p><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add solidus and reverse solidus to the list of characters that are escaped when serializing to a JSON string.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29824"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29824</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Adaptive method: decimal format</span></td><td><ul><li><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> specify the default decimal format properties.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29822"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29822</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Adaptive method: xs:anyURI</span></td><td><ul><li><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> serialize xs:anyURI in the same way as an xs:string.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29890"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29890</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Specified sequence normalization for arrays</span></td><td><ul><li><p><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90"> sequence normalization rules.</span></p></li></ul></td></tr></tbody></table></div><div class="div2"><h3><a id="id-changes-cr1"></a><span class="deltaxml-new" style="background:#90EE90">F.3 Changes introduced in the first Candidate Recommendation</span></h3><table style="border:1px solid; padding:5px; width:100%" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Changes for current version</span></caption><thead><tr><td><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug (if applicable)</span></td><td><span class="deltaxml-new" style="background:#90EE90">Erratum (if applicable)</span></td><td><span class="deltaxml-new" style="background:#90EE90">Category</span></td><td><span class="deltaxml-new" style="background:#90EE90">Description of change</span></td><td><span class="deltaxml-new" style="background:#90EE90">Affected sections</span></td></tr></thead><tbody><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28811"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 28811</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial</span></td><td><span class="deltaxml-new" style="background:#90EE90">Clarified the serialization of function items in the Adaptive output method</span></td><td><ul><li><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> clarify the definition of serialization of function items and give more relevant examples</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28457"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 28457</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Specified the namespace of the generated meta element in the XHTML output method</span></td><td><ul><li><p><a href="#XHTML_INCLUDE-CONTENT-TYPE"><b><span class="deltaxml-new" style="background:#90EE90">6.1.14 XHTML Output Method: the include-content-type Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add missing information on the namespace of the </span><code><span class="deltaxml-new" style="background:#90EE90">meta</span></code><span class="deltaxml-new" style="background:#90EE90"> element when added by the </span><code><span class="deltaxml-new" style="background:#90EE90">include-content-type</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28476"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 28476</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Clarified the escaping rules for the JSON output method.</span></td><td><ul><li><p><a href="#serphases"><b><span class="deltaxml-new" style="background:#90EE90">4 Phases of Serialization</span></b></a><span class="deltaxml-new" style="background:#90EE90"> removed the JSON output method rules from this section.</span></p></li><li><p><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> added the escaping and encoding rules for serialization as a JSON string.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=28947"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 28947</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Changed the serialization rules for the Adaptive output method based on implementation feedback.</span></td><td><ul><li><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> modified the serialization logic to produce a more consistent representation of values from top level sequences and values embedded in maps and arrays.</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=29272"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 29272</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Changed the serialization rules for the Adaptive output method based on implementation feedback.</span></td><td><ul><li><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> modified the serialization rule for </span><code><span class="deltaxml-new" style="background:#90EE90">xs:string</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">xs:untypedAtomic</span></code><span class="deltaxml-new" style="background:#90EE90"> values to produce a result consistant with text nodes. </span><code><span class="deltaxml-new" style="background:#90EE90">byte-order-mark</span></code><span class="deltaxml-new" style="background:#90EE90"> serialization parameter is now handled by the Adaptive output method and not passed down to any delegated output methods.</span></p></li></ul></td></tr></tbody></table></div><div class="div2"><h3><a id="changes-for-previous-drafts"></a><span class="deltaxml-new" style="background:#90EE90">F.4 Changes applied to previous Public Working Drafts</span></h3><p><span class="deltaxml-new" style="background:#90EE90">The following changes have been applied previous versions of this document since the publication of the first Public Working Draft.</span></p><table style="border:1px solid; padding:5px; width:100%" class="medium no-code-break"><caption><span class="deltaxml-new" style="background:#90EE90">Changes for current version</span></caption><thead><tr><td><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug (if applicable)</span></td><td><span class="deltaxml-new" style="background:#90EE90">Erratum (if applicable)</span></td><td><span class="deltaxml-new" style="background:#90EE90">Category</span></td><td><span class="deltaxml-new" style="background:#90EE90">Description of change</span></td><td><span class="deltaxml-new" style="background:#90EE90">Affected sections</span></td></tr></thead><tbody><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26862"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 26862</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Correction of expressions used to describe validation of serialization parameters supplied by means of an XDM data model instance.</span></td><td><ul><li><p><a href="#serparams-in-xdm-instance"><b><span class="deltaxml-new" style="background:#90EE90">3.1 Setting Serialization Parameters by Means of a Data Model Instance</span></b></a><span class="deltaxml-new" style="background:#90EE90"> reword XQuery and XSLT fragments involving validation to apply validation to the children of </span><code><span class="deltaxml-new" style="background:#90EE90">output:serialization-parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> and not to </span><code><span class="deltaxml-new" style="background:#90EE90">output:serialization-parameters</span></code><span class="deltaxml-new" style="background:#90EE90"> itself. (Validation against the schema defined in this specification is required only for parameters defined in this specification; it is not required for </span><a title="implementation-defined" class="termref" href="#impdef"><span class="deltaxml-new" style="background:#90EE90">implementation-defined</span></a><span class="deltaxml-new" style="background:#90EE90"> serialization parameters.</span></p></li></ul></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial changes to wording regarding names with null namespace URIs.</span></td><td><ul><li><p><a href="#terminology"><b><span class="deltaxml-new" style="background:#90EE90">1.1 Terminology</span></b></a><span class="deltaxml-new" style="background:#90EE90"> reword definition of </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90"> to avoid the suggestion that unqualified names are names in no namespace</span></p></li><li><p><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> describe names of serialization parameters have having </span><a title="null namespace URI" class="termref" href="#null-namespace-URI"><span class="deltaxml-new" style="background:#90EE90">null namespace URI</span></a><span class="deltaxml-new" style="background:#90EE90"> rather than as being "in no namespace"</span></p></li></ul></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial improvements to presentation of JSON output method.</span></td><td><ul><li><p><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90"> (say explicitly that sequence normalization must not be performed)</span></p></li><li><p><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> rephrase description of </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter for clarity; add mentions of </span><code><span class="deltaxml-new" style="background:#90EE90">json</span></code><span class="deltaxml-new" style="background:#90EE90"> method in prose</span></p></li><li><p><a href="#serphases"><b><span class="deltaxml-new" style="background:#90EE90">4 Phases of Serialization</span></b></a><span class="deltaxml-new" style="background:#90EE90"> specify how the phases of serialization work for JSON output; change references to "normalized sequence" to refer to "sequence"; specify that character expansion applies to strings; specify that character escaping applies to JSON output</span></p></li><li><p><a href="#XML_ALLOW-DUPLICATE-NAMES"><b><span class="deltaxml-new" style="background:#90EE90">5.1.16 XML Output Method: the allow-duplicate-names Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#XML_JSON-NODE-OUTPUT-METHOD"><b><span class="deltaxml-new" style="background:#90EE90">5.1.17 XML Output Method: the json-node-output-method Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#XHTML_ALLOW-DUPLICATE-NAMES"><b><span class="deltaxml-new" style="background:#90EE90">6.1.16 XHTML Output Method: the allow-duplicate-names Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#XHTML_JSON-NODE-OUTPUT-METHOD"><b><span class="deltaxml-new" style="background:#90EE90">6.1.17 XHTML Output Method: the json-node-output-method Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#HTML_ALLOW-DUPLICATE-NAMES"><b><span class="deltaxml-new" style="background:#90EE90">7.4.15 HTML Output Method: the allow-duplicate-names Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#HTML_JSON-NODE-OUTPUT-METHOD"><b><span class="deltaxml-new" style="background:#90EE90">7.4.16 HTML Output Method: the json-node-output-method Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#TEXT_ALLOW-DUPLICATE-NAMES"><b><span class="deltaxml-new" style="background:#90EE90">8.1.16 Text Output Method: the allow-duplicate-names Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#TEXT_JSON-NODE-OUTPUT-METHOD"><b><span class="deltaxml-new" style="background:#90EE90">8.1.17 Text Output Method: the json-node-output-method Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> refer to RFC 7159; rephrase rules for different kinds of items, to connect with </span><a href="#serphases"><b><span class="deltaxml-new" style="background:#90EE90">4 Phases of Serialization</span></b></a><span class="deltaxml-new" style="background:#90EE90">; specify that empty sequences are serialized as </span><code><span class="deltaxml-new" style="background:#90EE90">null</span></code></p></li><li><p><a href="#JSON_ENCODING"><b><span class="deltaxml-new" style="background:#90EE90">9.1.3 JSON Output Method: the encoding Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add warning on non-standard encodings</span></p></li><li><p><a href="#JSON_BYTE-ORDER-MARK"><b><span class="deltaxml-new" style="background:#90EE90">9.1.12 JSON Output Method: the byte-order-mark Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add warning about BOM use in JSON</span></p></li><li><p><a href="#JSON_ALLOW-DUPLICATE-NAMES"><b><span class="deltaxml-new" style="background:#90EE90">9.1.16 JSON Output Method: the allow-duplicate-names Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li><li><p><a href="#JSON_JSON-NODE-OUTPUT-METHOD"><b><span class="deltaxml-new" style="background:#90EE90">9.1.17 JSON Output Method: the json-node-output-method Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=26784"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 26784</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Changes to JSON output method</span></td><td><ul><li><p><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters</span></p></li><li><p><a href="#json-output"><b><span class="deltaxml-new" style="background:#90EE90">9 JSON Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> specify that duplicate names are an error unless </span><code><span class="deltaxml-new" style="background:#90EE90">allow-duplicate-names</span></code><span class="deltaxml-new" style="background:#90EE90"> has the value </span><code><span class="deltaxml-new" style="background:#90EE90">yes</span></code><span class="deltaxml-new" style="background:#90EE90">; specify that NaN and Infinity raise an error in the JSON output method; specify that sequences with length greater than one are serialized as JSON arrays; specify that nodes are serialized using the output method defined by the </span><code><span class="deltaxml-new" style="background:#90EE90">json-node-output-method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter </span></p></li><li><p><a href="#JSON_INDENT"><b><span class="deltaxml-new" style="background:#90EE90">9.1.4 JSON Output Method: the indent and suppress-indentation Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> change description of </span><code><span class="deltaxml-new" style="background:#90EE90">indent</span></code><span class="deltaxml-new" style="background:#90EE90"> and </span><code><span class="deltaxml-new" style="background:#90EE90">suppress-indentation</span></code><span class="deltaxml-new" style="background:#90EE90"> parameters </span></p></li><li><p><a href="#JSON_ITEM-SEPARATOR"><b><span class="deltaxml-new" style="background:#90EE90">9.1.15 JSON Output Method: the item-separator Parameter</span></b></a><span class="deltaxml-new" style="background:#90EE90"> specify that this is not applicable</span></p></li></ul></td></tr><tr><td><a href="https://www.w3.org/Bugs/Public/show_bug.cgi?id=27498"><span class="deltaxml-new" style="background:#90EE90">Bugzilla bug 27498</span></a></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Substantive</span></td><td><span class="deltaxml-new" style="background:#90EE90">Definition of Adaptive output method</span></td><td><ul><li><p><a href="#serdm"><b><span class="deltaxml-new" style="background:#90EE90">2 Sequence Normalization</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add mention of Adaptive output method as not performing sequence normalization</span></p><p><a href="#serparam"><b><span class="deltaxml-new" style="background:#90EE90">3 Serialization Parameters</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add </span><code><span class="deltaxml-new" style="background:#90EE90">adaptive</span></code><span class="deltaxml-new" style="background:#90EE90"> to list of values for the </span><code><span class="deltaxml-new" style="background:#90EE90">method</span></code><span class="deltaxml-new" style="background:#90EE90"> parameter</span></p><p><a href="#serphases"><b><span class="deltaxml-new" style="background:#90EE90">4 Phases of Serialization</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add mention of Adaptive output method as not performing sequence normalization</span></p><p><a href="#adaptive-output"><b><span class="deltaxml-new" style="background:#90EE90">10 Adaptive Output Method</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add new section</span></p></li></ul></td></tr><tr><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">None</span></td><td><span class="deltaxml-new" style="background:#90EE90">Editorial</span></td><td><span class="deltaxml-new" style="background:#90EE90">Addition of appendix with checklist of </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90"> features</span></td><td><ul><li><p><a href="#implementation-defined-or-dependent-features"><b><span class="deltaxml-new" style="background:#90EE90">E Checklist of Implementation-Defined and Implementation-Dependent Features</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add section as wrapper for the two checklists</span></p></li><li><p><a href="#implementation-dependent-features"><b><span class="deltaxml-new" style="background:#90EE90">E.2 Checklist of Implementation-Dependent Features</span></b></a><span class="deltaxml-new" style="background:#90EE90"> add checklist of </span><a title="implementation-dependent" class="termref" href="#impdep"><span class="deltaxml-new" style="background:#90EE90">implementation-dependent</span></a><span class="deltaxml-new" style="background:#90EE90"> features</span></p></li><li><p><a href="#implementation-defined-features"><b><span class="deltaxml-new" style="background:#90EE90">E.1 Checklist of Implementation-Defined Features</span></b></a><span class="deltaxml-new" style="background:#90EE90"> push down a level and change introductory wording accordingly</span></p></li></ul></td></tr></tbody></table></div></div></div><script src="//www.w3.org/scripts/TR/2016/fixup.js"></script><script src="/js/scroll.js"></script></body></html>